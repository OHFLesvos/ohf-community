(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{7:function(t,e,r){t.exports=r("J5RT")},J5RT:function(t,e,r){"use strict";r.r(e);var n=r("XuX8"),a=r.n(n),i=r("X1uE"),s=r("1QPe"),o=r("o0o1"),u=r.n(o),l=r("OJ8O");function c(t,e,r,n,a,i,s){try{var o=t[i](s),u=o.value}catch(t){return void r(t)}o.done?e(u):Promise.resolve(u).then(n,a)}function p(t){return function(){var e=this,r=arguments;return new Promise((function(n,a){var i=t.apply(e,r);function s(t){c(i,n,a,s,o,"next",t)}function o(t){c(i,n,a,s,o,"throw",t)}s(void 0)}))}}var f={list:function(t){return p(u.a.mark((function e(){var r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Object(l.c)("api.cmtyvol.index",t),e.next=3,l.a.get(r);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})))()},ageDistribution:function(){return p(u.a.mark((function t(){var e;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=Object(l.c)("api.cmtyvol.ageDistribution"),t.next=3,l.a.get(e);case 3:return t.abrupt("return",t.sent);case 4:case"end":return t.stop()}}),t)})))()},genderDistribution:function(){return p(u.a.mark((function t(){var e;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=Object(l.c)("api.cmtyvol.genderDistribution"),t.next=3,l.a.get(e);case 3:return t.abrupt("return",t.sent);case 4:case"end":return t.stop()}}),t)})))()},nationalityDistribution:function(){return p(u.a.mark((function t(){var e;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=Object(l.c)("api.cmtyvol.nationalityDistribution"),t.next=3,l.a.get(e);case 3:return t.abrupt("return",t.sent);case 4:case"end":return t.stop()}}),t)})))()},listComments:function(t){return p(u.a.mark((function e(){var r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Object(l.c)("api.cmtyvol.comments.index",t),e.next=3,l.a.get(r);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})))()},storeComment:function(t,e){return p(u.a.mark((function r(){var n;return u.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return n=Object(l.c)("api.cmtyvol.comments.store",t),r.next=3,l.a.post(n,e);case 3:return r.abrupt("return",r.sent);case 4:case"end":return r.stop()}}),r)})))()}},m=r("rTcV"),d=r("4LGy"),v={components:{BarChart:m.a,DoughnutChart:d.a},data:function(){return{api:f}}},y=r("KHd+"),h=Object(y.a)(v,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("bar-chart",{staticClass:"mb-2",attrs:{title:t.$t("people.age_distribution"),"x-label":t.$t("people.age"),"y-label":t.$t("app.quantity"),data:t.api.ageDistribution,height:350}}),t._v(" "),r("div",{staticClass:"row mb-4"},[r("div",{staticClass:"col-sm"},[r("doughnut-chart",{staticClass:"mb-2",attrs:{title:t.$t("people.gender"),data:t.api.genderDistribution,"hide-legend":"",height:300}})],1),t._v(" "),r("div",{staticClass:"col-sm"},[r("doughnut-chart",{staticClass:"mb-2",attrs:{title:t.$t("people.nationalities"),data:t.api.nationalityDistribution,height:300}})],1)])],1)}),[],!1,null,null,null).exports,_=r("FB1B"),g=r.n(_),b=r("D52m"),w={props:{value:{type:String,required:!0}},data:function(){return{workStatuses:{active:this.$t("people.active"),future:this.$t("people.future"),alumni:this.$t("people.alumni")}}}},k=Object(y.a)(w,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("b-button-group",{attrs:{size:"sm"}},t._l(t.workStatuses,(function(e,n){return r("b-button",{key:n,attrs:{variant:t.value==n?"dark":"secondary"},on:{click:function(e){return t.$emit("input",n)}}},[t._v("\n        "+t._s(e)+"\n    ")])})),1)}),[],!1,null,null,null).exports,x={props:{value:{type:String,required:!0}},data:function(){return{viewTypes:{list:{label:this.$t("app.list"),icon:"table"},grid:{label:this.$t("app.grid"),icon:"grip-horizontal"}}}}},P=Object(y.a)(x,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("b-button-group",{attrs:{size:"sm"}},t._l(t.viewTypes,(function(e,n){return r("b-button",{key:n,attrs:{variant:t.value==n?"dark":"secondary"},on:{click:function(e){return t.$emit("input",n)}}},[r("font-awesome-icon",{attrs:{icon:e.icon}})],1)})),1)}),[],!1,null,null,null).exports,$=r("OVUS"),S=r("gmD9"),C=r("/O0n"),T={props:{item:{reuqired:!0}},data:function(){return{placeholderPicture:"/img/portrait_placeholder.png"}},methods:{arrayToString:function(t){return Array.isArray(t)?t.join(", "):t}}},D=Object(y.a)(T,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("b-card",{staticClass:"mb-4",attrs:{"no-body":"","header-class":"p-2"},scopedSlots:t._u([{key:"header",fn:function(){return["f"==t.item.gender?r("font-awesome-icon",{attrs:{icon:"female"}}):t._e(),t._v(" "),"m"==t.item.gender?r("font-awesome-icon",{attrs:{icon:"male"}}):t._e(),t._v(" "),t.item.nickname?[t._v("\n            "+t._s(t.item.nickname)+"\n        ")]:[t._v("\n            "+t._s(t.item.first_name)+"\n        ")]]},proxy:!0}])},[t._v(" "),r("b-card-body",{staticClass:"p-0"},[r("a",{attrs:{href:t.item.url}},[t.item.portrait_picture_url?r("img",{staticClass:"img-fluid",attrs:{src:t.item.portrait_picture_url,alt:"Portrait"}}):r("img",{staticClass:"img-fluid",attrs:{src:t.placeholderPicture,alt:"Placeholder"}})])]),t._v(" "),r("b-card-body",{staticClass:"py-1 px-2"},[r("small",[t._v("\n            "+t._s(t.item.full_name)),r("br"),t._v("\n            "+t._s(t.item.age)),t.item.nationality&&t.item.age?[t._v(",")]:t._e(),t._v("\n            "+t._s(t.item.nationality)),r("br")],2)])],1)}),[],!1,null,null,null).exports;function O(t,e,r,n,a,i,s){try{var o=t[i](s),u=o.value}catch(t){return void r(t)}o.done?e(u):Promise.resolve(u).then(n,a)}function j(t){return function(){var e=this,r=arguments;return new Promise((function(n,a){var i=t.apply(e,r);function s(t){O(i,n,a,s,o,"next",t)}function o(t){O(i,n,a,s,o,"throw",t)}s(void 0)}))}}var B={components:{AlertWithRetry:$.a,TableFilter:S.a,TablePagination:C.a,GridItem:D},props:{apiMethod:{required:!0,type:Function},itemsPerPage:{required:!1,type:Number,default:25}},data:function(){var t="communityVolunteerGrid";return{id:t,data:null,isBusy:!1,errorText:null,currentPage:sessionStorage.getItem(t+".currentPage")?parseInt(sessionStorage.getItem(t+".currentPage")):1,perPage:this.itemsPerPage,sortBy:"first_name",sortDesc:!1,totalRows:0,filter:"",filterPlaceholder:this.$t("app.search")}},watch:{filter:function(){this.currentPage=1,this.refresh()},currentPage:function(){this.refresh()}},created:function(){var t=this;return j(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.refresh();case 1:case"end":return e.stop()}}),e)})))()},methods:{itemProvider:function(){var t=this;return j(u.a.mark((function e(){var r,n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.isBusy=!0,t.errorText=null,r={filter:t.filter,page:t.currentPage,pageSize:t.perPage,sortBy:t.sortBy,sortDirection:t.sortDesc?"desc":"asc"},e.prev=3,e.next=6,t.apiMethod(r);case 6:return n=e.sent,t.totalRows=n.meta.total,t.isBusy=!1,sessionStorage.setItem(t.id+".currentPage",t.currentPage),e.abrupt("return",n.data||[]);case 13:return e.prev=13,e.t0=e.catch(3),t.isBusy=!1,t.errorText=e.t0,e.abrupt("return",[]);case 18:case"end":return e.stop()}}),e,null,[[3,13]])})))()},refresh:function(){var t=this;return j(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.itemProvider();case 2:t.data=e.sent;case 3:case"end":return e.stop()}}),e)})))()}}},I=Object(y.a)(B,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("alert-with-retry",{attrs:{value:t.errorText},on:{retry:t.refresh}}),t._v(" "),r("div",{staticClass:"form-row"},[t.$slots["filter-prepend"]?r("div",{staticClass:"col-auto"},[t._t("filter-prepend")],2):t._e(),t._v(" "),r("div",{staticClass:"col"},[r("table-filter",{attrs:{placeholder:t.filterPlaceholder,"is-busy":t.isBusy,"total-rows":t.totalRows},model:{value:t.filter,callback:function(e){t.filter=e},expression:"filter"}})],1),t._v(" "),t.$slots["filter-append"]?r("div",{staticClass:"col-auto"},[t._t("filter-append")],2):t._e()]),t._v(" "),null==t.data||t.isBusy?r("p",[t._v("\n        "+t._s(t.$t("app.loading"))+"\n    ")]):t.data.length>0?r("div",{staticClass:"row"},t._l(t.data,(function(t){return r("div",{key:t.id,staticClass:"col-lg-2 col-md-3 col-sm-4 col-6"},[r("grid-item",{attrs:{item:t}})],1)})),0):r("b-alert",{attrs:{show:"",variant:"info"}},[t._v("\n        "+t._s(t.$t("app.no_records_matching_your_request"))+"\n    ")]),t._v(" "),r("table-pagination",{attrs:{"total-rows":t.totalRows,"per-page":t.perPage,disabled:t.isBusy},model:{value:t.currentPage,callback:function(e){t.currentPage=e},expression:"currentPage"}})],1)}),[],!1,null,null,null).exports,q={components:{BaseTable:b.a,Nl2br:g.a,WorkStatusSelector:k,ViewTypeSelector:P,GridView:I},data:function(){return{fields:[{key:"first_name",label:this.$t("people.first_name"),sortable:!0},{key:"family_name",label:this.$t("people.family_name"),sortable:!0},{key:"nickname",label:this.$t("people.nickname")},{key:"nationality",label:this.$t("people.nationality"),sortable:!0},{key:"gender",label:this.$t("people.gender"),class:"text-center fit"},{key:"age",label:this.$t("people.age"),sortable:!0,class:"text-right fit"},{key:"responsibilities",label:this.$t("app.responsibilities")},{key:"languages",label:this.$t("people.languages")}],workStatus:sessionStorage.getItem("cmtyvol.workStatus")?sessionStorage.getItem("cmtyvol.workStatus"):"active",viewType:sessionStorage.getItem("cmtyvol.viewType")?sessionStorage.getItem("cmtyvol.viewType"):"list",itemsPerPage:12}},watch:{workStatus:function(t){var e=this.$refs.table;e&&e.refresh();var r=this.$refs.grid;r&&r.refresh(),sessionStorage.setItem("cmtyvol.workStatus",t)},viewType:function(t){sessionStorage.setItem("cmtyvol.viewType",t)}},methods:{fetchData:function(t){return t.workStatus=this.workStatus,f.list(t)},arrayToString:function(t){return Array.isArray(t)?t.join("\n"):t}}},E=Object(y.a)(q,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",["list"==t.viewType?r("base-table",{ref:"table",attrs:{id:"communityVolunteerTable",fields:t.fields,"api-method":t.fetchData,"default-sort-by":"first_name","empty-text":t.$t("cmtyvol.none_found"),"filter-placeholder":t.$t("app.search"),"items-per-page":t.itemsPerPage},scopedSlots:t._u([{key:"cell(first_name)",fn:function(e){return[null!=e.item.url?[""!=e.value?r("a",{attrs:{href:e.item.url}},[t._v(t._s(e.value))]):t._e()]:[t._v("\n                "+t._s(e.value)+"\n            ")]]}},{key:"cell(family_name)",fn:function(e){return[null!=e.item.url?[""!=e.value?r("a",{attrs:{href:e.item.url}},[t._v(t._s(e.value))]):t._e()]:[t._v("\n                "+t._s(e.value)+"\n            ")]]}},{key:"cell(gender)",fn:function(e){return["m"==e.value?r("font-awesome-icon",{attrs:{icon:"male"}}):t._e(),t._v(" "),"f"==e.value?r("font-awesome-icon",{attrs:{icon:"female"}}):t._e()]}},{key:"cell(languages)",fn:function(e){return[r("nl2br",{attrs:{tag:"span",text:t.arrayToString(e.value)}})]}},{key:"cell(responsibilities)",fn:function(e){return[t._l(e.value,(function(e,n){return[t._v("\n                "+t._s(n)+"\n                "),e.description?r("b-button",{directives:[{name:"b-popover",rawName:"v-b-popover.focus",value:e.description,expression:"attributes.description",modifiers:{focus:!0}}],key:n+"-a",staticClass:"description-tooltip p-0",attrs:{variant:"link",href:"#"}},[r("font-awesome-icon",{key:n+"-i",attrs:{icon:"info-circle"}})],1):t._e(),t._v(" "),e.start_date&&e.end_date?[t._v("\n                    ("+t._s(t.$t("app.from_until_date",{from:e.start_date,until:e.end_date}))+")\n                ")]:e.start_date?[t._v("\n                    ("+t._s(t.$t("app.from_date",{date:e.start_date}))+")\n                ")]:e.end_date?[t._v("\n                    ("+t._s(t.$t("app.until_date",{date:e.end_date}))+")\n                ")]:t._e(),t._v(" "),r("br",{key:n+"-b"})]}))]}},{key:"filter-prepend",fn:function(){return[r("work-status-selector",{model:{value:t.workStatus,callback:function(e){t.workStatus=e},expression:"workStatus"}})]},proxy:!0},{key:"filter-append",fn:function(){return[r("view-type-selector",{model:{value:t.viewType,callback:function(e){t.viewType=e},expression:"viewType"}})]},proxy:!0}],null,!1,2150041494)}):"grid"==t.viewType?r("grid-view",{ref:"grid",attrs:{"api-method":t.fetchData,"items-per-page":t.itemsPerPage},scopedSlots:t._u([{key:"filter-prepend",fn:function(){return[r("work-status-selector",{model:{value:t.workStatus,callback:function(e){t.workStatus=e},expression:"workStatus"}})]},proxy:!0},{key:"filter-append",fn:function(){return[r("view-type-selector",{model:{value:t.viewType,callback:function(e){t.viewType=e},expression:"viewType"}})]},proxy:!0}])}):t._e()],1)}),[],!1,null,null,null).exports;function R(t,e,r,n,a,i,s){try{var o=t[i](s),u=o.value}catch(t){return void r(t)}o.done?e(u):Promise.resolve(u).then(n,a)}var V={components:{CommentsList:r("G0YI").a},props:{id:{required:!0}},data:function(){return{canCreate:!1}},methods:{listComments:function(){var t,e=this;return(t=u.a.mark((function t(){var r;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,f.listComments(e.id);case 2:return r=t.sent,e.canCreate=r.meta.can_create,t.abrupt("return",r);case 5:case"end":return t.stop()}}),t)})),function(){var e=this,r=arguments;return new Promise((function(n,a){var i=t.apply(e,r);function s(t){R(i,n,a,s,o,"next",t)}function o(t){R(i,n,a,s,o,"throw",t)}s(void 0)}))})()},storeComment:function(t){return f.storeComment(this.id,t)}}},A=Object(y.a)(V,(function(){var t=this,e=t.$createElement;return(t._self._c||e)("comments-list",{key:t.id,attrs:{"api-list-method":t.listComments,"api-create-method":t.canCreate?t.storeComment:null},on:{count:function(e){return t.$emit("count",{type:"comments",value:e})}}})}),[],!1,null,null,null).exports,G=r("fxIy"),J=r("UvZm");a.a.use(i.a),a.a.component("font-awesome-icon",s.a),a.a.mixin(J.a),a.a.config.productionTip=!1,new a.a({el:"#cmtyvol-app",i18n:G.a,components:{CommunityVolunteersReportPage:h,CommunityVolunteersOverviewPage:E,CmtyvolComments:A}})}},[[7,0,1]]]);
//# sourceMappingURL=cmtyvol.js.map