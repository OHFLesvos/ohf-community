!function(e){var t={};function n(o){if(t[o])return t[o].exports;var r=t[o]={i:o,l:!1,exports:{}};return e[o].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(o,r,function(t){return e[t]}.bind(null,r));return o},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/",n(n.s=0)}({0:function(e,t,n){n("b/UH"),e.exports=n("LG8y")},LG8y:function(e,t){},TJhI:function(e,t,n){var o;!function(n,r){"use strict";void 0===(o=function(){return n.Snackbar=function(){var e={current:null},t={text:"Default Text",textColor:"#FFFFFF",width:"auto",showAction:!0,actionText:"Dismiss",actionTextAria:"Dismiss, Description for Screen Readers",actionTextColor:"#4CAF50",showSecondButton:!1,secondButtonText:"",secondButtonAria:"Description for Screen Readers",secondButtonTextColor:"#4CAF50",backgroundColor:"#323232",pos:"bottom-left",duration:5e3,customClass:"",onActionClick:function(e){e.style.opacity=0},onSecondButtonClick:function(e){},onClose:function(e){}};e.show=function(o){var r=n(!0,t,o);e.current&&(e.current.style.opacity=0,setTimeout(function(){var e=this.parentElement;e&&e.removeChild(this)}.bind(e.current),500)),e.snackbar=document.createElement("div"),e.snackbar.className="snackbar-container "+r.customClass,e.snackbar.style.width=r.width;var a=document.createElement("p");if(a.style.margin=0,a.style.padding=0,a.style.color=r.textColor,a.style.fontSize="14px",a.style.fontWeight=300,a.style.lineHeight="1em",a.innerHTML=r.text,e.snackbar.appendChild(a),e.snackbar.style.background=r.backgroundColor,r.showSecondButton){var i=document.createElement("button");i.className="action",i.innerHTML=r.secondButtonText,i.setAttribute("aria-label",r.secondButtonAria),i.style.color=r.secondButtonTextColor,i.addEventListener("click",(function(){r.onSecondButtonClick(e.snackbar)})),e.snackbar.appendChild(i)}if(r.showAction){var l=document.createElement("button");l.className="action",l.innerHTML=r.actionText,l.setAttribute("aria-label",r.actionTextAria),l.style.color=r.actionTextColor,l.addEventListener("click",(function(){r.onActionClick(e.snackbar)})),e.snackbar.appendChild(l)}r.duration&&setTimeout(function(){e.current===this&&(e.current.style.opacity=0,e.current.style.top="-100px",e.current.style.bottom="-100px")}.bind(e.snackbar),r.duration),e.snackbar.addEventListener("transitionend",function(t,n){"opacity"===t.propertyName&&"0"===this.style.opacity&&("function"==typeof r.onClose&&r.onClose(this),this.parentElement.removeChild(this),e.current===this&&(e.current=null))}.bind(e.snackbar)),e.current=e.snackbar,document.body.appendChild(e.snackbar);getComputedStyle(e.snackbar).bottom,getComputedStyle(e.snackbar).top;e.snackbar.style.opacity=1,e.snackbar.className="snackbar-container "+r.customClass+" snackbar-pos "+r.pos},e.close=function(){e.current&&(e.current.style.opacity=0)};var n=function(){var e={},t=!1,o=0,r=arguments.length;"[object Boolean]"===Object.prototype.toString.call(arguments[0])&&(t=arguments[0],o++);for(var a=function(o){for(var r in o)Object.prototype.hasOwnProperty.call(o,r)&&(t&&"[object Object]"===Object.prototype.toString.call(o[r])?e[r]=n(!0,e[r],o[r]):e[r]=o[r])};o<r;o++){var i=arguments[o];a(i)}return e};return e}()}.apply(t,[]))||(e.exports=o)}(this)},"b/UH":function(e,t,n){"use strict";function o(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var n=[],o=!0,r=!1,a=void 0;try{for(var i,l=e[Symbol.iterator]();!(o=(i=l.next()).done)&&(n.push(i.value),!t||n.length!==t);o=!0);}catch(e){r=!0,a=e}finally{try{o||null==l.return||l.return()}finally{if(r)throw a}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}n.r(t);n("TJhI");function r(e){console.log(e),alert("Error: "+function(e){var t;return e.response?(e.response.data.message&&(t=e.response.data.message),e.response.data.errors?t+="\n"+Object.entries(e.response.data.errors).map((function(e){var t=o(e,2);t[0];return t[1].join(". ")})):e.response.data.error&&(t=e.response.data.error)):t=e,t}(e))}var a=null;$(document).ready((function(){var e=$("#calendar"),t=$("#eventModal"),n=$("#resourceModal"),o=$("#event_editor_title"),i=$("#event_editor_description"),l=$("#event_editor_date_start"),c=$("#event_editor_date_end"),s=$("#event_editor_resource_id"),u=$("#event_editor_delete"),d=t.find('button[type="submit"]'),f=$("#event_editor_credits"),m=$("#resource_editor_title"),p=$("#resource_editor_group"),v=$("#resource_editor_color"),h=$("#resource_editor_delete"),b=n.find('button[type="submit"]');function y(e,t,n){axios.patch(e.updateDateUrl,{start:e.start.format(),end:e.end?e.end.format():null,resourceId:e.resourceId}).catch((function(e){r(e),n()}))}function x(e){var t="00:00:00"==e.format("HH:mm:ss");return e.format(t?"LL":"LLL")}function g(e,t){if(e.isSame(t,"day"))return" - "+t.format("LT");var n="00:00:00"==e.format("HH:mm:ss"),o="00:00:00"==t.format("HH:mm:ss");if(n&&o){var r=t.clone().subtract(1,"day");return e.isSame(r,"day")?"":" - "+r.format("LL")}return" - "+t.format("LLL")}function C(t,n){var o=e.fullCalendar("getResources");s.empty();var r={};$.each(o,(function(e,t){s.append($("<option>",{value:t.id,text:t.title})),r[t.id]=t.eventColor})),s.val(t).change().prop("disabled",n);var a=function(){var e=r[s.val()];s.siblings().find("label").css("color",e||"inherit")};s.off("change").on("change",a),a()}t.on("shown.bs.modal",(function(e){o.focus()})),n.on("shown.bs.modal",(function(e){m.focus()})),e.fullCalendar({themeSystem:"bootstrap4",height:"auto",locale:locale,slotLabelFormat:"H:mm",minTime:"08:00",header:{left:manageResourcesAllowed?"prev,next today promptResource":"prev,next today",center:"title",right:"agendaDay,agendaWeek,month,listWeek,timelineDay"},customButtons:{promptResource:{text:"+ Resource",click:function(){n.find(".modal-title").text("Create Resource"),m.val(""),p.val(a||""),v.val(function(){for(var e="#",t=0;t<6;t++)e+="0123456789ABCDEF"[Math.floor(16*Math.random())];return e}()),h.hide(),b.show(),n.parent("form").off().on("submit",(function(){axios.post(storeResourceUrl,{title:m.val(),group:p.val(),color:v.val()}).then((function(t){a=p.val(),n.modal("hide"),e.fullCalendar("addResource",t.data,!0)})).catch(r)})),n.modal("show"),m.focus()}}},resourceLabelText:"Resources",resourceRender:function(t,o){manageResourcesAllowed&&o.on("click",(function(){!function(t){n.find(".modal-title").text("Edit Resource"),m.val(t.title),p.val(t.group),v.val(t.eventColor),h.show(),b.show(),n.parent("form").off().on("submit",(function(){axios.put(t.url,{title:m.val(),group:p.val(),color:v.val()}).then((function(){n.modal("hide"),e.fullCalendar("refetchResources")})).catch(r)})),h.off().on("click",(function(){confirm("Are you sure you want to delete thre resource '"+t.title+"'?")&&axios.delete(t.url).then((function(){n.modal("hide"),e.fullCalendar("removeResource",t)})).catch(r)})),n.modal("show"),m.focus()}(t)}))},views:{agendaDay:{buttonText:"Day"},agendaWeek:{buttonText:"Week"},month:{buttonText:"Month"},listWeek:{buttonText:"List"},timelineDay:{buttonText:"Timeline"}},defaultView:localStorage.getItem("calendar-view-name")?localStorage.getItem("calendar-view-name"):"agendaWeek",viewRender:function(e,t){localStorage.setItem("calendar-view-name",e.name)},firstDay:1,weekends:!0,weekNumbers:!0,weekNumbersWithinDays:!0,businessHours:{dow:[1,2,3,4,5,6],start:"10:00",end:"19:00"},navLinks:!0,eventLimit:!0,events:listEventsUrl,editable:!1,eventDrop:y,eventResize:y,selectable:createEventAllowed,selectHelper:!1,select:function(n,a,m,p,v){var h=e.fullCalendar("getResources");if(0==h.length)return alert("Please add a resource first before creating an event!"),void e.fullCalendar("unselect");t.find(".modal-title").text("Create Event"),l.text(x(n)),c.text(g(n,a)),o.val("").prop("readonly",!1),i.val("").prop("readonly",!1),C(v?v.id:h[0].id,!1),u.hide(),d.show(),f.hide(),t.on("hide.bs.modal",(function(t){e.fullCalendar("unselect")})),t.parent("form").off().on("submit",(function(){axios.post(storeEventUrl,{title:o.val(),description:i.val(),resourceId:s.val(),start:n.format(),end:a?a.format():null}).then((function(n){t.modal("hide"),e.fullCalendar("renderEvent",n.data,!0)})).catch(r)})),t.modal("show"),o.focus()},unselectAuto:!1,eventClick:function(n,a,m){if(!n.editable)return function(e){t.find(".modal-title").text("View Event"),l.text(x(e.start)),c.text(g(e.start,e.end)),o.val(e.title).prop("readonly",!0),i.val(e.description).prop("readonly",!0),C(e.resourceId,!0),u.hide(),d.hide(),e.user.id!=currentUserId?(f.find('[rel="author"]').text(e.user.name),f.show()):f.hide();return t.modal("show"),!1}(n);t.find(".modal-title").text("Edit Event"),l.text(x(n.start)),c.text(g(n.start,n.end)),o.val(n.title).prop("readonly",!1),i.val(n.description).prop("readonly",!1),C(n.resourceId,!1),u.show(),d.show(),n.user.id!=currentUserId?(f.find('[rel="author"]').text(n.user.name),f.show()):f.hide();return t.parent("form").off().on("submit",(function(){axios.put(n.url,{title:o.val(),description:i.val(),resourceId:s.val()}).then((function(){t.modal("hide"),n.title=o.val(),n.description=i.val(),n.resourceId=s.val(),e.fullCalendar("updateEvent",n)})).catch(r)})),u.off().on("click",(function(){confirm("Really delete event '"+n.title+"'?")&&axios.delete(n.url).then((function(){t.modal("hide"),e.fullCalendar("removeEvents",n.id)})).catch(r)})),t.modal("show"),o.select(),!1},schedulerLicenseKey:"CC-Attribution-NonCommercial-NoDerivatives",resources:listResourcesUrl,resourceOrder:"title",resourceGroupField:"group"})}))}});
//# sourceMappingURL=calendar.js.map