!function(e){var t={};function r(o){if(t[o])return t[o].exports;var n=t[o]={i:o,l:!1,exports:{}};return e[o].call(n.exports,n,n.exports,r),n.l=!0,n.exports}r.m=e,r.c=t,r.d=function(e,t,o){r.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:o})},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="/",r(r.s=246)}({246:function(e,t,r){e.exports=r(247)},247:function(e,t){var r=null;$(document).ready(function(){var e=$("#calendar"),t=$("#eventModal"),o=$("#resourceModal"),n=$("#event_editor_title"),a=$("#event_editor_description"),s=$("#event_editor_date_start"),l=$("#event_editor_date_end"),i=$("#event_editor_resource_id"),d=$("#event_editor_delete"),u=t.find('button[type="submit"]'),c=$("#event_editor_credits"),f=$("#resource_editor_title"),m=$("#resource_editor_group"),v=$("#resource_editor_color"),p=$("#resource_editor_delete"),h=o.find('button[type="submit"]');function g(e,t,r){$.ajax(e.updateDateUrl,{method:"PUT",data:{_token:csrfToken,start:e.start.format(),end:e.end?e.end.format():null,resourceId:e.resourceId}}).fail(function(e,t){alert("Error: "+(e.responseJSON.message?e.responseJSON.message:e.responseText)),r()})}function x(e){var t="00:00:00"==e.format("HH:mm:ss");return e.format(t?"LL":"LLL")}function _(e,t){if(e.isSame(t,"day"))return" - "+t.format("LT");var r="00:00:00"==e.format("HH:mm:ss"),o="00:00:00"==t.format("HH:mm:ss");if(r&&o){var n=t.clone().subtract(1,"day");return e.isSame(n,"day")?"":" - "+n.format("LL")}return" - "+t.format("LLL")}function b(t,r){var o=e.fullCalendar("getResources");i.empty();var n={};$.each(o,function(e,t){i.append($("<option>",{value:t.id,text:t.title})),n[t.id]=t.eventColor}),i.val(t).change().prop("disabled",r);var a=function(){var e=n[i.val()];i.siblings().find("label").css("color",e||"inherit")};i.off("change").on("change",a),a()}e.fullCalendar({themeSystem:"bootstrap4",height:"auto",locale:locale,slotLabelFormat:"H:mm",minTime:"08:00",header:{left:manageResourcesAllowed?"prev,next today promptResource":"prev,next today",center:"title",right:"agendaDay,agendaWeek,month,listWeek,timelineDay"},customButtons:{promptResource:{text:"+ Resource",click:function(){o.find(".modal-title").text("Create Resource"),f.val(""),m.val(r||""),v.val(function(){for(var e="#",t=0;t<6;t++)e+="0123456789ABCDEF"[Math.floor(16*Math.random())];return e}()),p.hide(),h.show(),o.parent("form").off().on("submit",function(){$.ajax(storeResourceUrl,{method:"POST",data:{_token:csrfToken,title:f.val(),group:m.val(),color:v.val()}}).done(function(t){r=m.val(),o.modal("hide"),e.fullCalendar("addResource",t,!0)}).fail(function(e,t){alert("Error: "+(e.responseJSON.message?e.responseJSON.message:e.responseText))})}),o.modal("show"),f.focus()}}},resourceLabelText:"Resources",resourceRender:function(t,r){manageResourcesAllowed&&r.on("click",function(){!function(t){o.find(".modal-title").text("Edit Resource"),f.val(t.title),m.val(t.group),v.val(t.eventColor),p.show(),h.show(),o.parent("form").off().on("submit",function(){$.ajax(t.url,{method:"PUT",data:{_token:csrfToken,title:f.val(),group:m.val(),color:v.val()}}).done(function(){o.modal("hide"),e.fullCalendar("refetchResources")}).fail(function(e,t){alert("Error: "+(e.responseJSON.message?e.responseJSON.message:e.responseText))})}),p.off().on("click",function(){confirm("Are you sure you want to delete thre resource '"+t.title+"'?")&&$.ajax(t.url,{method:"DELETE",data:{_token:csrfToken}}).done(function(){o.modal("hide"),e.fullCalendar("removeResource",t)}).fail(function(e,t){alert("Error: "+(e.responseJSON.message?e.responseJSON.message:e.responseText))})}),o.modal("show"),f.focus()}(t)})},views:{agendaDay:{buttonText:"Day"},agendaWeek:{buttonText:"Week"},month:{buttonText:"Month"},listWeek:{buttonText:"List"},timelineDay:{buttonText:"Timeline"}},defaultView:localStorage.getItem("calendar-view-name")?localStorage.getItem("calendar-view-name"):"agendaWeek",viewRender:function(e,t){localStorage.setItem("calendar-view-name",e.name)},firstDay:1,weekends:!0,weekNumbers:!0,weekNumbersWithinDays:!0,businessHours:{dow:[1,2,3,4,5,6],start:"10:00",end:"19:00"},navLinks:!0,eventLimit:!0,events:listEventsUrl,editable:!1,eventDrop:g,eventResize:g,selectable:createEventAllowed,selectHelper:!1,select:function(r,o,f,m,v){var p=e.fullCalendar("getResources");if(0==p.length)return alert("Please add a resource first before creating an event!"),void e.fullCalendar("unselect");t.find(".modal-title").text("Create Event"),s.text(x(r)),l.text(_(r,o)),n.val("").prop("readonly",!1),a.val("").prop("readonly",!1),b(v?v.id:p[0].id,!1),d.hide(),u.show(),c.hide(),t.on("hide.bs.modal",function(t){e.fullCalendar("unselect")}),t.parent("form").off().on("submit",function(){$.ajax(storeEventUrl,{method:"POST",data:{_token:csrfToken,title:n.val(),description:a.val(),resourceId:i.val(),start:r.format(),end:o?o.format():null}}).done(function(r){t.modal("hide"),e.fullCalendar("renderEvent",r,!0)}).fail(function(e,t){alert("Error: "+(e.responseJSON.message?e.responseJSON.message:e.responseText))})}),t.modal("show"),n.focus()},unselectAuto:!1,eventClick:function(r,o,f){if(!r.editable)return function(e){t.find(".modal-title").text("View Event"),s.text(x(e.start)),l.text(_(e.start,e.end)),n.val(e.title).prop("readonly",!0),a.val(e.description).prop("readonly",!0),b(e.resourceId,!0),d.hide(),u.hide(),e.user.id!=currentUserId?(c.find('[rel="author"]').text(e.user.name),c.show()):c.hide();return t.modal("show"),!1}(r);t.find(".modal-title").text("Edit Event"),s.text(x(r.start)),l.text(_(r.start,r.end)),n.val(r.title).prop("readonly",!1),a.val(r.description).prop("readonly",!1),b(r.resourceId,!1),d.show(),u.show(),r.user.id!=currentUserId?(c.find('[rel="author"]').text(r.user.name),c.show()):c.hide();return t.parent("form").off().on("submit",function(){$.ajax(r.url,{method:"PUT",data:{_token:csrfToken,title:n.val(),description:a.val(),resourceId:i.val()}}).done(function(){t.modal("hide"),r.title=n.val(),r.description=a.val(),r.resourceId=i.val(),e.fullCalendar("updateEvent",r)}).fail(function(e,t){alert("Error: "+(e.responseJSON.message?e.responseJSON.message:e.responseText))})}),d.off().on("click",function(){confirm("Really delete event '"+r.title+"'?")&&$.ajax(r.url,{method:"DELETE",data:{_token:csrfToken}}).done(function(){t.modal("hide"),e.fullCalendar("removeEvents",r.id)}).fail(function(e,t){alert("Error: "+(e.responseJSON.message?e.responseJSON.message:e.responseText))})}),t.modal("show"),n.select(),!1},schedulerLicenseKey:"CC-Attribution-NonCommercial-NoDerivatives",resources:listResourcesUrl,resourceOrder:"title",resourceGroupField:"group"})})}});