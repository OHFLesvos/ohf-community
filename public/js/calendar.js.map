{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./resources/assets/js/calendar.js"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","lastResourceGroup","$","document","ready","calendar","modal","resourceModal","titleElem","descriptionElem","dateStartElem","dateEndElem","resourceIdInputElem","deleteButton","submitButton","find","creditsElement","resourceTitleElem","resourceGroupElem","resourceColorElem","resourceDeleteButton","resourceSubmitButton","updateEventDate","calEvent","delta","revertFunc","ajax","updateDateUrl","method","data","_token","csrfToken","start","format","end","resourceId","fail","jqXHR","textStatus","alert","responseJSON","message","responseText","getDateStartLabel","isMidNight","getDateEndLabel","isSame","startIsMidNight","endIsMidNight","newEnd","clone","subtract","updateResourceIdSelect","disabled","resources","fullCalendar","empty","resourceColors","each","item","append","id","text","title","eventColor","val","change","prop","setresourceIdInputElemColor","color","siblings","css","off","on","e","focus","themeSystem","height","locale","slotLabelFormat","minTime","header","left","manageResourcesAllowed","center","right","customButtons","promptResource","click","Math","floor","random","getRandomColor","hide","show","parent","storeResourceUrl","group","done","resourceData","resourceLabelText","resourceRender","resource","cellEls","url","confirm","editResource","views","agendaDay","buttonText","agendaWeek","month","listWeek","timelineDay","defaultView","localStorage","getItem","viewRender","view","element","setItem","firstDay","weekends","weekNumbers","weekNumbersWithinDays","businessHours","dow","navLinks","eventLimit","events","listEventsUrl","editable","eventDrop","eventResize","selectable","createEventAllowed","selectHelper","select","jsEvent","length","storeEventUrl","description","eventData","unselectAuto","eventClick","user","currentUserId","showEvent","schedulerLicenseKey","listResourcesUrl","resourceOrder","resourceGroupField"],"mappings":"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","file":"/js/calendar.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 237);\n","//\r\n// Calendar\r\n//\r\n\r\n// import 'moment';\r\n// import $ from 'jquery';\r\n// import 'fullcalendar';\r\n// import 'fullcalendar-scheduler';\r\n\r\nvar lastResourceGroup = null;\r\n\r\n$(document).ready(function() {\r\n\r\n    var calendar = $('#calendar');\r\n    var modal = $('#eventModal');\r\n    var resourceModal = $('#resourceModal');\r\n\r\n    // Elements\r\n    var titleElem = $('#event_editor_title');\r\n    var descriptionElem = $('#event_editor_description');\r\n    var dateStartElem = $('#event_editor_date_start');\r\n    var dateEndElem = $('#event_editor_date_end');\r\n    var resourceIdInputElem = $('#event_editor_resource_id');\r\n    var deleteButton = $('#event_editor_delete');\r\n    var submitButton = modal.find('button[type=\"submit\"]');\r\n    var creditsElement =  $('#event_editor_credits');\r\n\r\n    var resourceTitleElem = $('#resource_editor_title');\r\n    var resourceGroupElem = $('#resource_editor_group');\r\n    var resourceColorElem = $('#resource_editor_color');\r\n    var resourceDeleteButton = $('#resource_editor_delete');\r\n    var resourceSubmitButton = resourceModal.find('button[type=\"submit\"]');\r\n\r\n    modal.on('shown.bs.modal', function (e) {\r\n        titleElem.focus();\r\n    });\r\n\r\n    resourceModal.on('shown.bs.modal', function (e) {\r\n        resourceTitleElem.focus();\r\n    });\r\n\r\n    // Initialite the calendar\r\n    calendar.fullCalendar({\r\n        themeSystem: 'bootstrap4',\r\n        height: \"auto\",\r\n        locale: locale,\r\n        slotLabelFormat: 'H:mm',\r\n        minTime: '08:00', // TODO  scrollTime: '08:00',\r\n        header: {\r\n            left: manageResourcesAllowed ? 'prev,next today promptResource' : 'prev,next today',\r\n            center: 'title',\r\n            right: 'agendaDay,agendaWeek,month,listWeek,timelineDay'\r\n        },\r\n        customButtons: {\r\n            promptResource: {\r\n                text: '+ Resource',\r\n                click: createResource,\r\n            }\r\n        },\r\n        resourceLabelText: 'Resources',\r\n        resourceRender: function(resource, cellEls) {\r\n            if (manageResourcesAllowed) {\r\n                cellEls.on('click', function() {\r\n                    editResource(resource);\r\n                });\r\n            }\r\n        },\r\n        views: {\r\n            agendaDay: {\r\n                buttonText: 'Day'\r\n            },\r\n            agendaWeek: {\r\n                buttonText: 'Week'\r\n            },\r\n            month: {\r\n                buttonText: 'Month'\r\n            },\r\n            listWeek: {\r\n                buttonText: 'List'\r\n            },\r\n            timelineDay: {\r\n                buttonText: 'Timeline'\r\n            }\r\n        },\r\n        defaultView: localStorage.getItem('calendar-view-name') ? localStorage.getItem('calendar-view-name') : 'agendaWeek',\r\n        viewRender: function(view, element){\r\n            localStorage.setItem('calendar-view-name', view.name)\r\n        },\r\n        firstDay: 1,\r\n        weekends: true,\r\n        weekNumbers: true,\r\n        weekNumbersWithinDays: true,\r\n        businessHours: {\r\n            dow: [ 1, 2, 3, 4, 5, 6 ],\r\n            start: '10:00',\r\n            end: '19:00',\r\n        },      \r\n        navLinks: true,\r\n        eventLimit: true,\r\n        events: listEventsUrl,\r\n        editable: false,\r\n        eventDrop: updateEventDate,\r\n        eventResize: updateEventDate,\r\n        selectable: createEventAllowed,\r\n        selectHelper: false,\r\n        select: createEvent,\r\n        unselectAuto: false,\r\n        eventClick: editEvent,\r\n        schedulerLicenseKey: 'CC-Attribution-NonCommercial-NoDerivatives',\r\n        resources: listResourcesUrl,\r\n        resourceOrder: 'title',\r\n        //eventOverlap: false, // TODO\r\n        resourceGroupField: 'group',\r\n    });\r\n\r\n    /**\r\n    * Create a new resource using modal dialog\r\n    */\r\n    function createResource() {\r\n        // Prepare modal dialog\r\n        resourceModal.find('.modal-title').text('Create Resource');\r\n\r\n        resourceTitleElem.val('');\r\n        resourceGroupElem.val(lastResourceGroup ? lastResourceGroup : '');\r\n        resourceColorElem.val(getRandomColor());\r\n\r\n        resourceDeleteButton.hide();\r\n        resourceSubmitButton.show();\r\n\r\n        // Action on submit: Store resource\r\n        resourceModal.parent('form').off().on('submit', function(){\r\n            $.ajax(storeResourceUrl, {\r\n                method: 'POST',\r\n                data: {\r\n                    _token: csrfToken,\r\n                    title: resourceTitleElem.val(),\r\n                    group: resourceGroupElem.val(),\r\n                    color: resourceColorElem.val(),\r\n                }\r\n            })\r\n            .done(function(resourceData) {\r\n                lastResourceGroup = resourceGroupElem.val();\r\n                resourceModal.modal('hide');\r\n                calendar.fullCalendar('addResource', resourceData, true);\r\n            })\r\n            .fail(function(jqXHR, textStatus) {\r\n                alert('Error: ' + (jqXHR.responseJSON.message ? jqXHR.responseJSON.message : jqXHR.responseText));\r\n            });\r\n        });\r\n\r\n        // Show modal\r\n        resourceModal.modal('show');\r\n\r\n        // Focus title input\r\n        resourceTitleElem.focus();\r\n    }\r\n\r\n    /**\r\n    * Edit a resource using modal dialog\r\n    */\r\n    function editResource(resource) {\r\n        // Prepare modal dialog\r\n        resourceModal.find('.modal-title').text('Edit Resource');\r\n\r\n        resourceTitleElem.val(resource.title);\r\n        resourceGroupElem.val(resource.group);\r\n        resourceColorElem.val(resource.eventColor);\r\n\r\n        resourceDeleteButton.show();\r\n        resourceSubmitButton.show();\r\n\r\n        // Action on submit: Update resource\r\n        resourceModal.parent('form').off().on('submit', function(){\r\n            $.ajax(resource.url, {\r\n                method: 'PUT',\r\n                data: {\r\n                    _token: csrfToken,\r\n                    title: resourceTitleElem.val(),\r\n                    group: resourceGroupElem.val(),\r\n                    color: resourceColorElem.val(),\r\n                }\r\n            })\r\n            .done(function() {\r\n                resourceModal.modal('hide');\r\n                calendar.fullCalendar('refetchResources');\r\n            })\r\n            .fail(function(jqXHR, textStatus) {\r\n                alert('Error: ' + (jqXHR.responseJSON.message ? jqXHR.responseJSON.message : jqXHR.responseText));\r\n            });\r\n        });\r\n\r\n        // Action on delete button click: Delete event\r\n        resourceDeleteButton.off().on('click', function(){\r\n            if (confirm('Are you sure you want to delete thre resource \\'' + resource.title + '\\'?')) {\r\n                $.ajax(resource.url, {\r\n                    method: 'DELETE',\r\n                    data: {\r\n                        _token: csrfToken,\r\n                    },\r\n                })\r\n                .done(function() {\r\n                    resourceModal.modal('hide');\r\n                    calendar.fullCalendar('removeResource', resource);\r\n                })\r\n                .fail(function(jqXHR, textStatus) {\r\n                    alert('Error: ' + (jqXHR.responseJSON.message ? jqXHR.responseJSON.message : jqXHR.responseText));\r\n                });\r\n            }\r\n        });\r\n\r\n        // Show modal\r\n        resourceModal.modal('show');\r\n\r\n        // Focus title input\r\n        resourceTitleElem.focus();\r\n    }\r\n\r\n    /**\r\n    * Create a new event using modal dialog\r\n    */\r\n    function createEvent(start, end, jsEvent, view, resource) {\r\n        var resources = calendar.fullCalendar('getResources');\r\n        if (resources.length == 0) {\r\n            alert('Please add a resource first before creating an event!');\r\n            calendar.fullCalendar('unselect');\r\n            return;\r\n        }\r\n\r\n        // Prepare modal dialog\r\n        modal.find('.modal-title').text('Create Event');\r\n        dateStartElem.text(getDateStartLabel(start));\r\n        dateEndElem.text(getDateEndLabel(start, end));\r\n        titleElem.val('').prop(\"readonly\", false);\r\n        descriptionElem.val('').prop(\"readonly\", false);\r\n        updateResourceIdSelect(resource ? resource.id : resources[0].id, false);\r\n        deleteButton.hide();\r\n        submitButton.show();\r\n        creditsElement.hide();\r\n\r\n        // Action on cancel: Hide modal dialog\r\n        modal.on('hide.bs.modal', function (e) {\r\n            calendar.fullCalendar('unselect');\r\n        });\r\n\r\n        // Action on submit: Store event\r\n        modal.parent('form').off().on('submit', function(){\r\n            $.ajax(storeEventUrl, {\r\n                method: 'POST',\r\n                data: {\r\n                    _token: csrfToken,\r\n                    title: titleElem.val(),\r\n                    description: descriptionElem.val(),\r\n                    resourceId: resourceIdInputElem.val(),\r\n                    start: start.format(),\r\n                    end: end ? end.format() : null,\r\n                }\r\n            })\r\n            .done(function(eventData) {\r\n                modal.modal('hide');\r\n                calendar.fullCalendar('renderEvent', eventData, true);\r\n            })\r\n            .fail(function(jqXHR, textStatus) {\r\n                alert('Error: ' + (jqXHR.responseJSON.message ? jqXHR.responseJSON.message : jqXHR.responseText));\r\n            });\r\n        });\r\n\r\n        // Show modal\r\n        modal.modal('show');\r\n\r\n        // Focus title input\r\n        titleElem.focus();\r\n    }\r\n\r\n    /**\r\n    * Edit a new event using modal dialog\r\n    */\r\n    function showEvent(calEvent) {\r\n        // Prepare dialog\r\n        modal.find('.modal-title').text('View Event');\r\n        dateStartElem.text(getDateStartLabel(calEvent.start));\r\n        dateEndElem.text(getDateEndLabel(calEvent.start, calEvent.end));\r\n        titleElem.val(calEvent.title).prop(\"readonly\", true);\r\n        descriptionElem.val(calEvent.description).prop(\"readonly\", true);\r\n        updateResourceIdSelect(calEvent.resourceId, true);\r\n\r\n        deleteButton.hide();\r\n        submitButton.hide();\r\n        if (calEvent.user.id != currentUserId ) {\r\n            creditsElement.find('[rel=\"author\"]').text(calEvent.user.name);\r\n            creditsElement.show();\r\n        } else {\r\n            creditsElement.hide();\r\n        }\r\n\r\n        // Show modal\r\n        modal.modal('show');\r\n\r\n        // Return false so default behaviour (navigate to event URL) is supressed\r\n        return false;\r\n    }\r\n\r\n    /**\r\n    * Edit a new event using modal dialog\r\n    */\r\n    function editEvent(calEvent, jsEvent, view) {\r\n        if (!calEvent.editable) {\r\n            return showEvent(calEvent);\r\n        }\r\n\r\n        // Prepare dialog\r\n        modal.find('.modal-title').text('Edit Event');\r\n        dateStartElem.text(getDateStartLabel(calEvent.start));\r\n        dateEndElem.text(getDateEndLabel(calEvent.start, calEvent.end));\r\n        titleElem.val(calEvent.title).prop(\"readonly\", false);\r\n        descriptionElem.val(calEvent.description).prop(\"readonly\", false);\r\n        updateResourceIdSelect(calEvent.resourceId, false);\r\n        deleteButton.show();\r\n        submitButton.show();\r\n        if (calEvent.user.id != currentUserId ) {\r\n            creditsElement.find('[rel=\"author\"]').text(calEvent.user.name);\r\n            creditsElement.show();\r\n        } else {\r\n            creditsElement.hide();\r\n        }\r\n\r\n        // Action on form submit: Update event\r\n        modal.parent('form').off().on('submit', function(){\r\n            $.ajax(calEvent.url, {\r\n                method: 'PUT',\r\n                data: {\r\n                    _token: csrfToken,\r\n                    title: titleElem.val(),\r\n                    description: descriptionElem.val(),\r\n                    resourceId: resourceIdInputElem.val(),\r\n                }\r\n            })\r\n            .done(function() {\r\n                modal.modal('hide');\r\n                calEvent.title = titleElem.val();\r\n                calEvent.description = descriptionElem.val();\r\n                calEvent.resourceId = resourceIdInputElem.val();\r\n                calendar.fullCalendar('updateEvent', calEvent);\r\n            })\r\n            .fail(function(jqXHR, textStatus) {\r\n                alert('Error: ' + (jqXHR.responseJSON.message ? jqXHR.responseJSON.message : jqXHR.responseText));\r\n            });\r\n        });\r\n\r\n        // Action on delete button click: Delete event\r\n        deleteButton.off().on('click', function(){\r\n            if (confirm('Really delete event \\'' + calEvent.title + '\\'?')) {\r\n                $.ajax(calEvent.url, {\r\n                    method: 'DELETE',\r\n                    data: {\r\n                        _token: csrfToken,\r\n                    },\r\n                })\r\n                .done(function() {\r\n                    modal.modal('hide');\r\n                    calendar.fullCalendar('removeEvents', calEvent.id);\r\n                })\r\n                .fail(function(jqXHR, textStatus) {\r\n                    alert('Error: ' + (jqXHR.responseJSON.message ? jqXHR.responseJSON.message : jqXHR.responseText));\r\n                });\r\n            }\r\n        });\r\n\r\n        // Show modal\r\n        modal.modal('show');\r\n\r\n        // Select title\r\n        titleElem.select();\r\n\r\n        // Return false so default behaviour (navigate to event URL) is supressed\r\n        return false;\r\n    }\r\n\r\n    /**\r\n    * Updates an event after dragging / resizing\r\n    */\r\n    function updateEventDate(calEvent, delta, revertFunc) {\r\n        $.ajax(calEvent.updateDateUrl, {\r\n            method: 'PUT',\r\n            data : {\r\n                _token: csrfToken,\r\n                start: calEvent.start.format(),\r\n                end: calEvent.end ? calEvent.end.format() : null,\r\n                resourceId: calEvent.resourceId,\r\n            }\r\n        })\r\n        .fail(function(jqXHR, textStatus) {\r\n            alert('Error: ' + (jqXHR.responseJSON.message ? jqXHR.responseJSON.message : jqXHR.responseText));\r\n            revertFunc();\r\n        });\r\n    }\r\n\r\n    /**\r\n    * Creates a label text for the start date\r\n    */\r\n    function getDateStartLabel(start) {\r\n        var isMidNight = start.format('HH:mm:ss') == '00:00:00';\r\n        return start.format(isMidNight ? 'LL' : 'LLL'); // LL: Date, LLL: Date with time\r\n    }\r\n\r\n    /**\r\n    * Creates a label text for the end date\r\n    */\r\n    function getDateEndLabel(start, end) {\r\n        var prefix = ' - ';\r\n        if (start.isSame(end, 'day')) {\r\n            return prefix + end.format('LT'); // LT: Time\r\n        }\r\n        var startIsMidNight = start.format('HH:mm:ss') == '00:00:00';\r\n        var endIsMidNight = end.format('HH:mm:ss') == '00:00:00';\r\n        if (startIsMidNight && endIsMidNight) {\r\n            var newEnd = end.clone().subtract(1, 'day');\r\n            return start.isSame(newEnd, 'day') ? '' : prefix + newEnd.format('LL');\r\n        }\r\n        return prefix + end.format('LLL');\r\n    }\r\n\r\n    function updateResourceIdSelect(resourceId, disabled) {\r\n        var resources = calendar.fullCalendar('getResources');\r\n        resourceIdInputElem.empty();\r\n        var resourceColors = {};\r\n        $.each(resources, function (i, item) {\r\n            resourceIdInputElem.append($('<option>', { \r\n                value: item.id,\r\n                text : item.title \r\n            }));\r\n            resourceColors[item.id] = item.eventColor;\r\n        });\r\n        //console.log(resourceColors);\r\n        resourceIdInputElem.val(resourceId).change().prop(\"disabled\", disabled);            \r\n\r\n        // Change color of the label next to the resource select\r\n        var setresourceIdInputElemColor = function() {\r\n            var color = resourceColors[resourceIdInputElem.val()];\r\n            resourceIdInputElem.siblings().find('label').css('color', color ? color : 'inherit');\r\n        }\r\n        resourceIdInputElem.off('change').on('change', setresourceIdInputElemColor)\r\n        setresourceIdInputElemColor();\r\n    }\r\n\r\n});\r\n\r\nfunction getRandomColor() {\r\n    var letters = '0123456789ABCDEF';\r\n    var color = '#';\r\n    for (var i = 0; i < 6; i++) {\r\n      color += letters[Math.floor(Math.random() * 16)];\r\n    }\r\n    return color;\r\n}"],"sourceRoot":""}