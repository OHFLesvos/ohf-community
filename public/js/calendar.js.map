{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./Resources/assets/js/app.js"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","lastResourceGroup","handleAjaxError","err","msg","response","data","message","errors","entries","map","join","error","alert","$","document","ready","calendar","modal","resourceModal","titleElem","descriptionElem","dateStartElem","dateEndElem","resourceIdInputElem","deleteButton","submitButton","find","creditsElement","resourceTitleElem","resourceGroupElem","resourceColorElem","resourceDeleteButton","resourceSubmitButton","updateEventDate","calEvent","delta","revertFunc","axios","patch","updateDateUrl","start","format","end","resourceId","getDateStartLabel","isMidNight","getDateEndLabel","isSame","startIsMidNight","endIsMidNight","newEnd","clone","subtract","updateResourceIdSelect","disabled","resources","fullCalendar","empty","resourceColors","each","item","append","id","text","title","eventColor","val","change","prop","setresourceIdInputElemColor","color","siblings","css","off","on","e","focus","themeSystem","height","locale","slotLabelFormat","minTime","header","left","manageResourcesAllowed","center","right","customButtons","promptResource","click","Math","floor","random","getRandomColor","hide","show","parent","post","storeResourceUrl","group","then","res","resourceLabelText","resourceRender","resource","cellEls","put","url","confirm","editResource","views","agendaDay","buttonText","agendaWeek","month","listWeek","timelineDay","defaultView","localStorage","getItem","viewRender","view","element","setItem","firstDay","weekends","weekNumbers","weekNumbersWithinDays","businessHours","dow","navLinks","eventLimit","events","listEventsUrl","editable","eventDrop","eventResize","selectable","createEventAllowed","selectHelper","select","jsEvent","length","storeEventUrl","description","unselectAuto","eventClick","user","currentUserId","showEvent","schedulerLicenseKey","listResourcesUrl","resourceOrder","resourceGroupField"],"mappings":"aACE,IAAIA,EAAmB,GAGvB,SAASC,EAAoBC,GAG5B,GAAGF,EAAiBE,GACnB,OAAOF,EAAiBE,GAAUC,QAGnC,IAAIC,EAASJ,EAAiBE,GAAY,CACzCG,EAAGH,EACHI,GAAG,EACHH,QAAS,IAUV,OANAI,EAAQL,GAAUM,KAAKJ,EAAOD,QAASC,EAAQA,EAAOD,QAASF,GAG/DG,EAAOE,GAAI,EAGJF,EAAOD,QAKfF,EAAoBQ,EAAIF,EAGxBN,EAAoBS,EAAIV,EAGxBC,EAAoBU,EAAI,SAASR,EAASS,EAAMC,GAC3CZ,EAAoBa,EAAEX,EAASS,IAClCG,OAAOC,eAAeb,EAASS,EAAM,CAAEK,YAAY,EAAMC,IAAKL,KAKhEZ,EAAoBkB,EAAI,SAAShB,GACX,oBAAXiB,QAA0BA,OAAOC,aAC1CN,OAAOC,eAAeb,EAASiB,OAAOC,YAAa,CAAEC,MAAO,WAE7DP,OAAOC,eAAeb,EAAS,aAAc,CAAEmB,OAAO,KAQvDrB,EAAoBsB,EAAI,SAASD,EAAOE,GAEvC,GADU,EAAPA,IAAUF,EAAQrB,EAAoBqB,IAC/B,EAAPE,EAAU,OAAOF,EACpB,GAAW,EAAPE,GAA8B,iBAAVF,GAAsBA,GAASA,EAAMG,WAAY,OAAOH,EAChF,IAAII,EAAKX,OAAOY,OAAO,MAGvB,GAFA1B,EAAoBkB,EAAEO,GACtBX,OAAOC,eAAeU,EAAI,UAAW,CAAET,YAAY,EAAMK,MAAOA,IACtD,EAAPE,GAA4B,iBAATF,EAAmB,IAAI,IAAIM,KAAON,EAAOrB,EAAoBU,EAAEe,EAAIE,EAAK,SAASA,GAAO,OAAON,EAAMM,IAAQC,KAAK,KAAMD,IAC9I,OAAOF,GAIRzB,EAAoB6B,EAAI,SAAS1B,GAChC,IAAIS,EAAST,GAAUA,EAAOqB,WAC7B,WAAwB,OAAOrB,EAAgB,SAC/C,WAA8B,OAAOA,GAEtC,OADAH,EAAoBU,EAAEE,EAAQ,IAAKA,GAC5BA,GAIRZ,EAAoBa,EAAI,SAASiB,EAAQC,GAAY,OAAOjB,OAAOkB,UAAUC,eAAe1B,KAAKuB,EAAQC,IAGzG/B,EAAoBkC,EAAI,IAIjBlC,EAAoBA,EAAoBmC,EAAI,G,mlBC9ErD,IAAIC,EAAoB,KAElBC,EAAkB,SAASC,GAC7B,IAAIC,EACAD,EAAIE,SAASC,KAAKC,UAClBH,EAAMD,EAAIE,SAASC,KAAKC,SAExBJ,EAAIE,SAASC,KAAKE,OAClBJ,GAAO,KAAOzB,OAAO8B,QAAQN,EAAIE,SAASC,KAAKE,QAAQE,KAAI,YAAY,kBACnE,OADmE,KAC1DC,KAAK,SAEXR,EAAIE,SAASC,KAAKM,QACzBR,EAAMD,EAAIE,SAASC,KAAKM,OAE5BC,MAAM,UAAYT,IAGtBU,EAAEC,UAAUC,OAAM,WAEd,IAAIC,EAAWH,EAAE,aACbI,EAAQJ,EAAE,eACVK,EAAgBL,EAAE,kBAGlBM,EAAYN,EAAE,uBACdO,EAAkBP,EAAE,6BACpBQ,EAAgBR,EAAE,4BAClBS,EAAcT,EAAE,0BAChBU,EAAsBV,EAAE,6BACxBW,EAAeX,EAAE,wBACjBY,EAAeR,EAAMS,KAAK,yBAC1BC,EAAkBd,EAAE,yBAEpBe,EAAoBf,EAAE,0BACtBgB,EAAoBhB,EAAE,0BACtBiB,EAAoBjB,EAAE,0BACtBkB,EAAuBlB,EAAE,2BACzBmB,EAAuBd,EAAcQ,KAAK,yBAuT9C,SAASO,EAAgBC,EAAUC,EAAOC,GACtCC,MAAMC,MAAMJ,EAASK,cAAe,CAC5BC,MAAON,EAASM,MAAMC,SACtBC,IAAKR,EAASQ,IAAMR,EAASQ,IAAID,SAAW,KAC5CE,WAAYT,EAASS,aAH7B,OAKW,SAACzC,GACJD,EAAgBC,GAChBkC,OAOZ,SAASQ,EAAkBJ,GACvB,IAAIK,EAAyC,YAA5BL,EAAMC,OAAO,YAC9B,OAAOD,EAAMC,OAAOI,EAAa,KAAO,OAM5C,SAASC,EAAgBN,EAAOE,GAE5B,GAAIF,EAAMO,OAAOL,EAAK,OAClB,MAFS,MAEOA,EAAID,OAAO,MAE/B,IAAIO,EAA8C,YAA5BR,EAAMC,OAAO,YAC/BQ,EAA0C,YAA1BP,EAAID,OAAO,YAC/B,GAAIO,GAAmBC,EAAe,CAClC,IAAIC,EAASR,EAAIS,QAAQC,SAAS,EAAG,OACrC,OAAOZ,EAAMO,OAAOG,EAAQ,OAAS,GAR5B,MAQ0CA,EAAOT,OAAO,MAErE,MAVa,MAUGC,EAAID,OAAO,OAG/B,SAASY,EAAuBV,EAAYW,GACxC,IAAIC,EAAYvC,EAASwC,aAAa,gBACtCjC,EAAoBkC,QACpB,IAAIC,EAAiB,GACrB7C,EAAE8C,KAAKJ,GAAW,SAAUvF,EAAG4F,GAC3BrC,EAAoBsC,OAAOhD,EAAE,WAAY,CACrC5B,MAAO2E,EAAKE,GACZC,KAAOH,EAAKI,SAEhBN,EAAeE,EAAKE,IAAMF,EAAKK,cAEnC1C,EAAoB2C,IAAIvB,GAAYwB,SAASC,KAAK,WAAYd,GAG9D,IAAIe,EAA8B,WAC9B,IAAIC,EAAQZ,EAAenC,EAAoB2C,OAC/C3C,EAAoBgD,WAAW7C,KAAK,SAAS8C,IAAI,QAASF,GAAgB,YAE9E/C,EAAoBkD,IAAI,UAAUC,GAAG,SAAUL,GAC/CA,IA7WJpD,EAAMyD,GAAG,kBAAkB,SAAUC,GACjCxD,EAAUyD,WAGd1D,EAAcwD,GAAG,kBAAkB,SAAUC,GACzC/C,EAAkBgD,WAItB5D,EAASwC,aAAa,CAClBqB,YAAa,aACbC,OAAQ,OACRC,OAAQA,OACRC,gBAAiB,OACjBC,QAAS,QACTC,OAAQ,CACJC,KAAMC,uBAAyB,iCAAmC,kBAClEC,OAAQ,QACRC,MAAO,mDAEXC,cAAe,CACXC,eAAgB,CACZzB,KAAM,aACN0B,MA8DZ,WAEIvE,EAAcQ,KAAK,gBAAgBqC,KAAK,mBAExCnC,EAAkBsC,IAAI,IACtBrC,EAAkBqC,IAAIlE,GAAwC,IAC9D8B,EAAkBoC,IAuR1B,WAGI,IAFA,IACII,EAAQ,IACHtG,EAAI,EAAGA,EAAI,EAAGA,IACrBsG,GAHY,mBAGKoB,KAAKC,MAAsB,GAAhBD,KAAKE,WAEnC,OAAOtB,EA7RmBuB,IAEtB9D,EAAqB+D,OACrB9D,EAAqB+D,OAGrB7E,EAAc8E,OAAO,QAAQvB,MAAMC,GAAG,UAAU,WAC5CrC,MAAM4D,KAAKC,iBAAkB,CACrBlC,MAAOpC,EAAkBsC,MACzBiC,MAAOtE,EAAkBqC,MACzBI,MAAOxC,EAAkBoC,QAE5BkC,MAAK,SAACC,GACHrG,EAAoB6B,EAAkBqC,MACtChD,EAAcD,MAAM,QACpBD,EAASwC,aAAa,cAAe6C,EAAIhG,MAAM,MARvD,MAUWJ,MAIfiB,EAAcD,MAAM,QAGpBW,EAAkBgD,WAzFlB0B,kBAAmB,YACnBC,eAAgB,SAASC,EAAUC,GAC3BrB,wBACAqB,EAAQ/B,GAAG,SAAS,YA4FhC,SAAsB8B,GAElBtF,EAAcQ,KAAK,gBAAgBqC,KAAK,iBAExCnC,EAAkBsC,IAAIsC,EAASxC,OAC/BnC,EAAkBqC,IAAIsC,EAASL,OAC/BrE,EAAkBoC,IAAIsC,EAASvC,YAE/BlC,EAAqBgE,OACrB/D,EAAqB+D,OAGrB7E,EAAc8E,OAAO,QAAQvB,MAAMC,GAAG,UAAU,WAC5CrC,MAAMqE,IAAIF,EAASG,IAAK,CAChB3C,MAAOpC,EAAkBsC,MACzBiC,MAAOtE,EAAkBqC,MACzBI,MAAOxC,EAAkBoC,QAE5BkC,MAAK,WACFlF,EAAcD,MAAM,QACpBD,EAASwC,aAAa,uBAP9B,MASWvD,MAIf8B,EAAqB0C,MAAMC,GAAG,SAAS,WAC/BkC,QAAQ,kDAAqDJ,EAASxC,MAAQ,OAC9E3B,MAAK,OAAQmE,EAASG,KACjBP,MAAK,WACFlF,EAAcD,MAAM,QACpBD,EAASwC,aAAa,iBAAkBgD,MAHhD,MAKWvG,MAKnBiB,EAAcD,MAAM,QAGpBW,EAAkBgD,QApINiC,CAAaL,OAIzBM,MAAO,CACHC,UAAW,CACPC,WAAY,OAEhBC,WAAY,CACRD,WAAY,QAEhBE,MAAO,CACHF,WAAY,SAEhBG,SAAU,CACNH,WAAY,QAEhBI,YAAa,CACTJ,WAAY,aAGpBK,YAAaC,aAAaC,QAAQ,sBAAwBD,aAAaC,QAAQ,sBAAwB,aACvGC,WAAY,SAASC,EAAMC,GACvBJ,aAAaK,QAAQ,qBAAsBF,EAAKlJ,OAEpDqJ,SAAU,EACVC,UAAU,EACVC,aAAa,EACbC,uBAAuB,EACvBC,cAAe,CACXC,IAAK,CAAE,EAAG,EAAG,EAAG,EAAG,EAAG,GACtBzF,MAAO,QACPE,IAAK,SAETwF,UAAU,EACVC,YAAY,EACZC,OAAQC,cACRC,UAAU,EACVC,UAAWtG,EACXuG,YAAavG,EACbwG,WAAYC,mBACZC,cAAc,EACdC,OAgGJ,SAAqBpG,EAAOE,EAAKmG,EAASpB,EAAMjB,GAC5C,IAAIjD,EAAYvC,EAASwC,aAAa,gBACtC,GAAwB,GAApBD,EAAUuF,OAGV,OAFAlI,MAAM,8DACNI,EAASwC,aAAa,YAK1BvC,EAAMS,KAAK,gBAAgBqC,KAAK,gBAChC1C,EAAc0C,KAAKnB,EAAkBJ,IACrClB,EAAYyC,KAAKjB,EAAgBN,EAAOE,IACxCvB,EAAU+C,IAAI,IAAIE,KAAK,YAAY,GACnChD,EAAgB8C,IAAI,IAAIE,KAAK,YAAY,GACzCf,EAAuBmD,EAAWA,EAAS1C,GAAKP,EAAU,GAAGO,IAAI,GACjEtC,EAAasE,OACbrE,EAAasE,OACbpE,EAAemE,OAGf7E,EAAMyD,GAAG,iBAAiB,SAAUC,GAChC3D,EAASwC,aAAa,eAI1BvC,EAAM+E,OAAO,QAAQvB,MAAMC,GAAG,UAAU,WACpCrC,MAAM4D,KAAK8C,cAAe,CAClB/E,MAAO7C,EAAU+C,MACjB8E,YAAa5H,EAAgB8C,MAC7BvB,WAAYpB,EAAoB2C,MAChC1B,MAAOA,EAAMC,SACbC,IAAKA,EAAMA,EAAID,SAAW,OAE7B2D,MAAK,SAACC,GACHpF,EAAMA,MAAM,QACZD,EAASwC,aAAa,cAAe6C,EAAIhG,MAAM,MATvD,MAWWJ,MAIfgB,EAAMA,MAAM,QAGZE,EAAUyD,SA3IVqE,cAAc,EACdC,WA4KJ,SAAmBhH,EAAU2G,EAASpB,GAClC,IAAKvF,EAASoG,SACV,OA9BR,SAAmBpG,GAEfjB,EAAMS,KAAK,gBAAgBqC,KAAK,cAChC1C,EAAc0C,KAAKnB,EAAkBV,EAASM,QAC9ClB,EAAYyC,KAAKjB,EAAgBZ,EAASM,MAAON,EAASQ,MAC1DvB,EAAU+C,IAAIhC,EAAS8B,OAAOI,KAAK,YAAY,GAC/ChD,EAAgB8C,IAAIhC,EAAS8G,aAAa5E,KAAK,YAAY,GAC3Df,EAAuBnB,EAASS,YAAY,GAE5CnB,EAAasE,OACbrE,EAAaqE,OACT5D,EAASiH,KAAKrF,IAAMsF,eACpBzH,EAAeD,KAAK,kBAAkBqC,KAAK7B,EAASiH,KAAK5K,MACzDoD,EAAeoE,QAEfpE,EAAemE,OAOnB,OAHA7E,EAAMA,MAAM,SAGL,EAQIoI,CAAUnH,GAIrBjB,EAAMS,KAAK,gBAAgBqC,KAAK,cAChC1C,EAAc0C,KAAKnB,EAAkBV,EAASM,QAC9ClB,EAAYyC,KAAKjB,EAAgBZ,EAASM,MAAON,EAASQ,MAC1DvB,EAAU+C,IAAIhC,EAAS8B,OAAOI,KAAK,YAAY,GAC/ChD,EAAgB8C,IAAIhC,EAAS8G,aAAa5E,KAAK,YAAY,GAC3Df,EAAuBnB,EAASS,YAAY,GAC5CnB,EAAauE,OACbtE,EAAasE,OACT7D,EAASiH,KAAKrF,IAAMsF,eACpBzH,EAAeD,KAAK,kBAAkBqC,KAAK7B,EAASiH,KAAK5K,MACzDoD,EAAeoE,QAEfpE,EAAemE,OAuCnB,OAnCA7E,EAAM+E,OAAO,QAAQvB,MAAMC,GAAG,UAAU,WACpCrC,MAAMqE,IAAIxE,EAASyE,IAAK,CAChB3C,MAAO7C,EAAU+C,MACjB8E,YAAa5H,EAAgB8C,MAC7BvB,WAAYpB,EAAoB2C,QAEnCkC,MAAK,WACFnF,EAAMA,MAAM,QACZiB,EAAS8B,MAAQ7C,EAAU+C,MAC3BhC,EAAS8G,YAAc5H,EAAgB8C,MACvChC,EAASS,WAAapB,EAAoB2C,MAC1ClD,EAASwC,aAAa,cAAetB,MAV7C,MAYWjC,MAIfuB,EAAaiD,MAAMC,GAAG,SAAS,WACvBkC,QAAQ,wBAA2B1E,EAAS8B,MAAQ,OACpD3B,MAAK,OAAQH,EAASyE,KACjBP,MAAK,WACFnF,EAAMA,MAAM,QACZD,EAASwC,aAAa,eAAgBtB,EAAS4B,OAHvD,MAKW7D,MAKnBgB,EAAMA,MAAM,QAGZE,EAAUyH,UAGH,GApOPU,oBAAqB,6CACrB/F,UAAWgG,iBACXC,cAAe,QAEfC,mBAAoB","file":"/js/calendar.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n","//\r\n// Calendar\r\n//\r\n\r\nvar lastResourceGroup = null;\r\n\r\nconst handleAjaxError = function(err){\r\n    var msg;\r\n    if (err.response.data.message) {\r\n        msg = err.response.data.message;\r\n    }\r\n    if (err.response.data.errors) {\r\n        msg += \"\\n\" + Object.entries(err.response.data.errors).map(([k, v]) => {\r\n            return v.join('. ');\r\n        });\r\n    } else if (err.response.data.error) {\r\n        msg = err.response.data.error;\r\n    }\r\n    alert('Error: ' + msg);\r\n}\r\n\r\n$(document).ready(function() {\r\n\r\n    var calendar = $('#calendar');\r\n    var modal = $('#eventModal');\r\n    var resourceModal = $('#resourceModal');\r\n\r\n    // Elements\r\n    var titleElem = $('#event_editor_title');\r\n    var descriptionElem = $('#event_editor_description');\r\n    var dateStartElem = $('#event_editor_date_start');\r\n    var dateEndElem = $('#event_editor_date_end');\r\n    var resourceIdInputElem = $('#event_editor_resource_id');\r\n    var deleteButton = $('#event_editor_delete');\r\n    var submitButton = modal.find('button[type=\"submit\"]');\r\n    var creditsElement =  $('#event_editor_credits');\r\n\r\n    var resourceTitleElem = $('#resource_editor_title');\r\n    var resourceGroupElem = $('#resource_editor_group');\r\n    var resourceColorElem = $('#resource_editor_color');\r\n    var resourceDeleteButton = $('#resource_editor_delete');\r\n    var resourceSubmitButton = resourceModal.find('button[type=\"submit\"]');\r\n\r\n    modal.on('shown.bs.modal', function (e) {\r\n        titleElem.focus();\r\n    });\r\n\r\n    resourceModal.on('shown.bs.modal', function (e) {\r\n        resourceTitleElem.focus();\r\n    });\r\n\r\n    // Initialite the calendar\r\n    calendar.fullCalendar({\r\n        themeSystem: 'bootstrap4',\r\n        height: \"auto\",\r\n        locale: locale,\r\n        slotLabelFormat: 'H:mm',\r\n        minTime: '08:00', // TODO  scrollTime: '08:00',\r\n        header: {\r\n            left: manageResourcesAllowed ? 'prev,next today promptResource' : 'prev,next today',\r\n            center: 'title',\r\n            right: 'agendaDay,agendaWeek,month,listWeek,timelineDay'\r\n        },\r\n        customButtons: {\r\n            promptResource: {\r\n                text: '+ Resource',\r\n                click: createResource,\r\n            }\r\n        },\r\n        resourceLabelText: 'Resources',\r\n        resourceRender: function(resource, cellEls) {\r\n            if (manageResourcesAllowed) {\r\n                cellEls.on('click', function() {\r\n                    editResource(resource);\r\n                });\r\n            }\r\n        },\r\n        views: {\r\n            agendaDay: {\r\n                buttonText: 'Day'\r\n            },\r\n            agendaWeek: {\r\n                buttonText: 'Week'\r\n            },\r\n            month: {\r\n                buttonText: 'Month'\r\n            },\r\n            listWeek: {\r\n                buttonText: 'List'\r\n            },\r\n            timelineDay: {\r\n                buttonText: 'Timeline'\r\n            }\r\n        },\r\n        defaultView: localStorage.getItem('calendar-view-name') ? localStorage.getItem('calendar-view-name') : 'agendaWeek',\r\n        viewRender: function(view, element){\r\n            localStorage.setItem('calendar-view-name', view.name)\r\n        },\r\n        firstDay: 1,\r\n        weekends: true,\r\n        weekNumbers: true,\r\n        weekNumbersWithinDays: true,\r\n        businessHours: {\r\n            dow: [ 1, 2, 3, 4, 5, 6 ],\r\n            start: '10:00',\r\n            end: '19:00',\r\n        },      \r\n        navLinks: true,\r\n        eventLimit: true,\r\n        events: listEventsUrl,\r\n        editable: false,\r\n        eventDrop: updateEventDate,\r\n        eventResize: updateEventDate,\r\n        selectable: createEventAllowed,\r\n        selectHelper: false,\r\n        select: createEvent,\r\n        unselectAuto: false,\r\n        eventClick: editEvent,\r\n        schedulerLicenseKey: 'CC-Attribution-NonCommercial-NoDerivatives',\r\n        resources: listResourcesUrl,\r\n        resourceOrder: 'title',\r\n        //eventOverlap: false, // TODO\r\n        resourceGroupField: 'group',\r\n    });\r\n\r\n    /**\r\n    * Create a new resource using modal dialog\r\n    */\r\n    function createResource() {\r\n        // Prepare modal dialog\r\n        resourceModal.find('.modal-title').text('Create Resource');\r\n\r\n        resourceTitleElem.val('');\r\n        resourceGroupElem.val(lastResourceGroup ? lastResourceGroup : '');\r\n        resourceColorElem.val(getRandomColor());\r\n\r\n        resourceDeleteButton.hide();\r\n        resourceSubmitButton.show();\r\n\r\n        // Action on submit: Store resource\r\n        resourceModal.parent('form').off().on('submit', function(){\r\n            axios.post(storeResourceUrl, {\r\n                    title: resourceTitleElem.val(),\r\n                    group: resourceGroupElem.val(),\r\n                    color: resourceColorElem.val(),\r\n                })\r\n                .then((res) => {\r\n                    lastResourceGroup = resourceGroupElem.val();\r\n                    resourceModal.modal('hide');\r\n                    calendar.fullCalendar('addResource', res.data, true);\r\n                })\r\n                .catch(handleAjaxError);\r\n        });\r\n\r\n        // Show modal\r\n        resourceModal.modal('show');\r\n\r\n        // Focus title input\r\n        resourceTitleElem.focus();\r\n    }\r\n\r\n    /**\r\n    * Edit a resource using modal dialog\r\n    */\r\n    function editResource(resource) {\r\n        // Prepare modal dialog\r\n        resourceModal.find('.modal-title').text('Edit Resource');\r\n\r\n        resourceTitleElem.val(resource.title);\r\n        resourceGroupElem.val(resource.group);\r\n        resourceColorElem.val(resource.eventColor);\r\n\r\n        resourceDeleteButton.show();\r\n        resourceSubmitButton.show();\r\n\r\n        // Action on submit: Update resource\r\n        resourceModal.parent('form').off().on('submit', function(){\r\n            axios.put(resource.url, {\r\n                    title: resourceTitleElem.val(),\r\n                    group: resourceGroupElem.val(),\r\n                    color: resourceColorElem.val(),\r\n                })\r\n                .then(() => {\r\n                    resourceModal.modal('hide');\r\n                    calendar.fullCalendar('refetchResources');\r\n                })\r\n                .catch(handleAjaxError);\r\n        });\r\n\r\n        // Action on delete button click: Delete resource\r\n        resourceDeleteButton.off().on('click', function(){\r\n            if (confirm('Are you sure you want to delete thre resource \\'' + resource.title + '\\'?')) {\r\n                axios.delete(resource.url)\r\n                    .then(() => {\r\n                        resourceModal.modal('hide');\r\n                        calendar.fullCalendar('removeResource', resource);\r\n                    })\r\n                    .catch(handleAjaxError);\r\n            }\r\n        });\r\n\r\n        // Show modal\r\n        resourceModal.modal('show');\r\n\r\n        // Focus title input\r\n        resourceTitleElem.focus();\r\n    }\r\n\r\n    /**\r\n    * Create a new event using modal dialog\r\n    */\r\n    function createEvent(start, end, jsEvent, view, resource) {\r\n        var resources = calendar.fullCalendar('getResources');\r\n        if (resources.length == 0) {\r\n            alert('Please add a resource first before creating an event!');\r\n            calendar.fullCalendar('unselect');\r\n            return;\r\n        }\r\n\r\n        // Prepare modal dialog\r\n        modal.find('.modal-title').text('Create Event');\r\n        dateStartElem.text(getDateStartLabel(start));\r\n        dateEndElem.text(getDateEndLabel(start, end));\r\n        titleElem.val('').prop(\"readonly\", false);\r\n        descriptionElem.val('').prop(\"readonly\", false);\r\n        updateResourceIdSelect(resource ? resource.id : resources[0].id, false);\r\n        deleteButton.hide();\r\n        submitButton.show();\r\n        creditsElement.hide();\r\n\r\n        // Action on cancel: Hide modal dialog\r\n        modal.on('hide.bs.modal', function (e) {\r\n            calendar.fullCalendar('unselect');\r\n        });\r\n\r\n        // Action on submit: Store event\r\n        modal.parent('form').off().on('submit', function(){\r\n            axios.post(storeEventUrl, {\r\n                    title: titleElem.val(),\r\n                    description: descriptionElem.val(),\r\n                    resourceId: resourceIdInputElem.val(),\r\n                    start: start.format(),\r\n                    end: end ? end.format() : null,\r\n                })\r\n                .then((res) => {\r\n                    modal.modal('hide');\r\n                    calendar.fullCalendar('renderEvent', res.data, true);\r\n                })\r\n                .catch(handleAjaxError);\r\n        });\r\n\r\n        // Show modal\r\n        modal.modal('show');\r\n\r\n        // Focus title input\r\n        titleElem.focus();\r\n    }\r\n\r\n    /**\r\n    * Edit a new event using modal dialog\r\n    */\r\n    function showEvent(calEvent) {\r\n        // Prepare dialog\r\n        modal.find('.modal-title').text('View Event');\r\n        dateStartElem.text(getDateStartLabel(calEvent.start));\r\n        dateEndElem.text(getDateEndLabel(calEvent.start, calEvent.end));\r\n        titleElem.val(calEvent.title).prop(\"readonly\", true);\r\n        descriptionElem.val(calEvent.description).prop(\"readonly\", true);\r\n        updateResourceIdSelect(calEvent.resourceId, true);\r\n\r\n        deleteButton.hide();\r\n        submitButton.hide();\r\n        if (calEvent.user.id != currentUserId ) {\r\n            creditsElement.find('[rel=\"author\"]').text(calEvent.user.name);\r\n            creditsElement.show();\r\n        } else {\r\n            creditsElement.hide();\r\n        }\r\n\r\n        // Show modal\r\n        modal.modal('show');\r\n\r\n        // Return false so default behaviour (navigate to event URL) is supressed\r\n        return false;\r\n    }\r\n\r\n    /**\r\n    * Edit a new event using modal dialog\r\n    */\r\n    function editEvent(calEvent, jsEvent, view) {\r\n        if (!calEvent.editable) {\r\n            return showEvent(calEvent);\r\n        }\r\n\r\n        // Prepare dialog\r\n        modal.find('.modal-title').text('Edit Event');\r\n        dateStartElem.text(getDateStartLabel(calEvent.start));\r\n        dateEndElem.text(getDateEndLabel(calEvent.start, calEvent.end));\r\n        titleElem.val(calEvent.title).prop(\"readonly\", false);\r\n        descriptionElem.val(calEvent.description).prop(\"readonly\", false);\r\n        updateResourceIdSelect(calEvent.resourceId, false);\r\n        deleteButton.show();\r\n        submitButton.show();\r\n        if (calEvent.user.id != currentUserId ) {\r\n            creditsElement.find('[rel=\"author\"]').text(calEvent.user.name);\r\n            creditsElement.show();\r\n        } else {\r\n            creditsElement.hide();\r\n        }\r\n\r\n        // Action on form submit: Update event\r\n        modal.parent('form').off().on('submit', function(){\r\n            axios.put(calEvent.url, {\r\n                    title: titleElem.val(),\r\n                    description: descriptionElem.val(),\r\n                    resourceId: resourceIdInputElem.val(),\r\n                })\r\n                .then(() => {\r\n                    modal.modal('hide');\r\n                    calEvent.title = titleElem.val();\r\n                    calEvent.description = descriptionElem.val();\r\n                    calEvent.resourceId = resourceIdInputElem.val();\r\n                    calendar.fullCalendar('updateEvent', calEvent);\r\n                })\r\n                .catch(handleAjaxError);\r\n        });\r\n\r\n        // Action on delete button click: Delete event\r\n        deleteButton.off().on('click', function(){\r\n            if (confirm('Really delete event \\'' + calEvent.title + '\\'?')) {\r\n                axios.delete(calEvent.url)\r\n                    .then(() => {\r\n                        modal.modal('hide');\r\n                        calendar.fullCalendar('removeEvents', calEvent.id);\r\n                    })\r\n                    .catch(handleAjaxError);\r\n            }\r\n        });\r\n\r\n        // Show modal\r\n        modal.modal('show');\r\n\r\n        // Select title\r\n        titleElem.select();\r\n\r\n        // Return false so default behaviour (navigate to event URL) is supressed\r\n        return false;\r\n    }\r\n\r\n    /**\r\n    * Updates an event after dragging / resizing\r\n    */\r\n    function updateEventDate(calEvent, delta, revertFunc) {\r\n        axios.patch(calEvent.updateDateUrl, {\r\n                start: calEvent.start.format(),\r\n                end: calEvent.end ? calEvent.end.format() : null,\r\n                resourceId: calEvent.resourceId,\r\n            })\r\n            .catch((err) => {\r\n                handleAjaxError(err);\r\n                revertFunc();\r\n            });\r\n    }\r\n\r\n    /**\r\n    * Creates a label text for the start date\r\n    */\r\n    function getDateStartLabel(start) {\r\n        var isMidNight = start.format('HH:mm:ss') == '00:00:00';\r\n        return start.format(isMidNight ? 'LL' : 'LLL'); // LL: Date, LLL: Date with time\r\n    }\r\n\r\n    /**\r\n    * Creates a label text for the end date\r\n    */\r\n    function getDateEndLabel(start, end) {\r\n        var prefix = ' - ';\r\n        if (start.isSame(end, 'day')) {\r\n            return prefix + end.format('LT'); // LT: Time\r\n        }\r\n        var startIsMidNight = start.format('HH:mm:ss') == '00:00:00';\r\n        var endIsMidNight = end.format('HH:mm:ss') == '00:00:00';\r\n        if (startIsMidNight && endIsMidNight) {\r\n            var newEnd = end.clone().subtract(1, 'day');\r\n            return start.isSame(newEnd, 'day') ? '' : prefix + newEnd.format('LL');\r\n        }\r\n        return prefix + end.format('LLL');\r\n    }\r\n\r\n    function updateResourceIdSelect(resourceId, disabled) {\r\n        var resources = calendar.fullCalendar('getResources');\r\n        resourceIdInputElem.empty();\r\n        var resourceColors = {};\r\n        $.each(resources, function (i, item) {\r\n            resourceIdInputElem.append($('<option>', { \r\n                value: item.id,\r\n                text : item.title \r\n            }));\r\n            resourceColors[item.id] = item.eventColor;\r\n        });\r\n        resourceIdInputElem.val(resourceId).change().prop(\"disabled\", disabled);            \r\n\r\n        // Change color of the label next to the resource select\r\n        var setresourceIdInputElemColor = function() {\r\n            var color = resourceColors[resourceIdInputElem.val()];\r\n            resourceIdInputElem.siblings().find('label').css('color', color ? color : 'inherit');\r\n        }\r\n        resourceIdInputElem.off('change').on('change', setresourceIdInputElemColor)\r\n        setresourceIdInputElemColor();\r\n    }\r\n\r\n});\r\n\r\nfunction getRandomColor() {\r\n    var letters = '0123456789ABCDEF';\r\n    var color = '#';\r\n    for (var i = 0; i < 6; i++) {\r\n      color += letters[Math.floor(Math.random() * 16)];\r\n    }\r\n    return color;\r\n}"],"sourceRoot":""}