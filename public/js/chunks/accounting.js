"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[512],{5817:(t,e,n)=>{n.d(e,{Z:()=>d});var r=n(7757),a=n.n(r),o=n(892);function s(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function i(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?s(Object(n),!0).forEach((function(e){c(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function c(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function l(t,e,n,r,a,o,s){try{var i=t[o](s),c=i.value}catch(t){return void n(t)}i.done?e(c):Promise.resolve(c).then(r,a)}function u(t){return function(){var e=this,n=arguments;return new Promise((function(r,a){var o=t.apply(e,n);function s(t){l(o,r,a,s,i,"next",t)}function i(t){l(o,r,a,s,i,"throw",t)}s(void 0)}))}}const d={list:function(t){return u(a().mark((function e(){var n;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=(0,o.BC)("api.accounting.budgets.index",t),e.next=3,o.hi.get(n);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})))()},store:function(t){return u(a().mark((function e(){var n;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=(0,o.BC)("api.accounting.budgets.store"),e.next=3,o.hi.post(n,t);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})))()},find:function(t){var e=arguments;return u(a().mark((function n(){var r,s;return a().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=e.length>1&&void 0!==e[1]?e[1]:{},s=(0,o.BC)("api.accounting.budgets.show",i({budget:t},r)),n.next=4,o.hi.get(s);case 4:return n.abrupt("return",n.sent);case 5:case"end":return n.stop()}}),n)})))()},update:function(t,e){return u(a().mark((function n(){var r;return a().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=(0,o.BC)("api.accounting.budgets.update",t),n.next=3,o.hi.put(r,e);case 3:return n.abrupt("return",n.sent);case 4:case"end":return n.stop()}}),n)})))()},delete:function(t){return u(a().mark((function e(){var n;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=(0,o.BC)("api.accounting.budgets.destroy",t),e.next=3,o.hi.delete(n);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})))()},transactions:function(t){var e=arguments;return u(a().mark((function n(){var r,s;return a().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=e.length>1&&void 0!==e[1]?e[1]:{},s=(0,o.BC)("api.accounting.budgets.transactions",i({budget:t},r)),n.next=4,o.hi.get(s);case 4:return n.abrupt("return",n.sent);case 5:case"end":return n.stop()}}),n)})))()},donations:function(t){var e=arguments;return u(a().mark((function n(){var r,s;return a().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=e.length>1&&void 0!==e[1]?e[1]:{},s=(0,o.BC)("api.accounting.budgets.donations",i({budget:t},r)),n.next=4,o.hi.get(s);case 4:return n.abrupt("return",n.sent);case 5:case"end":return n.stop()}}),n)})))()},names:function(){return u(a().mark((function t(){var e;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=(0,o.BC)("api.accounting.budgets.names"),t.next=3,o.hi.get(e);case 3:return t.abrupt("return",t.sent);case 4:case"end":return t.stop()}}),t)})))()},export:function(t,e){return u(a().mark((function n(){var r;return a().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=(0,o.BC)("api.accounting.budgets.export",i({budget:t},e)),n.next=3,o.hi.download(r);case 3:return n.abrupt("return",n.sent);case 4:case"end":return n.stop()}}),n)})))()}}},5021:(t,e,n)=>{n.d(e,{Z:()=>d});var r=n(7757),a=n.n(r),o=n(892);function s(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function i(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?s(Object(n),!0).forEach((function(e){c(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function c(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function l(t,e,n,r,a,o,s){try{var i=t[o](s),c=i.value}catch(t){return void n(t)}i.done?e(c):Promise.resolve(c).then(r,a)}function u(t){return function(){var e=this,n=arguments;return new Promise((function(r,a){var o=t.apply(e,n);function s(t){l(o,r,a,s,i,"next",t)}function i(t){l(o,r,a,s,i,"throw",t)}s(void 0)}))}}const d={list:function(t){return u(a().mark((function e(){var n;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=(0,o.BC)("api.accounting.categories.index",t),e.next=3,o.hi.get(n);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})))()},store:function(t){return u(a().mark((function e(){var n;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=(0,o.BC)("api.accounting.categories.store"),e.next=3,o.hi.post(n,t);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})))()},find:function(t){var e=arguments;return u(a().mark((function n(){var r,s;return a().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=e.length>1&&void 0!==e[1]?e[1]:{},s=(0,o.BC)("api.accounting.categories.show",i({category:t},r)),n.next=4,o.hi.get(s);case 4:return n.abrupt("return",n.sent);case 5:case"end":return n.stop()}}),n)})))()},update:function(t,e){return u(a().mark((function n(){var r;return a().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=(0,o.BC)("api.accounting.categories.update",t),n.next=3,o.hi.put(r,e);case 3:return n.abrupt("return",n.sent);case 4:case"end":return n.stop()}}),n)})))()},delete:function(t){return u(a().mark((function e(){var n;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=(0,o.BC)("api.accounting.categories.destroy",t),e.next=3,o.hi.delete(n);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})))()},tree:function(t){return u(a().mark((function e(){var n;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=(0,o.BC)("api.accounting.categories.tree",t),e.next=3,o.hi.get(n);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})))()}}},5778:(t,e,n)=>{n.d(e,{Z:()=>d});var r=n(7757),a=n.n(r),o=n(892);function s(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function i(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?s(Object(n),!0).forEach((function(e){c(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function c(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function l(t,e,n,r,a,o,s){try{var i=t[o](s),c=i.value}catch(t){return void n(t)}i.done?e(c):Promise.resolve(c).then(r,a)}function u(t){return function(){var e=this,n=arguments;return new Promise((function(r,a){var o=t.apply(e,n);function s(t){l(o,r,a,s,i,"next",t)}function i(t){l(o,r,a,s,i,"throw",t)}s(void 0)}))}}const d={list:function(t){return u(a().mark((function e(){var n;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=(0,o.BC)("api.accounting.projects.index",t),e.next=3,o.hi.get(n);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})))()},store:function(t){return u(a().mark((function e(){var n;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=(0,o.BC)("api.accounting.projects.store"),e.next=3,o.hi.post(n,t);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})))()},find:function(t){var e=arguments;return u(a().mark((function n(){var r,s;return a().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=e.length>1&&void 0!==e[1]?e[1]:{},s=(0,o.BC)("api.accounting.projects.show",i({project:t},r)),n.next=4,o.hi.get(s);case 4:return n.abrupt("return",n.sent);case 5:case"end":return n.stop()}}),n)})))()},update:function(t,e){return u(a().mark((function n(){var r;return a().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=(0,o.BC)("api.accounting.projects.update",t),n.next=3,o.hi.put(r,e);case 3:return n.abrupt("return",n.sent);case 4:case"end":return n.stop()}}),n)})))()},delete:function(t){return u(a().mark((function e(){var n;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=(0,o.BC)("api.accounting.projects.destroy",t),e.next=3,o.hi.delete(n);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})))()},tree:function(t){return u(a().mark((function e(){var n;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=(0,o.BC)("api.accounting.projects.tree",t),e.next=3,o.hi.get(n);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})))()}}},8471:(t,e,n)=>{n.d(e,{Z:()=>d});var r=n(7757),a=n.n(r),o=n(892);function s(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function i(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?s(Object(n),!0).forEach((function(e){c(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function c(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function l(t,e,n,r,a,o,s){try{var i=t[o](s),c=i.value}catch(t){return void n(t)}i.done?e(c):Promise.resolve(c).then(r,a)}function u(t){return function(){var e=this,n=arguments;return new Promise((function(r,a){var o=t.apply(e,n);function s(t){l(o,r,a,s,i,"next",t)}function i(t){l(o,r,a,s,i,"throw",t)}s(void 0)}))}}const d={list:function(t){return u(a().mark((function e(){var n;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=(0,o.BC)("api.accounting.suppliers.index",t),e.next=3,o.hi.get(n);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})))()},store:function(t){return u(a().mark((function e(){var n;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=(0,o.BC)("api.accounting.suppliers.store"),e.next=3,o.hi.post(n,t);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})))()},find:function(t){var e=arguments;return u(a().mark((function n(){var r,s;return a().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=e.length>1&&void 0!==e[1]?e[1]:{},s=(0,o.BC)("api.accounting.suppliers.show",i({supplier:t},r)),n.next=4,o.hi.get(s);case 4:return n.abrupt("return",n.sent);case 5:case"end":return n.stop()}}),n)})))()},update:function(t,e){return u(a().mark((function n(){var r;return a().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=(0,o.BC)("api.accounting.suppliers.update",t),n.next=3,o.hi.put(r,e);case 3:return n.abrupt("return",n.sent);case 4:case"end":return n.stop()}}),n)})))()},delete:function(t){return u(a().mark((function e(){var n;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=(0,o.BC)("api.accounting.suppliers.destroy",t),e.next=3,o.hi.delete(n);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})))()},transactions:function(t){var e=arguments;return u(a().mark((function n(){var r,s;return a().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=e.length>1&&void 0!==e[1]?e[1]:{},s=(0,o.BC)("api.accounting.suppliers.transactions",i({supplier:t},r)),n.next=4,o.hi.get(s);case 4:return n.abrupt("return",n.sent);case 5:case"end":return n.stop()}}),n)})))()},names:function(){return u(a().mark((function t(){var e;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=(0,o.BC)("api.accounting.suppliers.names"),t.next=3,o.hi.get(e);case 3:return t.abrupt("return",t.sent);case 4:case"end":return t.stop()}}),t)})))()}}},1787:(t,e,n)=>{n.d(e,{Z:()=>d});var r=n(7757),a=n.n(r),o=n(892);function s(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function i(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?s(Object(n),!0).forEach((function(e){c(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function c(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function l(t,e,n,r,a,o,s){try{var i=t[o](s),c=i.value}catch(t){return void n(t)}i.done?e(c):Promise.resolve(c).then(r,a)}function u(t){return function(){var e=this,n=arguments;return new Promise((function(r,a){var o=t.apply(e,n);function s(t){l(o,r,a,s,i,"next",t)}function i(t){l(o,r,a,s,i,"throw",t)}s(void 0)}))}}const d={list:function(t,e){return u(a().mark((function n(){var r;return a().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=(0,o.BC)("api.accounting.transactions.index",i({wallet:t},e)),n.next=3,o.hi.get(r);case 3:return n.abrupt("return",n.sent);case 4:case"end":return n.stop()}}),n)})))()},history:function(t){return u(a().mark((function e(){var n;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=(0,o.BC)("api.accounting.transactions.history",t),e.next=3,o.hi.get(n);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})))()},find:function(t){var e=arguments;return u(a().mark((function n(){var r,s;return a().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=e.length>1&&void 0!==e[1]?e[1]:{},s=(0,o.BC)("api.accounting.transactions.show",i({transaction:t},r)),n.next=4,o.hi.get(s);case 4:return n.abrupt("return",n.sent);case 5:case"end":return n.stop()}}),n)})))()},transactionHistory:function(t){return u(a().mark((function e(){var n;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=(0,o.BC)("api.accounting.transactions.transactionHistory",t),e.next=3,o.hi.get(n);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})))()},store:function(t,e){return u(a().mark((function n(){var r;return a().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=(0,o.BC)("api.accounting.transactions.store",t),n.next=3,o.hi.post(r,e);case 3:return n.abrupt("return",n.sent);case 4:case"end":return n.stop()}}),n)})))()},update:function(t,e){return u(a().mark((function n(){var r;return a().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=(0,o.BC)("api.accounting.transactions.update",t),n.next=3,o.hi.put(r,e);case 3:return n.abrupt("return",n.sent);case 4:case"end":return n.stop()}}),n)})))()},updateReceipt:function(t,e){return u(a().mark((function n(){var r,s;return a().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=new FormData,Array.from(e).forEach((function(t){return r.append("img[]",t)})),s=(0,o.BC)("api.accounting.transactions.updateReceipt",t),n.next=5,o.hi.postFormData(s,r);case 5:return n.abrupt("return",n.sent);case 6:case"end":return n.stop()}}),n)})))()},delete:function(t){return u(a().mark((function e(){var n;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=(0,o.BC)("api.accounting.transactions.destroy",t),e.next=3,o.hi.delete(n);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})))()},locations:function(t){return u(a().mark((function e(){var n;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=(0,o.BC)("api.accounting.transactions.locations",t),e.next=3,o.hi.get(n);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})))()},secondaryCategories:function(t){return u(a().mark((function e(){var n;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=(0,o.BC)("api.accounting.transactions.secondaryCategories",t),e.next=3,o.hi.get(n);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})))()},costCenters:function(t){return u(a().mark((function e(){var n;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=(0,o.BC)("api.accounting.transactions.costCenters",t),e.next=3,o.hi.get(n);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})))()},attendees:function(t){return u(a().mark((function e(){var n;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=(0,o.BC)("api.accounting.transactions.attendees",t),e.next=3,o.hi.get(n);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})))()},taxonomies:function(t){return u(a().mark((function e(){var n;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=(0,o.BC)("api.accounting.transactions.taxonomies",t),e.next=3,o.hi.get(n);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})))()},listControllable:function(t){return u(a().mark((function e(){var n;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=(0,o.BC)("api.accounting.transactions.controllable",t),e.next=3,o.hi.get(n);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})))()},markControlled:function(t){return u(a().mark((function e(){var n;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=(0,o.BC)("api.accounting.transactions.markControlled",t),e.next=3,o.hi.post(n);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})))()},undoControlled:function(t){return u(a().mark((function e(){var n;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=(0,o.BC)("api.accounting.transactions.undoControlled",t),e.next=3,o.hi.delete(n);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})))()},undoBooking:function(t){return u(a().mark((function e(){var n;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=(0,o.BC)("api.accounting.transactions.undoBooking",t),e.next=3,o.hi.put(n);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})))()},export:function(t){return u(a().mark((function e(){var n;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=(0,o.BC)("api.accounting.transactions.export",t),e.next=3,o.hi.download(n);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})))()}}},6557:(t,e,n)=>{n.d(e,{Z:()=>d});var r=n(7757),a=n.n(r),o=n(892);function s(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function i(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?s(Object(n),!0).forEach((function(e){c(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function c(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function l(t,e,n,r,a,o,s){try{var i=t[o](s),c=i.value}catch(t){return void n(t)}i.done?e(c):Promise.resolve(c).then(r,a)}function u(t){return function(){var e=this,n=arguments;return new Promise((function(r,a){var o=t.apply(e,n);function s(t){l(o,r,a,s,i,"next",t)}function i(t){l(o,r,a,s,i,"throw",t)}s(void 0)}))}}const d={list:function(t){return u(a().mark((function e(){var n;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=(0,o.BC)("api.accounting.wallets.index",t),e.next=3,o.hi.get(n);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})))()},store:function(t){return u(a().mark((function e(){var n;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=(0,o.BC)("api.accounting.wallets.store"),e.next=3,o.hi.post(n,t);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})))()},find:function(t){var e=arguments;return u(a().mark((function n(){var r,s;return a().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=e.length>1&&void 0!==e[1]?e[1]:{},s=(0,o.BC)("api.accounting.wallets.show",i({wallet:t},r)),n.next=4,o.hi.get(s);case 4:return n.abrupt("return",n.sent);case 5:case"end":return n.stop()}}),n)})))()},update:function(t,e){return u(a().mark((function n(){var r;return a().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=(0,o.BC)("api.accounting.wallets.update",t),n.next=3,o.hi.put(r,e);case 3:return n.abrupt("return",n.sent);case 4:case"end":return n.stop()}}),n)})))()},delete:function(t){return u(a().mark((function e(){var n;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=(0,o.BC)("api.accounting.wallets.destroy",t),e.next=3,o.hi.delete(n);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})))()},names:function(){return u(a().mark((function t(){var e;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=(0,o.BC)("api.accounting.wallets.names"),t.next=3,o.hi.get(e);case 3:return t.abrupt("return",t.sent);case 4:case"end":return t.stop()}}),t)})))()}}},195:(t,e,n)=>{n.d(e,{Z:()=>d});var r=n(7757),a=n.n(r),o=n(892);function s(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function i(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?s(Object(n),!0).forEach((function(e){c(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function c(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function l(t,e,n,r,a,o,s){try{var i=t[o](s),c=i.value}catch(t){return void n(t)}i.done?e(c):Promise.resolve(c).then(r,a)}function u(t){return function(){var e=this,n=arguments;return new Promise((function(r,a){var o=t.apply(e,n);function s(t){l(o,r,a,s,i,"next",t)}function i(t){l(o,r,a,s,i,"throw",t)}s(void 0)}))}}const d={list:function(t){return u(a().mark((function e(){var n;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=(0,o.BC)("api.fundraising.donors.index",t),e.next=3,o.hi.get(n);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})))()},store:function(t){return u(a().mark((function e(){var n;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=(0,o.BC)("api.fundraising.donors.store"),e.next=3,o.hi.post(n,t);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})))()},find:function(t){var e=arguments;return u(a().mark((function n(){var r,s;return a().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=e.length>1&&void 0!==e[1]&&e[1],s=(0,o.BC)("api.fundraising.donors.show",t),r&&(s+="?extended"),n.next=5,o.hi.get(s);case 5:return n.abrupt("return",n.sent);case 6:case"end":return n.stop()}}),n)})))()},update:function(t,e){return u(a().mark((function n(){var r;return a().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=(0,o.BC)("api.fundraising.donors.update",t),n.next=3,o.hi.put(r,e);case 3:return n.abrupt("return",n.sent);case 4:case"end":return n.stop()}}),n)})))()},delete:function(t){return u(a().mark((function e(){var n;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=(0,o.BC)("api.fundraising.donors.destroy",t),e.next=3,o.hi.delete(n);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})))()},listSalutations:function(){return u(a().mark((function t(){var e;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=(0,o.BC)("api.fundraising.donors.salutations"),t.next=3,o.hi.get(e);case 3:return t.abrupt("return",t.sent);case 4:case"end":return t.stop()}}),t)})))()},listDonations:function(t){return u(a().mark((function e(){var n;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=(0,o.BC)("api.fundraising.donors.donations.index",t),e.next=3,o.hi.get(n);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})))()},storeDonation:function(t,e){return u(a().mark((function n(){var r;return a().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=(0,o.BC)("api.fundraising.donors.donations.store",t),n.next=3,o.hi.post(r,e);case 3:return n.abrupt("return",n.sent);case 4:case"end":return n.stop()}}),n)})))()},listComments:function(t){return u(a().mark((function e(){var n;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=(0,o.BC)("api.fundraising.donors.comments.index",t),e.next=3,o.hi.get(n);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})))()},storeComment:function(t,e){return u(a().mark((function n(){var r;return a().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=(0,o.BC)("api.fundraising.donors.comments.store",t),n.next=3,o.hi.post(r,e);case 3:return n.abrupt("return",n.sent);case 4:case"end":return n.stop()}}),n)})))()},listTags:function(t){return u(a().mark((function e(){var n;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=(0,o.BC)("api.fundraising.tags.index",{filter:t}),e.next=3,o.hi.get(n);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})))()},listDonorsTags:function(t){return u(a().mark((function e(){var n;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=(0,o.BC)("api.fundraising.donors.tags.index",t),e.next=3,o.hi.get(n);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})))()},storeDonorsTags:function(t,e){return u(a().mark((function n(){var r;return a().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=(0,o.BC)("api.fundraising.donors.tags.store",t),n.next=3,o.hi.post(r,e);case 3:return n.abrupt("return",n.sent);case 4:case"end":return n.stop()}}),n)})))()},names:function(){return u(a().mark((function t(){var e;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=(0,o.BC)("api.fundraising.donors.names"),t.next=3,o.hi.get(e);case 3:return t.abrupt("return",t.sent);case 4:case"end":return t.stop()}}),t)})))()},budgets:function(t){var e=arguments;return u(a().mark((function n(){var r,s;return a().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=e.length>1&&void 0!==e[1]?e[1]:{},s=(0,o.BC)("api.fundraising.donors.budgets",i({donor:t},r)),n.next=4,o.hi.get(s);case 4:return n.abrupt("return",n.sent);case 5:case"end":return n.stop()}}),n)})))()}}},8189:(t,e,n)=>{n.d(e,{Z:()=>i});var r=n(7897),a=n.n(r),o=n(1519),s=n.n(o)()(a());s.push([t.id,".list-group.list-group-root[data-v-07d928dd]{overflow:hidden;padding:0}.list-group.list-group-root .list-group[data-v-07d928dd]{margin-bottom:0}.list-group.list-group-root .list-group-item[data-v-07d928dd]{border-radius:0;border-width:1px 0 0}.list-group.list-group-root>.list-group-item[data-v-07d928dd]:first-child{border-top-width:0}","",{version:3,sources:["webpack://./resources/js/components/ui/NestedListGroup.vue"],names:[],mappings:"AA0DA,6CAEA,eAAA,CADA,SAEA,CAEA,yDACA,eACA,CAEA,8DACA,eAAA,CACA,oBACA,CAEA,0EACA,kBACA",sourcesContent:['<template>\r\n    <b-list-group :class="root ? \'list-group-root\' : null">\r\n        <template v-for="item in items">\r\n            <b-list-group-item\r\n                :button="item.can_update"\r\n                :key="item.id"\r\n                :style="{ \'padding-left\': 20 + level * itemPaddingLeft + \'px\' }"\r\n                @click="handleClick(item)"\r\n            >\r\n                <del v-if="!item.enabled">{{ item.name }}</del>\r\n                <template v-else>{{ item.name }}</template>\r\n                <small v-if="item.description" class="text-muted d-block">\r\n                    {{ item.description }}</small\r\n                >\r\n            </b-list-group-item>\r\n            <nested-list-group\r\n                :key="`${item.id}-children`"\r\n                v-if="item.children.length > 0"\r\n                :items="item.children"\r\n                :root="false"\r\n                :level="level + 1"\r\n                @itemClick="$emit(\'itemClick\', $event)"\r\n            />\r\n        </template>\r\n    </b-list-group>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n    name: "nested-list-group",\r\n    props: {\r\n        items: {\r\n            required: true\r\n        },\r\n        root: {\r\n            type: Boolean,\r\n            default: true\r\n        },\r\n        level: {\r\n            type: Number,\r\n            default: 0\r\n        },\r\n        itemPaddingLeft: {\r\n            type: Number,\r\n            default: 25\r\n        }\r\n    },\r\n    methods: {\r\n        handleClick(item) {\r\n            if (item.can_update) {\r\n                this.$emit("itemClick", item.id);\r\n            }\r\n        }\r\n    }\r\n};\r\n<\/script>\r\n\r\n<style scoped>\r\n.list-group.list-group-root {\r\n    padding: 0;\r\n    overflow: hidden;\r\n}\r\n\r\n.list-group.list-group-root .list-group {\r\n    margin-bottom: 0;\r\n}\r\n\r\n.list-group.list-group-root .list-group-item {\r\n    border-radius: 0;\r\n    border-width: 1px 0 0 0;\r\n}\r\n\r\n.list-group.list-group-root > .list-group-item:first-child {\r\n    border-top-width: 0;\r\n}\r\n</style>\r\n'],sourceRoot:""}]);const i=s},1762:(t,e,n)=>{n.d(e,{Z:()=>i});var r=n(7897),a=n.n(r),o=n(1519),s=n.n(o)()(a());s.push([t.id,"table caption{padding-left:10px;padding-right:10px;text-align:center}","",{version:3,sources:["webpack://./resources/js/pages/accounting/SummaryPage.vue"],names:[],mappings:"AAgdA,cACA,iBAAA,CACA,kBAAA,CACA,iBACA",sourcesContent:['<template>\r\n    <div>\r\n        <alert-with-retry :value="errorText" @retry="fetchData" />\r\n        <div class="row mb-2">\r\n            <div class="col-sm">\r\n                <div class="form-row">\r\n                    <div class="col-auto mb-2">\r\n                        <b-input-group :prepend="$t(\'Wallet\')">\r\n                            <b-select\r\n                                v-model="wallet"\r\n                                :options="walletOptions"\r\n                                :disabled="isBusy"\r\n                            />\r\n                        </b-input-group>\r\n                    </div>\r\n                    <div v-if="allProjects.length > 0" class="col-auto mb-2">\r\n                        <b-select\r\n                            v-model="project"\r\n                            :options="projectOptions"\r\n                            :disabled="isBusy"\r\n                        />\r\n                    </div>\r\n                    <div\r\n                        v-if="useLocations && allLocations.length"\r\n                        class="col-auto mb-2"\r\n                    >\r\n                        <b-select\r\n                            v-model="location"\r\n                            :options="locationOptions"\r\n                            :disabled="isBusy"\r\n                        />\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <div class="col-sm-8 col-md-9 col-lg-10 col-xl-auto">\r\n                <div class="form-row">\r\n                    <div class="col-auto mb-2">\r\n                        <b-button\r\n                            variant="secondary"\r\n                            @click="setToCurrentMonth()"\r\n                            ><font-awesome-icon icon="calendar-alt"\r\n                        /></b-button>\r\n                    </div>\r\n                    <div class="col-auto mb-2">\r\n                        <b-select\r\n                            v-model="month"\r\n                            :options="monthOptions"\r\n                            :disabled="isBusy"\r\n                        />\r\n                    </div>\r\n                    <div class="col-auto mb-2">\r\n                        <b-select\r\n                            v-model="year"\r\n                            :options="yearOptions"\r\n                            :disabled="isBusy"\r\n                        />\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n\r\n        \x3c!-- Wallets --\x3e\r\n        <b-table\r\n            v-if="!isBusy && isLoaded"\r\n            hover\r\n            responsive\r\n            :items="wallets"\r\n            :fields="walletFields"\r\n            class="shadow-sm mb-4 bg-white"\r\n            :caption="heading"\r\n            caption-top\r\n        >\r\n            <template #cell(name)="data">\r\n                <router-link\r\n                    v-if="can(\'view-transactions\')"\r\n                    :to="{\r\n                        name: \'accounting.transactions.index\',\r\n                        params: {\r\n                            wallet: data.item.id\r\n                        },\r\n                        query: {\r\n                            \'filter[date_start]\': filterDateStart,\r\n                            \'filter[date_end]\': filterDateEnd\r\n                        }\r\n                    }"\r\n                >\r\n                    {{ data.value }}\r\n                </router-link>\r\n                <template v-else>\r\n                    {{ data.value }}\r\n                </template>\r\n            </template>\r\n            <template #custom-foot>\r\n                <b-tr>\r\n                    <b-td>\r\n                        <strong>{{ $t("Sum across all wallets") }}</strong>\r\n                    </b-td>\r\n                    <b-td class="text-right">\r\n                        <strong>{{ totals.income_formatted }}</strong>\r\n                    </b-td>\r\n                    <b-td class="text-right">\r\n                        <strong>{{ totals.spending_formatted }}</strong>\r\n                    </b-td>\r\n                    <b-td class="text-right" :class="colorClass(totals.difference)">\r\n                        <strong>{{ totals.difference_formatted }}</strong>\r\n                    </b-td>\r\n                    <b-td class="text-right">\r\n                        <strong>{{ totals.fees_formatted }}</strong>\r\n                    </b-td>\r\n                    <b-td class="text-right" :class="colorClass(totals.amount)">\r\n                        <strong>{{ totals.amount_formatted }}</strong>\r\n                    </b-td>\r\n                </b-tr>\r\n            </template>\r\n        </b-table>\r\n\r\n        <template v-if="!isBusy && isLoaded">\r\n            <b-row>\r\n                \x3c!-- Revenue by categories --\x3e\r\n                <b-col md>\r\n                    <SummaryList\r\n                        :items="categories"\r\n                        :title="$t(\'Categories\')"\r\n                        paramName="category_id"\r\n                        :wallet="wallet"\r\n                        :filterDateStart="filterDateStart"\r\n                        :filterDateEnd="filterDateEnd"\r\n                        flatten-children\r\n                    />\r\n                </b-col>\r\n                \x3c!-- Revenue by project --\x3e\r\n                <b-col md>\r\n                    <SummaryList\r\n                        :items="projects"\r\n                        :title="$t(\'Projects\')"\r\n                        paramName="project_id"\r\n                        :noNameLabel="$t(\'No project\')"\r\n                        :wallet="wallet"\r\n                        :filterDateStart="filterDateStart"\r\n                        :filterDateEnd="filterDateEnd"\r\n                        flatten-children\r\n                    />\r\n                </b-col>\r\n            </b-row>\r\n            <b-row>\r\n                \x3c!-- Revenue by secondary category --\x3e\r\n                <b-col v-if="secondCategories" md>\r\n                    <SummaryList\r\n                        :items="secondCategories"\r\n                        :title="$t(\'Secondary Categories\')"\r\n                        paramName="secondary_category"\r\n                        :noNameLabel="$t(\'No Secondary Category\')"\r\n                        :wallet="wallet"\r\n                        :filterDateStart="filterDateStart"\r\n                        :filterDateEnd="filterDateEnd"\r\n                    />\r\n                </b-col>\r\n                \x3c!-- Revenue by location --\x3e\r\n                <b-col v-if="locations" md>\r\n                    <SummaryList\r\n                        :items="locations"\r\n                        :title="$t(\'Locations\')"\r\n                        paramName="location"\r\n                        :noNameLabel="$t(\'No location\')"\r\n                        :wallet="wallet"\r\n                        :filterDateStart="filterDateStart"\r\n                        :filterDateEnd="filterDateEnd"\r\n                    />\r\n                </b-col>\r\n            </b-row>\r\n        </template>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport moment from "moment";\r\nimport summaryApi from "@/api/accounting/summary";\r\nimport walletsApi from "@/api/accounting/wallets";\r\nimport transactionsApi from "@/api/accounting/transactions";\r\nimport projectsApi from "@/api/accounting/projects";\r\nimport AlertWithRetry from "@/components/alerts/AlertWithRetry";\r\nimport SummaryList from "@/components/accounting/SummaryList";\r\nexport default {\r\n    components: {\r\n        AlertWithRetry,\r\n        SummaryList\r\n    },\r\n    data() {\r\n        return {\r\n            year: this.$route.query.year ?? null,\r\n            month: this.$route.query.month ? this.$route.query.month - 1 : null,\r\n            years: [moment().year()],\r\n\r\n            wallets: [],\r\n            totals: {},\r\n            categories: [],\r\n            projects: [],\r\n            secondCategories: [],\r\n            locations: [],\r\n\r\n            allWallets: [],\r\n            wallet: this.$route.query.wallet ?? null,\r\n            allProjects: [],\r\n            project: this.$route.query.project ?? null,\r\n\r\n            useLocations: false,\r\n            allLocations: [],\r\n            location: this.$route.query.location ?? null,\r\n\r\n            isLoaded: false,\r\n            isBusy: false,\r\n            errorText: null,\r\n\r\n            walletFields: [\r\n                {\r\n                    key: "name",\r\n                    label: this.$t("Wallet")\r\n                },\r\n                {\r\n                    key: "income_formatted",\r\n                    label: this.$t("Income"),\r\n                    class: "text-right"\r\n                },\r\n                {\r\n                    key: "spending_formatted",\r\n                    label: this.$t("Spending"),\r\n                    class: "text-right"\r\n                },\r\n                {\r\n                    key: "difference_formatted",\r\n                    label: this.$t("Difference"),\r\n                    class: "text-right",\r\n                    tdClass: (value, idx, item) => this.colorClass(item.difference)\r\n                },\r\n                {\r\n                    key: "fees_formatted",\r\n                    label: this.$t("Fees"),\r\n                    class: "text-right"\r\n                },\r\n                {\r\n                    key: "amount_formatted",\r\n                    label: this.$t("Balance"),\r\n                    class: "text-right",\r\n                    tdClass: (value, idx, item) => this.colorClass(item.amount)\r\n                }\r\n            ]\r\n        };\r\n    },\r\n    computed: {\r\n        heading() {\r\n            let str = "";\r\n            if (this.year != null && this.month != null) {\r\n                const date = moment(\r\n                    `${this.year}-${this.month + 1}`,\r\n                    "YYYY-M"\r\n                ).startOf("month");\r\n                str += date.format("MMMM YYYY");\r\n            } else if (this.year != null) {\r\n                str += this.year;\r\n            } else {\r\n                str += this.$t("All time");\r\n            }\r\n            return str;\r\n        },\r\n        monthOptions() {\r\n            let arr = [\r\n                {\r\n                    value: null,\r\n                    text: `- ${this.$t("Month")} -`\r\n                }\r\n            ];\r\n            arr.push(\r\n                ...moment.months().map((month, idx) => ({\r\n                    value: idx,\r\n                    text: month\r\n                }))\r\n            );\r\n            return arr;\r\n        },\r\n        yearOptions() {\r\n            let arr = [\r\n                {\r\n                    value: null,\r\n                    text: `- ${this.$t("Year")} -`\r\n                }\r\n            ];\r\n            arr.push(\r\n                ...this.years.map(year => ({\r\n                    value: year,\r\n                    text: year\r\n                }))\r\n            );\r\n            return arr;\r\n        },\r\n        walletOptions() {\r\n            let arr = [\r\n                {\r\n                    value: null,\r\n                    text: `- ${this.$t("All wallets")} -`\r\n                }\r\n            ];\r\n            arr.push(\r\n                ...this.allWallets.map(e => ({\r\n                    value: e.id,\r\n                    text: e.name\r\n                }))\r\n            );\r\n            return arr;\r\n        },\r\n        projectOptions() {\r\n            let arr = [\r\n                {\r\n                    value: null,\r\n                    text: `- ${this.$t("All projects")} -`\r\n                }\r\n            ];\r\n            for (let elem of this.allProjects) {\r\n                this.fillTree(arr, elem);\r\n            }\r\n            return arr;\r\n        },\r\n        locationOptions() {\r\n            let arr = [\r\n                {\r\n                    value: null,\r\n                    text: `- ${this.$t("All locations")} -`\r\n                }\r\n            ];\r\n            arr.push(\r\n                ...this.allLocations.map(e => ({\r\n                    value: e,\r\n                    text: e\r\n                }))\r\n            );\r\n            return arr;\r\n        },\r\n        filterDateStart() {\r\n            if (this.year != null && this.month != null) {\r\n                return moment(`${this.year}-${this.month + 1}`, "YYYY-M")\r\n                    .startOf("month")\r\n                    .format(moment.HTML5_FMT.DATE);\r\n            } else if (this.year != null) {\r\n                return moment(`${this.year}`, "YYYY")\r\n                    .startOf("year")\r\n                    .format(moment.HTML5_FMT.DATE);\r\n            }\r\n            return null;\r\n        },\r\n        filterDateEnd() {\r\n            if (this.year != null && this.month != null) {\r\n                return moment(`${this.year}-${this.month + 1}`, "YYYY-M")\r\n                    .endOf("month")\r\n                    .format(moment.HTML5_FMT.DATE);\r\n            } else if (this.year != null) {\r\n                return moment(`${this.year}`, "YYYY")\r\n                    .endOf("year")\r\n                    .format(moment.HTML5_FMT.DATE);\r\n            }\r\n            return null;\r\n        }\r\n    },\r\n    watch: {\r\n        month(val) {\r\n            this.fetchData();\r\n        },\r\n        year(val) {\r\n            this.fetchData();\r\n        },\r\n        wallet(val) {\r\n            this.fetchData();\r\n        },\r\n        project(val) {\r\n            this.fetchData();\r\n        },\r\n        location(val) {\r\n            this.fetchData();\r\n        }\r\n    },\r\n    async created() {\r\n        this.allWallets = (await walletsApi.list()).data;\r\n        this.allProjects = await projectsApi.tree();\r\n        this.allLocations = await transactionsApi.locations();\r\n\r\n        await this.fetchData();\r\n        this.isLoaded = true;\r\n    },\r\n    methods: {\r\n        fillTree(tree, elem, level = 0) {\r\n            let text = "";\r\n            if (level > 0) {\r\n                text += "&nbsp;".repeat(level * 5);\r\n            }\r\n            text += elem.name;\r\n            tree.push({\r\n                html: text,\r\n                value: elem.id\r\n            });\r\n            for (let child of elem.children) {\r\n                this.fillTree(tree, child, level + 1);\r\n            }\r\n        },\r\n        setToCurrentMonth() {\r\n            const now = moment();\r\n            this.year = now.year();\r\n            this.month = now.month();\r\n        },\r\n        colorClass(value) {\r\n            if (value > 0) {\r\n                return "text-success"\r\n            }\r\n            if (value < 0) {\r\n                return "text-danger";\r\n            }\r\n            return null;\r\n        },\r\n        async fetchData() {\r\n            this.$router.push(\r\n                {\r\n                    query: {\r\n                        ...this.$route.query,\r\n                        month: this.month !== null ? this.month + 1 : undefined,\r\n                        year: this.year || undefined,\r\n                        wallet: this.wallet || undefined,\r\n                        project: this.project || undefined,\r\n                        location: this.location || undefined\r\n                    }\r\n                },\r\n                () => {}\r\n            );\r\n\r\n            this.errorText = null;\r\n            this.isBusy = true;\r\n            try {\r\n                let data = await summaryApi.list({\r\n                    year: this.year,\r\n                    month: this.month !== null ? this.month + 1 : undefined,\r\n                    wallet: this.wallet,\r\n                    project: this.project,\r\n                    location: this.location\r\n                });\r\n\r\n                this.years = data.years;\r\n\r\n                this.wallets = data.wallets;\r\n                this.totals = data.totals;\r\n\r\n                this.projects = data.projects;\r\n                this.categories = data.categories;\r\n\r\n                this.secondCategories = data.second_categories;\r\n                this.locations = data.locations;\r\n\r\n                this.useLocations = data.use_locations;\r\n\r\n                this.isBusy = false;\r\n            } catch (err) {\r\n                this.errorText = err;\r\n            }\r\n        }\r\n    }\r\n};\r\n<\/script>\r\n\r\n<style>\r\ntable caption {\r\n    padding-left: 10px;\r\n    padding-right: 10px;\r\n    text-align: center;\r\n}\r\n</style>\r\n'],sourceRoot:""}]);const i=s},6409:(t,e,n)=>{n.d(e,{Z:()=>a});const r={props:{size:{required:!0,type:Number,default:200},url:{required:!0,type:String}}};const a=(0,n(1900).Z)(r,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("svg",{staticStyle:{"max-width":"100%",height:"auto"},attrs:{viewBox:"0 0 1 1",width:t.size,height:t.size}},[n("image",{attrs:{"xlink:href":t.url,width:"100%",height:"100%",preserveAspectRatio:"xMidYMid slice"}})])}),[],!1,null,null,null).exports},8183:(t,e,n)=>{n.d(e,{Z:()=>p});var r=n(7757),a=n.n(r),o=n(195),s=n(629);function i(t){return function(t){if(Array.isArray(t))return c(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return c(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return c(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function l(t,e,n,r,a,o,s){try{var i=t[o](s),c=i.value}catch(t){return void n(t)}i.done?e(c):Promise.resolve(c).then(r,a)}function u(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function d(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}const f={props:{budget:{type:Object,required:!1},disabled:Boolean},data:function(){return{form:this.budget?{name:this.budget.name,agreed_amount:this.budget.agreed_amount,initial_amount:this.budget.initial_amount,description:this.budget.description,donor_id:this.budget.donor_id,closed_at:this.budget.closed_at,is_completed:this.budget.is_completed}:{name:null,agreed_amount:0,initial_amount:0,description:null,donor_id:null,closed_at:null,is_completed:!1},donors:[]}},computed:function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?u(Object(n),!0).forEach((function(e){d(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({},(0,s.rn)(["settings"])),created:function(){this.can("view-fundraising-entities")&&this.fetchDonors()},methods:{getValidationState:function(t){var e=t.dirty,n=t.validated,r=t.valid;return e||n?void 0===r?null:r:null},onSubmit:function(){this.$emit("submit",this.form)},onDelete:function(){confirm(this.$t("Really delete this budget?"))&&this.$emit("delete")},fetchDonors:function(){var t,e=this;return(t=a().mark((function t(){var n,r;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,o.Z.names();case 2:n=t.sent,(r=[{value:null,text:"- ".concat(e.$t("No donor")," -")}]).push.apply(r,i(n.map((function(t){return{text:t.name,value:t.id}})))),e.donors=r;case 6:case"end":return t.stop()}}),t)})),function(){var e=this,n=arguments;return new Promise((function(r,a){var o=t.apply(e,n);function s(t){l(o,r,a,s,i,"next",t)}function i(t){l(o,r,a,s,i,"throw",t)}s(void 0)}))})()}}};const p=(0,n(1900).Z)(f,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("validation-observer",{ref:"observer",attrs:{slim:""},scopedSlots:t._u([{key:"default",fn:function(e){var r=e.handleSubmit;return[n("b-form",{on:{submit:function(e){return e.stopPropagation(),e.preventDefault(),r(t.onSubmit)}}},[n("b-form-row",[n("b-col",{attrs:{md:""}},[n("validation-provider",{attrs:{name:t.$t("Name"),vid:"name",rules:{required:!0}},scopedSlots:t._u([{key:"default",fn:function(e){return[n("b-form-group",{attrs:{label:t.$t("Name"),state:t.getValidationState(e),"invalid-feedback":e.errors[0]}},[n("b-form-input",{attrs:{autocomplete:"off",reqired:"",autofocus:!t.budget,state:t.getValidationState(e)},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1)]}}],null,!0)})],1),t._v(" "),n("b-col",{attrs:{md:"3"}},[n("validation-provider",{attrs:{name:t.$t("Agreed amount"),vid:"agreed_amount",rules:{required:!0,decimal:!0,min_value:0}},scopedSlots:t._u([{key:"default",fn:function(e){return[n("b-form-group",{attrs:{label:t.$t("Agreed amount"),state:t.getValidationState(e),"invalid-feedback":e.errors[0],description:t.$t("Write decimal point as comma (,)")}},[n("b-input-group",{attrs:{append:t.settings["accounting.transactions.currency"]}},[n("b-form-input",{attrs:{autocomplete:"off",type:"number",required:"",step:".01",min:"0",state:t.getValidationState(e)},model:{value:t.form.agreed_amount,callback:function(e){t.$set(t.form,"agreed_amount",e)},expression:"form.agreed_amount"}})],1)],1)]}}],null,!0)})],1),t._v(" "),n("b-col",{attrs:{md:"3"}},[n("validation-provider",{attrs:{name:t.$t("Initial amount"),vid:"initial_amount",rules:{required:!0,decimal:!0,min_value:0}},scopedSlots:t._u([{key:"default",fn:function(e){return[n("b-form-group",{attrs:{label:t.$t("Initial amount"),state:t.getValidationState(e),"invalid-feedback":e.errors[0],description:t.$t("Write decimal point as comma (,)")}},[n("b-input-group",{attrs:{append:t.settings["accounting.transactions.currency"]}},[n("b-form-input",{attrs:{autocomplete:"off",type:"number",required:"",step:".01",min:"0",state:t.getValidationState(e)},model:{value:t.form.initial_amount,callback:function(e){t.$set(t.form,"initial_amount",e)},expression:"form.initial_amount"}})],1)],1)]}}],null,!0)})],1)],1),t._v(" "),n("b-form-row",[n("b-col",{attrs:{md:""}},[n("validation-provider",{attrs:{name:t.$t("Description"),vid:"description",rules:{}},scopedSlots:t._u([{key:"default",fn:function(e){return[n("b-form-group",{attrs:{label:t.$t("Description"),state:t.getValidationState(e),"invalid-feedback":e.errors[0]}},[n("b-form-textarea",{attrs:{autocomplete:"off",state:t.getValidationState(e)},model:{value:t.form.description,callback:function(e){t.$set(t.form,"description",e)},expression:"form.description"}})],1)]}}],null,!0)})],1)],1),t._v(" "),n("b-form-row",[n("b-col",{attrs:{sm:""}},[n("validation-provider",{attrs:{name:t.$t("Donor"),vid:"donor_id",rules:{}},scopedSlots:t._u([{key:"default",fn:function(e){return[n("b-form-group",{attrs:{label:t.$t("Donor"),state:t.getValidationState(e),"invalid-feedback":e.errors[0]}},[n("b-select",{attrs:{options:t.donors,state:t.getValidationState(e)},model:{value:t.form.donor_id,callback:function(e){t.$set(t.form,"donor_id",e)},expression:"form.donor_id"}})],1)]}}],null,!0)})],1),t._v(" "),n("b-col",{attrs:{sm:""}},[n("validation-provider",{attrs:{name:t.$t("Closing date"),vid:"closed_at",rules:{}},scopedSlots:t._u([{key:"default",fn:function(e){return[n("b-form-group",{attrs:{label:t.$t("Closing date"),state:t.getValidationState(e),"invalid-feedback":e.errors[0]}},[n("b-form-datepicker",{attrs:{autocomplete:"off","reset-button":"",state:t.getValidationState(e)},model:{value:t.form.closed_at,callback:function(e){t.$set(t.form,"closed_at",e)},expression:"form.closed_at"}})],1)]}}],null,!0)})],1)],1),t._v(" "),n("p",[n("b-form-checkbox",{model:{value:t.form.is_completed,callback:function(e){t.$set(t.form,"is_completed",e)},expression:"form.is_completed"}},[t._v("\n                "+t._s(t.$t("Completed"))+"\n            ")])],1),t._v(" "),n("p",{staticClass:"d-flex justify-content-between align-items-start"},[n("span",[n("b-button",{attrs:{type:"submit",variant:"primary",disabled:t.disabled}},[n("font-awesome-icon",{attrs:{icon:"check"}}),t._v("\n                    "+t._s(t.budget?t.$t("Update"):t.$t("Add"))+"\n                ")],1),t._v(" "),n("b-button",{attrs:{variant:"link",disabled:t.disabled},on:{click:function(e){return t.$emit("cancel")}}},[t._v("\n                    "+t._s(t.$t("Cancel"))+"\n                ")])],1),t._v(" "),t.budget&&t.budget.can_delete?n("b-button",{staticClass:"text-danger",attrs:{variant:"link",disabled:t.disabled},on:{click:t.onDelete}},[t._v("\n                "+t._s(t.$t("Delete"))+"\n            ")]):t._e()],1)],1)]}}])})}),[],!1,null,null,null).exports},9667:(t,e,n)=>{n.d(e,{Z:()=>d});var r=n(7757),a=n.n(r),o=n(5021);function s(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return i(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return i(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,a=function(){};return{s:a,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,s=!0,c=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return s=t.done,t},e:function(t){c=!0,o=t},f:function(){try{s||null==n.return||n.return()}finally{if(c)throw o}}}}function i(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function c(t,e,n,r,a,o,s){try{var i=t[o](s),c=i.value}catch(t){return void n(t)}i.done?e(c):Promise.resolve(c).then(r,a)}function l(t){return function(){var e=this,n=arguments;return new Promise((function(r,a){var o=t.apply(e,n);function s(t){c(o,r,a,s,i,"next",t)}function i(t){c(o,r,a,s,i,"throw",t)}s(void 0)}))}}const u={props:{category:{type:Object,required:!1},disabled:Boolean},data:function(){return{form:this.category?{name:this.category.name,parent_id:this.category.parent_id,description:this.category.description,enabled:this.category.enabled}:{name:null,parent_id:null,description:null,enabled:!0},tree:[],loaded:!1}},created:function(){var t=this;return l(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.fetchTree();case 2:t.loaded=!0;case 3:case"end":return e.stop()}}),e)})))()},methods:{getValidationState:function(t){var e=t.dirty,n=t.validated,r=t.valid;return e||n?void 0===r?null:r:null},onSubmit:function(){this.$emit("submit",this.form)},onDelete:function(){confirm(this.$t("Really delete this category?"))&&this.$emit("delete")},fetchTree:function(){var t=this;return l(a().mark((function e(){var n,r,i,c,l;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.Z.tree({exclude:null===(n=t.category)||void 0===n?void 0:n.id});case 2:r=e.sent,t.tree=[{text:" ",value:null}],i=s(r);try{for(i.s();!(c=i.n()).done;)l=c.value,t.fillTree(t.tree,l)}catch(t){i.e(t)}finally{i.f()}case 6:case"end":return e.stop()}}),e)})))()},fillTree:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r="";n>0&&(r+="&nbsp;".repeat(5*n)),r+=e.name,t.push({html:r,value:e.id});var a,o=s(e.children);try{for(o.s();!(a=o.n()).done;){var i=a.value;this.fillTree(t,i,n+1)}}catch(t){o.e(t)}finally{o.f()}}}};const d=(0,n(1900).Z)(u,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("validation-observer",{ref:"observer",attrs:{slim:""},scopedSlots:t._u([{key:"default",fn:function(e){var r=e.handleSubmit;return[n("b-form",{on:{submit:function(e){return e.stopPropagation(),e.preventDefault(),r(t.onSubmit)}}},[n("b-form-row",[n("b-col",{attrs:{md:""}},[n("validation-provider",{attrs:{name:t.$t("Name"),vid:"name",rules:{required:!0}},scopedSlots:t._u([{key:"default",fn:function(e){return[n("b-form-group",{attrs:{label:t.$t("Name"),state:t.getValidationState(e),"invalid-feedback":e.errors[0]}},[n("b-form-input",{attrs:{autocomplete:"off",autofocus:!t.category,state:t.getValidationState(e)},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1)]}}],null,!0)})],1)],1),t._v(" "),n("b-form-row",[n("b-col",{attrs:{md:""}},[n("validation-provider",{attrs:{name:t.$t("Parent category"),vid:"parent_id",rules:{}},scopedSlots:t._u([{key:"default",fn:function(e){return[n("b-form-group",{attrs:{label:t.$t("Parent category"),state:t.getValidationState(e),"invalid-feedback":e.errors[0]}},[n("b-select",{attrs:{options:t.tree,state:t.getValidationState(e)},model:{value:t.form.parent_id,callback:function(e){t.$set(t.form,"parent_id",e)},expression:"form.parent_id"}})],1)]}}],null,!0)})],1)],1),t._v(" "),n("b-form-row",[n("b-col",{attrs:{md:""}},[n("validation-provider",{attrs:{name:t.$t("Description"),vid:"description",rules:{}},scopedSlots:t._u([{key:"default",fn:function(e){return[n("b-form-group",{attrs:{label:t.$t("Description"),state:t.getValidationState(e),"invalid-feedback":e.errors[0]}},[n("b-form-textarea",{attrs:{autocomplete:"off",state:t.getValidationState(e)},model:{value:t.form.description,callback:function(e){t.$set(t.form,"description",e)},expression:"form.description"}})],1)]}}],null,!0)})],1)],1),t._v(" "),n("p",[n("b-form-checkbox",{model:{value:t.form.enabled,callback:function(e){t.$set(t.form,"enabled",e)},expression:"form.enabled"}},[t._v("\n                "+t._s(t.$t("Enabled"))+"\n            ")])],1),t._v(" "),n("p",{staticClass:"d-flex justify-content-between align-items-start"},[n("span",[n("b-button",{attrs:{type:"submit",variant:"primary",disabled:t.disabled||!t.loaded}},[n("font-awesome-icon",{attrs:{icon:"check"}}),t._v("\n                    "+t._s(t.category?t.$t("Update"):t.$t("Add"))+"\n                ")],1),t._v(" "),n("b-button",{attrs:{variant:"link",disabled:t.disabled||!t.loaded},on:{click:function(e){return t.$emit("cancel")}}},[t._v("\n                    "+t._s(t.$t("Cancel"))+"\n                ")])],1),t._v(" "),t.category&&t.category.can_delete?n("b-button",{staticClass:"text-danger",attrs:{variant:"link",disabled:t.disabled||!t.loaded},on:{click:t.onDelete}},[t._v("\n                "+t._s(t.$t("Delete"))+"\n            ")]):t._e()],1)],1)]}}])})}),[],!1,null,null,null).exports},9208:(t,e,n)=>{n.d(e,{Z:()=>d});var r=n(7757),a=n.n(r),o=n(5778);function s(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return i(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return i(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,a=function(){};return{s:a,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,s=!0,c=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return s=t.done,t},e:function(t){c=!0,o=t},f:function(){try{s||null==n.return||n.return()}finally{if(c)throw o}}}}function i(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function c(t,e,n,r,a,o,s){try{var i=t[o](s),c=i.value}catch(t){return void n(t)}i.done?e(c):Promise.resolve(c).then(r,a)}function l(t){return function(){var e=this,n=arguments;return new Promise((function(r,a){var o=t.apply(e,n);function s(t){c(o,r,a,s,i,"next",t)}function i(t){c(o,r,a,s,i,"throw",t)}s(void 0)}))}}const u={props:{project:{type:Object,required:!1},disabled:Boolean},data:function(){return{form:this.project?{name:this.project.name,parent_id:this.project.parent_id,description:this.project.description,enabled:this.project.enabled}:{name:null,parent_id:null,description:null,enabled:!0},tree:[],loaded:!1}},created:function(){var t=this;return l(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.fetchTree();case 2:t.loaded=!0;case 3:case"end":return e.stop()}}),e)})))()},methods:{getValidationState:function(t){var e=t.dirty,n=t.validated,r=t.valid;return e||n?void 0===r?null:r:null},onSubmit:function(){this.$emit("submit",this.form)},onDelete:function(){confirm(this.$t("Really delete this project?"))&&this.$emit("delete")},fetchTree:function(){var t=this;return l(a().mark((function e(){var n,r,i,c,l;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.Z.tree({exclude:null===(n=t.project)||void 0===n?void 0:n.id});case 2:r=e.sent,t.tree=[{text:" ",value:null}],i=s(r);try{for(i.s();!(c=i.n()).done;)l=c.value,t.fillTree(t.tree,l)}catch(t){i.e(t)}finally{i.f()}case 6:case"end":return e.stop()}}),e)})))()},fillTree:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r="";n>0&&(r+="&nbsp;".repeat(5*n)),r+=e.name,t.push({html:r,value:e.id});var a,o=s(e.children);try{for(o.s();!(a=o.n()).done;){var i=a.value;this.fillTree(t,i,n+1)}}catch(t){o.e(t)}finally{o.f()}}}};const d=(0,n(1900).Z)(u,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("validation-observer",{ref:"observer",attrs:{slim:""},scopedSlots:t._u([{key:"default",fn:function(e){var r=e.handleSubmit;return[n("b-form",{on:{submit:function(e){return e.stopPropagation(),e.preventDefault(),r(t.onSubmit)}}},[n("b-form-row",[n("b-col",{attrs:{md:""}},[n("validation-provider",{attrs:{name:t.$t("Name"),vid:"name",rules:{required:!0}},scopedSlots:t._u([{key:"default",fn:function(e){return[n("b-form-group",{attrs:{label:t.$t("Name"),state:t.getValidationState(e),"invalid-feedback":e.errors[0]}},[n("b-form-input",{attrs:{autocomplete:"off",autofocus:!t.project,state:t.getValidationState(e)},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1)]}}],null,!0)})],1)],1),t._v(" "),n("b-form-row",[n("b-col",{attrs:{md:""}},[n("validation-provider",{attrs:{name:t.$t("Parent project"),vid:"parent_id",rules:{}},scopedSlots:t._u([{key:"default",fn:function(e){return[n("b-form-group",{attrs:{label:t.$t("Parent project"),state:t.getValidationState(e),"invalid-feedback":e.errors[0]}},[n("b-select",{attrs:{options:t.tree,state:t.getValidationState(e)},model:{value:t.form.parent_id,callback:function(e){t.$set(t.form,"parent_id",e)},expression:"form.parent_id"}})],1)]}}],null,!0)})],1)],1),t._v(" "),n("b-form-row",[n("b-col",{attrs:{md:""}},[n("validation-provider",{attrs:{name:t.$t("Description"),vid:"description",rules:{}},scopedSlots:t._u([{key:"default",fn:function(e){return[n("b-form-group",{attrs:{label:t.$t("Description"),state:t.getValidationState(e),"invalid-feedback":e.errors[0]}},[n("b-form-textarea",{attrs:{autocomplete:"off",state:t.getValidationState(e)},model:{value:t.form.description,callback:function(e){t.$set(t.form,"description",e)},expression:"form.description"}})],1)]}}],null,!0)})],1)],1),t._v(" "),n("p",[n("b-form-checkbox",{model:{value:t.form.enabled,callback:function(e){t.$set(t.form,"enabled",e)},expression:"form.enabled"}},[t._v("\n                "+t._s(t.$t("Enabled"))+"\n            ")])],1),t._v(" "),n("p",{staticClass:"d-flex justify-content-between align-items-start"},[n("span",[n("b-button",{attrs:{type:"submit",variant:"primary",disabled:t.disabled||!t.loaded}},[n("font-awesome-icon",{attrs:{icon:"check"}}),t._v("\n                    "+t._s(t.project?t.$t("Update"):t.$t("Add"))+"\n                ")],1),t._v(" "),n("b-button",{attrs:{variant:"link",disabled:t.disabled||!t.loaded},on:{click:function(e){return t.$emit("cancel")}}},[t._v("\n                    "+t._s(t.$t("Cancel"))+"\n                ")])],1),t._v(" "),t.project&&t.project.can_delete?n("b-button",{staticClass:"text-danger",attrs:{variant:"link",disabled:t.disabled||!t.loaded},on:{click:t.onDelete}},[t._v("\n                "+t._s(t.$t("Delete"))+"\n            ")]):t._e()],1)],1)]}}])})}),[],!1,null,null,null).exports},3530:(t,e,n)=>{n.r(e),n.d(e,{default:()=>p});var r=n(7757),a=n.n(r),o=n(8471),s=n(8518),i=n(5197),c=n(8158),l=n(3071);function u(t,e,n,r,a,o,s){try{var i=t[o](s),c=i.value}catch(t){return void n(t)}i.done?e(c):Promise.resolve(c).then(r,a)}function d(t){return function(){var e=this,n=arguments;return new Promise((function(r,a){var o=t.apply(e,n);function s(t){u(o,r,a,s,i,"next",t)}function i(t){u(o,r,a,s,i,"throw",t)}s(void 0)}))}}const f={components:{TwoColListGroupItem:s.Z,EmailLink:c.Z,PhoneLink:i.Z,MapsLink:l.Z},props:{id:{required:!0}},data:function(){return{supplier:null}},created:function(){var t=this;return d(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.fetchSupplier();case 1:case"end":return e.stop()}}),e)})))()},methods:{fetchSupplier:function(){var t=this;return d(a().mark((function e(){var n;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,o.Z.find(t.id,{with_spending:!0});case 3:n=e.sent,t.supplier=n.data,e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),alert(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))()}}};const p=(0,n(1900).Z)(f,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.supplier?n("b-list-group",{staticClass:"mb-3",attrs:{flush:""}},[n("two-col-list-group-item",{attrs:{title:t.$t("Name")}},[t._v("\n        "+t._s(t.supplier.name)+"\n    ")]),t._v(" "),t.supplier.category?n("two-col-list-group-item",{attrs:{title:t.$t("Category")}},[t._v("\n        "+t._s(t.supplier.category)+"\n    ")]):t._e(),t._v(" "),t.supplier.address?n("two-col-list-group-item",{attrs:{title:t.$t("Address")}},[n("maps-link",{attrs:{label:t.supplier.address,query:t.supplier.address,"place-id":t.supplier.place_id}})],1):t._e(),t._v(" "),t.supplier.phone?n("two-col-list-group-item",{attrs:{title:t.$t("Phone")}},[n("phone-link",{attrs:{value:t.supplier.phone}})],1):t._e(),t._v(" "),t.supplier.mobile?n("two-col-list-group-item",{attrs:{title:t.$t("Mobile")}},[n("phone-link",{attrs:{value:t.supplier.mobile,mobile:""}})],1):t._e(),t._v(" "),t.supplier.email?n("two-col-list-group-item",{attrs:{title:t.$t("E-Mail Address")}},[n("email-link",{attrs:{value:t.supplier.email}})],1):t._e(),t._v(" "),t.supplier.website?n("two-col-list-group-item",{attrs:{title:t.$t("Website")}},[n("a",{attrs:{href:t.supplier.website,target:"_blank"}},[t._v(t._s(t.supplier.website))])]):t._e(),t._v(" "),t.supplier.tax_number?n("two-col-list-group-item",{attrs:{title:t.$t("Tax number")}},[t._v("\n        "+t._s(t.supplier.tax_number)+"\n    ")]):t._e(),t._v(" "),t.supplier.tax_office?n("two-col-list-group-item",{attrs:{title:t.$t("Tax office")}},[t._v("\n        "+t._s(t.supplier.tax_office)+"\n    ")]):t._e(),t._v(" "),t.supplier.bank?n("two-col-list-group-item",{attrs:{title:t.$t("Bank")}},[t._v("\n        "+t._s(t.supplier.bank)+"\n    ")]):t._e(),t._v(" "),t.supplier.iban?n("two-col-list-group-item",{attrs:{title:t.$t("IBAN")}},[t._v("\n        "+t._s(t.supplier.iban)+"\n    ")]):t._e(),t._v(" "),t.supplier.remarks?n("two-col-list-group-item",{attrs:{title:t.$t("Remarks")}},[t._v("\n        "+t._s(t.supplier.remarks)+"\n    ")]):t._e(),t._v(" "),t.supplier.spending?n("two-col-list-group-item",{attrs:{title:t.$t("Spending")}},[t._v("\n        "+t._s(t._f("decimalNumberFormat")(t.supplier.spending))+"\n    ")]):t._e()],1):n("p",[t._v("\n    "+t._s(t.$t("Loading..."))+"\n")])}),[],!1,null,null,null).exports},3154:(t,e,n)=>{n.d(e,{Z:()=>a});const r={props:{supplier:{type:Object,required:!1},disabled:Boolean},data:function(){return{form:this.supplier?{name:this.supplier.name,category:this.supplier.category,address:this.supplier.address,place_id:this.supplier.place_id,phone:this.supplier.phone,mobile:this.supplier.mobile,email:this.supplier.email,website:this.supplier.website,tax_number:this.supplier.tax_number,tax_office:this.supplier.tax_office,bank:this.supplier.bank,iban:this.supplier.iban,remarks:this.supplier.remarks}:{name:null,category:null,address:null,place_id:null,phone:null,mobile:null,email:null,website:null,tax_number:null,tax_office:null,bank:null,iban:null,remarks:null}}},methods:{getValidationState:function(t){var e=t.dirty,n=t.validated,r=t.valid;return e||n?void 0===r?null:r:null},onSubmit:function(){this.$emit("submit",this.form)},onDelete:function(){confirm(this.$t("Should this supplier really be deleted?"))&&this.$emit("delete")}}};const a=(0,n(1900).Z)(r,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("validation-observer",{ref:"observer",attrs:{slim:""},scopedSlots:t._u([{key:"default",fn:function(e){var r=e.handleSubmit;return[n("b-form",{on:{submit:function(e){return e.stopPropagation(),e.preventDefault(),r(t.onSubmit)}}},[n("b-form-row",[n("b-col",{attrs:{md:""}},[n("validation-provider",{attrs:{name:t.$t("Name"),vid:"name",rules:{required:!0}},scopedSlots:t._u([{key:"default",fn:function(e){return[n("b-form-group",{attrs:{label:t.$t("Name"),state:t.getValidationState(e),"invalid-feedback":e.errors[0]}},[n("b-form-input",{attrs:{autocomplete:"off",autofocus:!t.supplier,state:t.getValidationState(e)},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1)]}}],null,!0)})],1),t._v(" "),n("b-col",{attrs:{md:""}},[n("validation-provider",{attrs:{name:t.$t("Category"),vid:"category",rules:{}},scopedSlots:t._u([{key:"default",fn:function(e){return[n("b-form-group",{attrs:{label:t.$t("Category"),state:t.getValidationState(e),"invalid-feedback":e.errors[0]}},[n("b-form-input",{attrs:{autocomplete:"off",state:t.getValidationState(e)},model:{value:t.form.category,callback:function(e){t.$set(t.form,"category",e)},expression:"form.category"}})],1)]}}],null,!0)})],1)],1),t._v(" "),n("b-form-row",[n("b-col",{attrs:{md:"10"}},[n("validation-provider",{attrs:{name:t.$t("Address"),vid:"address",rules:{}},scopedSlots:t._u([{key:"default",fn:function(e){return[n("b-form-group",{attrs:{label:t.$t("Address"),state:t.getValidationState(e),"invalid-feedback":e.errors[0]}},[n("b-form-input",{attrs:{autocomplete:"off",state:t.getValidationState(e)},model:{value:t.form.address,callback:function(e){t.$set(t.form,"address",e)},expression:"form.address"}})],1)]}}],null,!0)})],1),t._v(" "),n("b-col",{attrs:{md:"2"}},[n("validation-provider",{attrs:{name:t.$t("Place ID"),vid:"place_id",rules:{}},scopedSlots:t._u([{key:"default",fn:function(e){return[n("b-form-group",{attrs:{label:t.$t("Place ID"),state:t.getValidationState(e),"invalid-feedback":e.errors[0]}},[n("b-form-input",{attrs:{autocomplete:"off",state:t.getValidationState(e)},model:{value:t.form.place_id,callback:function(e){t.$set(t.form,"place_id",e)},expression:"form.place_id"}})],1)]}}],null,!0)})],1)],1),t._v(" "),n("b-form-row",[n("b-col",{attrs:{md:""}},[n("validation-provider",{attrs:{name:t.$t("Phone"),vid:"phone",rules:{}},scopedSlots:t._u([{key:"default",fn:function(e){return[n("b-form-group",{attrs:{label:t.$t("Phone"),state:t.getValidationState(e),"invalid-feedback":e.errors[0]}},[n("b-form-input",{attrs:{autocomplete:"off",state:t.getValidationState(e)},model:{value:t.form.phone,callback:function(e){t.$set(t.form,"phone",e)},expression:"form.phone"}})],1)]}}],null,!0)})],1),t._v(" "),n("b-col",{attrs:{md:""}},[n("validation-provider",{attrs:{name:t.$t("Mobile"),vid:"mobile",rules:{}},scopedSlots:t._u([{key:"default",fn:function(e){return[n("b-form-group",{attrs:{label:t.$t("Mobile"),state:t.getValidationState(e),"invalid-feedback":e.errors[0]}},[n("b-form-input",{attrs:{autocomplete:"off",state:t.getValidationState(e)},model:{value:t.form.mobile,callback:function(e){t.$set(t.form,"mobile",e)},expression:"form.mobile"}})],1)]}}],null,!0)})],1)],1),t._v(" "),n("b-form-row",[n("b-col",{attrs:{md:""}},[n("validation-provider",{attrs:{name:t.$t("E-Mail Address"),vid:"email",rules:{email:!0}},scopedSlots:t._u([{key:"default",fn:function(e){return[n("b-form-group",{attrs:{label:t.$t("E-Mail Address"),state:t.getValidationState(e),"invalid-feedback":e.errors[0]}},[n("b-form-input",{attrs:{autocomplete:"off",type:"email",state:t.getValidationState(e)},model:{value:t.form.email,callback:function(e){t.$set(t.form,"email",e)},expression:"form.email"}})],1)]}}],null,!0)})],1),t._v(" "),n("b-col",{attrs:{md:""}},[n("validation-provider",{attrs:{name:t.$t("Website"),vid:"website",rules:{}},scopedSlots:t._u([{key:"default",fn:function(e){return[n("b-form-group",{attrs:{label:t.$t("Website"),state:t.getValidationState(e),"invalid-feedback":e.errors[0]}},[n("b-form-input",{attrs:{autocomplete:"off",state:t.getValidationState(e)},model:{value:t.form.website,callback:function(e){t.$set(t.form,"website",e)},expression:"form.website"}})],1)]}}],null,!0)})],1)],1),t._v(" "),n("b-form-row",[n("b-col",{attrs:{md:""}},[n("validation-provider",{attrs:{name:t.$t("Tax number"),vid:"tax_number",rules:{}},scopedSlots:t._u([{key:"default",fn:function(e){return[n("b-form-group",{attrs:{label:t.$t("Tax number"),state:t.getValidationState(e),"invalid-feedback":e.errors[0]}},[n("b-form-input",{attrs:{autocomplete:"off",state:t.getValidationState(e)},model:{value:t.form.tax_number,callback:function(e){t.$set(t.form,"tax_number",e)},expression:"form.tax_number"}})],1)]}}],null,!0)})],1),t._v(" "),n("b-col",{attrs:{md:""}},[n("validation-provider",{attrs:{name:t.$t("Tax office"),vid:"tax_office",rules:{}},scopedSlots:t._u([{key:"default",fn:function(e){return[n("b-form-group",{attrs:{label:t.$t("Tax office"),state:t.getValidationState(e),"invalid-feedback":e.errors[0]}},[n("b-form-input",{attrs:{autocomplete:"off",state:t.getValidationState(e)},model:{value:t.form.tax_office,callback:function(e){t.$set(t.form,"tax_office",e)},expression:"form.tax_office"}})],1)]}}],null,!0)})],1)],1),t._v(" "),n("b-form-row",[n("b-col",{attrs:{md:""}},[n("validation-provider",{attrs:{name:t.$t("Bank"),vid:"bank",rules:{}},scopedSlots:t._u([{key:"default",fn:function(e){return[n("b-form-group",{attrs:{label:t.$t("Bank"),state:t.getValidationState(e),"invalid-feedback":e.errors[0]}},[n("b-form-input",{attrs:{autocomplete:"off",state:t.getValidationState(e)},model:{value:t.form.bank,callback:function(e){t.$set(t.form,"bank",e)},expression:"form.bank"}})],1)]}}],null,!0)})],1),t._v(" "),n("b-col",{attrs:{md:""}},[n("validation-provider",{attrs:{name:t.$t("IBAN"),vid:"iban",rules:{iban:!0}},scopedSlots:t._u([{key:"default",fn:function(e){return[n("b-form-group",{attrs:{label:t.$t("IBAN"),state:t.getValidationState(e),"invalid-feedback":e.errors[0]}},[n("b-form-input",{attrs:{autocomplete:"off",state:t.getValidationState(e)},model:{value:t.form.iban,callback:function(e){t.$set(t.form,"iban",e)},expression:"form.iban"}})],1)]}}],null,!0)})],1)],1),t._v(" "),n("b-form-row",[n("b-col",{attrs:{md:""}},[n("validation-provider",{attrs:{name:t.$t("Remarks"),vid:"remarks",rules:{}},scopedSlots:t._u([{key:"default",fn:function(e){return[n("b-form-group",{attrs:{label:t.$t("Remarks"),state:t.getValidationState(e),"invalid-feedback":e.errors[0]}},[n("b-form-input",{attrs:{autocomplete:"off",state:t.getValidationState(e)},model:{value:t.form.remarks,callback:function(e){t.$set(t.form,"remarks",e)},expression:"form.remarks"}})],1)]}}],null,!0)})],1)],1),t._v(" "),n("p",{staticClass:"d-flex justify-content-between align-items-start"},[n("span",[n("b-button",{attrs:{type:"submit",variant:"primary",disabled:t.disabled}},[n("font-awesome-icon",{attrs:{icon:"check"}}),t._v("\n                    "+t._s(t.supplier?t.$t("Update"):t.$t("Add"))+"\n                ")],1),t._v(" "),n("b-button",{attrs:{variant:"link",disabled:t.disabled},on:{click:function(e){return t.$emit("cancel")}}},[t._v("\n                    "+t._s(t.$t("Cancel"))+"\n                ")])],1),t._v(" "),t.supplier&&t.supplier.can_delete?n("b-button",{staticClass:"text-danger",attrs:{variant:"link",disabled:t.disabled},on:{click:t.onDelete}},[t._v("\n                "+t._s(t.$t("Delete"))+"\n            ")]):t._e()],1)],1)]}}])})}),[],!1,null,null,null).exports},2611:(t,e,n)=>{n.r(e),n.d(e,{default:()=>o});var r=n(8471);const a={components:{BaseTable:n(6951).Z},props:{id:{required:!0}},data:function(){return{transactionFields:[{key:"receipt_no",label:this.$t("Receipt No."),sortable:!0,class:"text-right fit"},{key:"date",label:this.$t("Date"),sortable:!0,formatter:this.dateFormat,class:"fit"},{key:"amount_formatted",label:this.$t("Amount"),formatter:function(t,e,n){var r=t;return"spending"==n.type&&(r="-"+r),r},class:"text-right fit",tdClass:function(t,e,n){return"spending"==n.type?"text-danger":"text-success"}},{key:"category_full_name",label:this.$t("Category")},{key:"description",label:this.$t("Description")},{key:"attendee",label:this.$t("Attendee")},{key:"created_at",label:this.$t("Registered"),sortable:!0,formatter:this.dateTimeFormat,class:"fit"}]}},methods:{fetchTransactions:function(t){return r.Z.transactions(this.id,t)}}};const o=(0,n(1900).Z)(a,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"mt-3"},[n("base-table",{ref:"table",attrs:{id:"suppliers-transactons-table",fields:t.transactionFields,"api-method":t.fetchTransactions,"default-sort-by":"created_at","default-sort-desc":"","empty-text":t.$t("No data registered."),"items-per-page":25},scopedSlots:t._u([{key:"cell(receipt_no)",fn:function(e){return[n("router-link",{attrs:{to:{name:"accounting.transactions.show",params:{id:e.item.id}}}},[t._v("\n                "+t._s(e.value)+"\n            ")])]}}])})],1)}),[],!1,null,null,null).exports},8851:(t,e,n)=>{n.d(e,{Z:()=>T});var r=n(7757),a=n.n(r),o=n(381),s=n.n(o),i=n(1787),c=n(5021),l=n(5778),u=n(8471),d=n(6409),f=n(5197),p=n(8158),m=n(3071);const v={components:{EmailLink:p.Z,PhoneLink:f.Z,MapsLink:m.Z},props:{supplier:{required:!0}}};var h=n(1900);const b=(0,h.Z)(v,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("dl",{staticClass:"row"},[n("dt",{staticClass:"col-sm-3"},[t._v(t._s(t.$t("Name")))]),t._v(" "),n("dd",{staticClass:"col-sm-9"},[t._v(t._s(t.supplier.name))]),t._v(" "),t.supplier.category?[n("dt",{staticClass:"col-sm-3"},[t._v("\n            "+t._s(t.$t("Category"))+"\n        ")]),t._v(" "),n("dd",{staticClass:"col-sm-9"},[t._v("\n            "+t._s(t.supplier.category)+"\n        ")])]:t._e(),t._v(" "),t.supplier.address?[n("dt",{staticClass:"col-sm-3"},[t._v(t._s(t.$t("Address")))]),t._v(" "),n("dd",{staticClass:"col-sm-9"},[n("maps-link",{attrs:{label:t.supplier.address,query:t.supplier.address,"place-id":t.supplier.place_id}})],1)]:t._e(),t._v(" "),t.supplier.phone?[n("dt",{staticClass:"col-sm-3"},[t._v(t._s(t.$t("Phone")))]),t._v(" "),n("dd",{staticClass:"col-sm-9"},[n("phone-link",{attrs:{value:t.supplier.phone}})],1)]:t._e(),t._v(" "),t.supplier.mobile?[n("dt",{staticClass:"col-sm-3"},[t._v(t._s(t.$t("Mobile")))]),t._v(" "),n("dd",{staticClass:"col-sm-9"},[n("phone-link",{attrs:{value:t.supplier.mobile,mobile:""}})],1)]:t._e(),t._v(" "),t.supplier.email?[n("dt",{staticClass:"col-sm-3"},[t._v(t._s(t.$t("E-Mail Address")))]),t._v(" "),n("dd",{staticClass:"col-sm-9"},[n("email-link",{attrs:{value:t.supplier.email}})],1)]:t._e(),t._v(" "),t.supplier.tax_number&&t.supplier.tax_office?[n("dt",{staticClass:"col-sm-3"},[t._v(t._s(t.$t("Tax number")))]),t._v(" "),n("dd",{staticClass:"col-sm-9"},[t._v("\n            "+t._s(t.supplier.tax_number)+", "+t._s(t.supplier.tax_office)+"\n        ")])]:t._e(),t._v(" "),t.supplier.bank&&t.supplier.iban?[n("dt",{staticClass:"col-sm-3"},[t._v(t._s(t.$t("Bank")))]),t._v(" "),n("dd",{staticClass:"col-sm-9"},[t._v("\n            "+t._s(t.supplier.bank)),n("br"),t._v(t._s(t.supplier.iban)+"\n        ")])]:t._e(),t._v(" "),t.supplier.remarks?[n("dt",{staticClass:"col-sm-3"},[t._v(t._s(t.$t("Remarks")))]),t._v(" "),n("dd",{staticClass:"col-sm-9"},[t._v("\n            "+t._s(t.supplier.remarks)+"\n        ")])]:t._e()],2)}),[],!1,null,null,null).exports;const _={props:{budget:{required:!0}}};const g=(0,h.Z)(_,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("dl",{staticClass:"row"},[n("dt",{staticClass:"col-sm-4"},[t._v(t._s(t.$t("Name")))]),t._v(" "),n("dd",{staticClass:"col-sm-8"},[t._v(t._s(t.budget.name))]),t._v(" "),n("dt",{staticClass:"col-sm-4"},[t._v(t._s(t.$t("Agreed amount")))]),t._v(" "),n("dd",{staticClass:"col-sm-8"},[t._v("\n        "+t._s(t.budget.agreed_amount_formatted)+"\n    ")]),t._v(" "),n("dt",{staticClass:"col-sm-4"},[t._v(t._s(t.$t("Balance")))]),t._v(" "),n("dd",{staticClass:"col-sm-8"},[t._v("\n        "+t._s(t.budget.balance_formatted)+"\n    ")])])}),[],!1,null,null,null).exports;var y=n(5817),w=n(629);function x(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=S(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,a=function(){};return{s:a,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,s=!0,i=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return s=t.done,t},e:function(t){i=!0,o=t},f:function(){try{s||null==n.return||n.return()}finally{if(i)throw o}}}}function k(t,e,n,r,a,o,s){try{var i=t[o](s),c=i.value}catch(t){return void n(t)}i.done?e(c):Promise.resolve(c).then(r,a)}function $(t){return function(){var e=this,n=arguments;return new Promise((function(r,a){var o=t.apply(e,n);function s(t){k(o,r,a,s,i,"next",t)}function i(t){k(o,r,a,s,i,"throw",t)}s(void 0)}))}}function C(t){return function(t){if(Array.isArray(t))return O(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||S(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function S(t,e){if(t){if("string"==typeof t)return O(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?O(t,e):void 0}}function O(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function j(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function B(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?j(Object(n),!0).forEach((function(e){P(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):j(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function P(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}const D={components:{ThumbnailImage:d.Z,SupplierInfo:b,BudgetInfo:g},props:{transaction:{type:Object,required:!1},defaultReceiptNumber:{required:!1,type:Number},disabled:Boolean,useSecondaryCategories:Boolean,useLocations:Boolean,useCostCenters:Boolean},data:function(){return{form:this.transaction?{receipt_no:this.transaction.receipt_no,date:this.transaction.date,type:this.transaction.type,amount:this.transaction.amount,fees:this.transaction.fees,attendee:this.transaction.attendee,category_id:this.transaction.category_id,secondary_category:this.transaction.secondary_category,project_id:this.transaction.project_id,location:this.transaction.location,cost_center:this.transaction.cost_center,description:this.transaction.description,supplier_id:this.transaction.supplier_id,budget_id:this.transaction.budget_id,remarks:this.transaction.remarks,delete_receipts:[]}:{receipt_no:this.defaultReceiptNumber?this.defaultReceiptNumber:null,date:s()().format(s().HTML5_FMT.DATE),type:null,amount:null,fees:null,attendee:null,category_id:null,secondary_category:null,project_id:null,location:null,cost_center:null,description:null,supplier_id:null,budget_id:null,remarks:null,delete_receipts:[]},loaded:!1,typeOptions:[{value:"income",text:this.$t("Income")},{value:"spending",text:this.$t("Spending")}],attendees:[],categories:[],secondaryCategories:[],projects:[],locations:[],costCenters:[],suppliers:[],budgets:[],selectedSupplier:null,selectedBudget:null}},computed:B(B({},(0,w.rn)(["settings"])),{},{secondaryCategoryOptions:function(){var t=[{value:null,text:"- ".concat(this.$t("Secondary Category")," -")}];return t.push.apply(t,C(this.secondaryCategories.map((function(t){return{value:t,text:t}})))),t},locationOptions:function(){var t=[{value:null,text:"- ".concat(this.$t("Location")," -")}];return t.push.apply(t,C(this.locations.map((function(t){return{value:t,text:t}})))),t},costCenterOptions:function(){var t=[{value:null,text:"- ".concat(this.$t("Cost Center")," -")}];return t.push.apply(t,C(this.costCenters.map((function(t){return{value:t,text:t}})))),t},supplierOptions:function(){var t=[{value:null,text:"- ".concat(this.$t("Supplier")," -")}];return t.push.apply(t,C(this.suppliers.map((function(t){return{value:t.id,text:t.name+(t.category?" (".concat(t.category,")"):"")}})))),t},budgetOptions:function(){var t=this,e=[{value:null,text:"- ".concat(this.$t("No budget")," -")}];return e.push.apply(e,C(this.budgets.filter((function(e){var n;return!e.is_completed||(null===(n=t.transaction)||void 0===n?void 0:n.budget_id)==e.id})).map((function(t){return{value:t.id,text:t.name}})))),e}}),watch:{form:{handler:function(t){var e=this;return $(a().mark((function n(){return a().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,e.loadSupplierDetails(t.supplier_id);case 2:return n.next=4,e.loadBudgetDetails(t.budget_id);case 4:case"end":return n.stop()}}),n)})))()},deep:!0}},created:function(){var t=this;return $(a().mark((function e(){var n;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.fetchCategoryTree();case 2:return e.next=4,t.fetchProjectTree();case 4:return e.next=6,i.Z.taxonomies();case 6:return n=e.sent,t.useSecondaryCategories&&(t.secondaryCategories=n.secondary_categories),t.useLocations&&(t.locations=n.locations),t.useCostCenters&&(t.costCenters=n.cost_centers),t.attendees=n.attendees,e.next=13,u.Z.names();case 13:return t.suppliers=e.sent,e.next=16,y.Z.names();case 16:return t.budgets=e.sent,e.next=19,t.loadSupplierDetails(t.form.supplier_id);case 19:return e.next=21,t.loadBudgetDetails(t.form.budget_id);case 21:t.loaded=!0;case 22:case"end":return e.stop()}}),e)})))()},methods:{getValidationState:function(t){var e=t.dirty,n=t.validated,r=t.valid;return e||n?void 0===r?null:r:null},onSubmit:function(){this.$emit("submit",this.form)},onDelete:function(){confirm(this.$t("Do you really want to delete this transaction?"))&&this.$emit("delete")},fetchCategoryTree:function(){var t=this;return $(a().mark((function e(){var n,r,o,s,i;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.Z.tree({exclude:null===(n=t.category)||void 0===n?void 0:n.id});case 2:r=e.sent,t.categories=t.transaction?[]:[{text:"- "+t.$t("Category")+" -",value:null}],o=x(r);try{for(o.s();!(s=o.n()).done;)i=s.value,t.fillTree(t.categories,i)}catch(t){o.e(t)}finally{o.f()}case 6:case"end":return e.stop()}}),e)})))()},fetchProjectTree:function(){var t=this;return $(a().mark((function e(){var n,r,o,s,i;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.Z.tree({exclude:null===(n=t.category)||void 0===n?void 0:n.id});case 2:r=e.sent,t.projects=[{text:"- "+t.$t("Project")+" -",value:null}],o=x(r);try{for(o.s();!(s=o.n()).done;)i=s.value,t.fillTree(t.projects,i)}catch(t){o.e(t)}finally{o.f()}case 6:case"end":return e.stop()}}),e)})))()},fillTree:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r="";n>0&&(r+="&nbsp;".repeat(5*n)),r+=e.name,t.push({html:r,value:e.id});var a,o=x(e.children);try{for(o.s();!(a=o.n()).done;){var s=a.value;this.fillTree(t,s,n+1)}}catch(t){o.e(t)}finally{o.f()}},loadSupplierDetails:function(t){var e=this;return $(a().mark((function n(){var r,o;return a().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!t||(null===(r=e.selectedSupplier)||void 0===r?void 0:r.id)==t){n.next=7;break}return o=e.suppliers.filter((function(e){return e.id==t}))[0],n.next=4,u.Z.find(o.slug);case 4:e.selectedSupplier=n.sent.data,n.next=8;break;case 7:!t&&e.selectedSupplier&&(e.selectedSupplier=null);case 8:case"end":return n.stop()}}),n)})))()},loadBudgetDetails:function(t){var e=this;return $(a().mark((function n(){var r;return a().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!t||(null===(r=e.selectedBudget)||void 0===r?void 0:r.id)==t){n.next=6;break}return n.next=3,y.Z.find(t);case 3:e.selectedBudget=n.sent.data,n.next=7;break;case 6:!t&&e.selectedBudget&&(e.selectedBudget=null);case 7:case"end":return n.stop()}}),n)})))()}}};const T=(0,h.Z)(D,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("validation-observer",{ref:"observer",attrs:{slim:""},scopedSlots:t._u([{key:"default",fn:function(e){var r=e.handleSubmit;return[n("b-form",{on:{submit:function(e){return e.stopPropagation(),e.preventDefault(),r(t.onSubmit)}}},[n("b-form-row",[n("b-col",{attrs:{sm:"auto"}},[n("validation-provider",{attrs:{name:t.$t("Receipt No."),vid:"receipt_no",rules:{required:!0,integer:!0}},scopedSlots:t._u([{key:"default",fn:function(e){return[n("b-form-group",{attrs:{label:t.$t("Receipt No."),state:t.getValidationState(e),"invalid-feedback":e.errors[0]}},[n("b-form-input",{attrs:{autocomplete:"off",type:"number",required:"",step:"1",min:"1",autofocus:!t.transaction,state:t.getValidationState(e)},model:{value:t.form.receipt_no,callback:function(e){t.$set(t.form,"receipt_no",e)},expression:"form.receipt_no"}})],1)]}}],null,!0)})],1),t._v(" "),n("b-col",{attrs:{sm:"auto"}},[n("validation-provider",{attrs:{name:t.$t("Date"),vid:"date",rules:{required:!0,date:!0}},scopedSlots:t._u([{key:"default",fn:function(e){return[n("b-form-group",{attrs:{label:t.$t("Date"),state:t.getValidationState(e),"invalid-feedback":e.errors[0]}},[n("b-form-input",{attrs:{autocomplete:"off",type:"date",required:"",state:t.getValidationState(e)},model:{value:t.form.date,callback:function(e){t.$set(t.form,"date",e)},expression:"form.date"}})],1)]}}],null,!0)})],1),t._v(" "),n("b-col",{attrs:{sm:""}},[n("validation-provider",{attrs:{name:t.$t("Budget"),vid:"budget_id",rules:{}},scopedSlots:t._u([{key:"default",fn:function(e){return[n("b-form-group",{attrs:{label:t.$t("Budget"),state:t.getValidationState(e),"invalid-feedback":e.errors[0]}},[n("b-select",{attrs:{options:t.budgetOptions,disabled:!t.loaded,state:t.getValidationState(e)},model:{value:t.form.budget_id,callback:function(e){t.$set(t.form,"budget_id",e)},expression:"form.budget_id"}})],1)]}}],null,!0)}),t._v(" "),t.selectedBudget?n("BudgetInfo",{attrs:{budget:t.selectedBudget}}):t._e()],1)],1),t._v(" "),n("b-form-row",[n("b-col",{staticClass:"pb-3",attrs:{sm:"auto"}},[n("validation-provider",{attrs:{name:t.$t("Type"),vid:"type",rules:{required:!0}},scopedSlots:t._u([{key:"default",fn:function(e){return[n("b-form-group",{attrs:{label:t.$t("Type"),state:t.getValidationState(e),"invalid-feedback":e.errors[0]}},[n("b-form-radio-group",{attrs:{options:t.typeOptions,stacked:"",state:t.getValidationState(e)},model:{value:t.form.type,callback:function(e){t.$set(t.form,"type",e)},expression:"form.type"}})],1)]}}],null,!0)})],1),t._v(" "),n("b-col",{attrs:{sm:""}},[n("validation-provider",{attrs:{name:t.$t("Amount"),vid:"amount",rules:{required:!0,decimal:!0,min_value:0}},scopedSlots:t._u([{key:"default",fn:function(e){return[n("b-form-group",{attrs:{label:t.$t("Amount"),state:t.getValidationState(e),"invalid-feedback":e.errors[0],description:t.$t("Write decimal point as comma (,)")}},[n("b-input-group",{attrs:{append:t.settings["accounting.transactions.currency"]}},[n("b-form-input",{attrs:{autocomplete:"off",type:"number",required:"",step:".01",min:"0",state:t.getValidationState(e)},model:{value:t.form.amount,callback:function(e){t.$set(t.form,"amount",e)},expression:"form.amount"}})],1)],1)]}}],null,!0)})],1),t._v(" "),n("b-col",{attrs:{sm:""}},[n("validation-provider",{attrs:{name:t.$t("Transaction fees"),vid:"fees",rules:{decimal:!0,min_value:0}},scopedSlots:t._u([{key:"default",fn:function(e){return[n("b-form-group",{attrs:{label:t.$t("Transaction fees"),state:t.getValidationState(e),"invalid-feedback":e.errors[0],description:t.$t("Write decimal point as comma (,)")}},[n("b-input-group",{attrs:{append:t.settings["accounting.transactions.currency"]}},[n("b-form-input",{attrs:{autocomplete:"off",type:"number",step:".01",min:"0",state:t.getValidationState(e)},model:{value:t.form.fees,callback:function(e){t.$set(t.form,"fees",e)},expression:"form.fees"}})],1)],1)]}}],null,!0)})],1),t._v(" "),n("b-col",{attrs:{sm:""}},[n("validation-provider",{attrs:{name:t.$t("Attendee"),vid:"attendee",rules:{}},scopedSlots:t._u([{key:"default",fn:function(e){return[n("b-form-group",{attrs:{label:t.$t("Attendee"),state:t.getValidationState(e),"invalid-feedback":e.errors[0]}},[n("b-form-input",{attrs:{autocomplete:"off",list:"attendee-list",disabled:!t.loaded,state:t.getValidationState(e)},model:{value:t.form.attendee,callback:function(e){t.$set(t.form,"attendee",e)},expression:"form.attendee"}})],1),t._v(" "),n("b-form-datalist",{attrs:{id:"attendee-list",options:t.attendees}})]}}],null,!0)})],1)],1),t._v(" "),n("b-form-row",[n("b-col",{attrs:{sm:""}},[n("validation-provider",{attrs:{name:t.$t("Category"),vid:"category_id",rules:{required:!0}},scopedSlots:t._u([{key:"default",fn:function(e){return[n("b-form-group",{attrs:{label:t.$t("Category"),state:t.getValidationState(e),"invalid-feedback":e.errors[0]}},[n("b-select",{attrs:{required:"",options:t.categories,disabled:!t.loaded,state:t.getValidationState(e)},model:{value:t.form.category_id,callback:function(e){t.$set(t.form,"category_id",e)},expression:"form.category_id"}})],1)]}}],null,!0)})],1),t._v(" "),t.useSecondaryCategories?n("b-col",{attrs:{sm:""}},[n("validation-provider",{attrs:{name:t.$t("Secondary Category"),vid:"secondary_category",rules:{}},scopedSlots:t._u([{key:"default",fn:function(e){return[n("b-form-group",{attrs:{label:t.$t("Secondary Category"),state:t.getValidationState(e),"invalid-feedback":e.errors[0]}},[n("b-select",{attrs:{options:t.secondaryCategoryOptions,disabled:!t.loaded,state:t.getValidationState(e)},model:{value:t.form.secondary_category,callback:function(e){t.$set(t.form,"secondary_category",e)},expression:"form.secondary_category"}})],1)]}}],null,!0)})],1):t._e(),t._v(" "),n("b-col",{attrs:{sm:""}},[n("validation-provider",{attrs:{name:t.$t("Project"),vid:"project_id",rules:{}},scopedSlots:t._u([{key:"default",fn:function(e){return[n("b-form-group",{attrs:{label:t.$t("Project"),state:t.getValidationState(e),"invalid-feedback":e.errors[0]}},[n("b-select",{attrs:{options:t.projects,disabled:!t.loaded,state:t.getValidationState(e)},model:{value:t.form.project_id,callback:function(e){t.$set(t.form,"project_id",e)},expression:"form.project_id"}})],1)]}}],null,!0)})],1)],1),t._v(" "),n("b-form-row",[t.useLocations?n("b-col",{attrs:{sm:""}},[n("validation-provider",{attrs:{name:t.$t("Location"),vid:"location",rules:{}},scopedSlots:t._u([{key:"default",fn:function(e){return[n("b-form-group",{attrs:{label:t.$t("Location"),state:t.getValidationState(e),"invalid-feedback":e.errors[0]}},[n("b-select",{attrs:{options:t.locationOptions,disabled:!t.loaded,state:t.getValidationState(e)},model:{value:t.form.location,callback:function(e){t.$set(t.form,"location",e)},expression:"form.location"}})],1)]}}],null,!0)})],1):t._e(),t._v(" "),t.useCostCenters?n("b-col",{attrs:{sm:""}},[n("validation-provider",{attrs:{name:t.$t("Cost Center"),vid:"cost_center",rules:{}},scopedSlots:t._u([{key:"default",fn:function(e){return[n("b-form-group",{attrs:{label:t.$t("Cost Center"),state:t.getValidationState(e),"invalid-feedback":e.errors[0]}},[n("b-select",{attrs:{options:t.costCenterOptions,disabled:!t.loaded,state:t.getValidationState(e)},model:{value:t.form.cost_center,callback:function(e){t.$set(t.form,"cost_center",e)},expression:"form.cost_center"}})],1)]}}],null,!0)})],1):t._e()],1),t._v(" "),n("b-form-row",[n("b-col",{attrs:{sm:""}},[n("validation-provider",{attrs:{name:t.$t("Description"),vid:"description",rules:{required:!0}},scopedSlots:t._u([{key:"default",fn:function(e){return[n("b-form-group",{attrs:{label:t.$t("Description"),state:t.getValidationState(e),"invalid-feedback":e.errors[0]}},[n("b-form-input",{attrs:{autocomplete:"off",required:"",state:t.getValidationState(e)},model:{value:t.form.description,callback:function(e){t.$set(t.form,"description",e)},expression:"form.description"}})],1)]}}],null,!0)})],1),t._v(" "),n("b-col",{attrs:{sm:""}},[n("validation-provider",{attrs:{name:t.$t("Supplier"),vid:"supplier_id",rules:{}},scopedSlots:t._u([{key:"default",fn:function(e){return[n("b-form-group",{attrs:{label:t.$t("Supplier"),state:t.getValidationState(e),"invalid-feedback":e.errors[0]}},[n("b-select",{attrs:{options:t.supplierOptions,disabled:!t.loaded,state:t.getValidationState(e)},model:{value:t.form.supplier_id,callback:function(e){t.$set(t.form,"supplier_id",e)},expression:"form.supplier_id"}})],1)]}}],null,!0)}),t._v(" "),t.selectedSupplier?n("SupplierInfo",{attrs:{supplier:t.selectedSupplier}}):t._e()],1)],1),t._v(" "),n("b-form-row",[n("b-col",{attrs:{sm:""}},[n("validation-provider",{attrs:{name:t.$t("Remarks"),vid:"remarks",rules:{}},scopedSlots:t._u([{key:"default",fn:function(e){return[n("b-form-group",{attrs:{label:t.$t("Remarks"),state:t.getValidationState(e),"invalid-feedback":e.errors[0]}},[n("b-form-input",{attrs:{autocomplete:"off",state:t.getValidationState(e)},model:{value:t.form.remarks,callback:function(e){t.$set(t.form,"remarks",e)},expression:"form.remarks"}})],1)]}}],null,!0)})],1)],1),t._v(" "),t.transaction&&t.transaction.receipt_pictures.length>0?n("b-form-row",{staticClass:"mb-3"},t._l(t.transaction.receipt_pictures,(function(e){return n("b-col",{key:e.url,staticClass:"mb-2",attrs:{cols:"auto"}},[e.thumbnail_url?n("ThumbnailImage",{attrs:{url:e.thumbnail_url,size:e.thumbnail_size}}):n("span",{staticClass:"display-4",attrs:{title:e.mime_type}},[n("font-awesome-icon",{attrs:{icon:"file"}})],1),t._v(" "),n("b-form-checkbox",{attrs:{value:e.name},model:{value:t.form.delete_receipts,callback:function(e){t.$set(t.form,"delete_receipts",e)},expression:"form.delete_receipts"}},[t._v("\n                    "+t._s(t.$t("Delete"))+"\n                ")])],1)})),1):t._e(),t._v(" "),n("p",{staticClass:"d-flex justify-content-between align-items-start"},[n("span",[n("b-button",{attrs:{type:"submit",variant:"primary",disabled:t.disabled||!t.loaded}},[n("font-awesome-icon",{attrs:{icon:"check"}}),t._v("\n                    "+t._s(t.transaction?t.$t("Update"):t.$t("Add"))+"\n                ")],1),t._v(" "),n("b-button",{attrs:{variant:"link",disabled:t.disabled||!t.loaded},on:{click:function(e){return t.$emit("cancel")}}},[t._v("\n                    "+t._s(t.$t("Cancel"))+"\n                ")])],1),t._v(" "),t.transaction&&t.transaction.can_delete?n("b-button",{staticClass:"text-danger",attrs:{variant:"link",disabled:t.disabled||!t.loaded},on:{click:t.onDelete}},[t._v("\n                "+t._s(t.$t("Delete"))+"\n            ")]):t._e()],1)],1)]}}])})}),[],!1,null,null,null).exports},6917:(t,e,n)=>{n.d(e,{Z:()=>a});const r={components:{BaseTable:n(6951).Z},props:{entries:{required:!0},showId:Boolean},data:function(){var t=this;return{fields:[{key:"created_at",label:this.$t("Date"),formatter:this.dateTimeFormat},{key:"user",label:this.$t("User"),formatter:function(t){return null==t?null:t.name}},{key:"event",label:this.$t("Action"),formatter:function(e){return"created"==e?t.$t("Created"):"updated"==e?t.$t("Updated"):"deleted"==e?t.$t("Deleted"):e},tdClass:function(t){return"created"==t?"text-success":"updated"==t?"text-info":"deleted"==t?"text-danger":null}},this.showId?{key:"transaction_id",label:this.$t("Transaction ID"),class:"fit text-right"}:null,{key:"changes",label:this.$t("Changes")}]}},methods:{refresh:function(){this.$refs.table.refresh()}}};const a=(0,n(1900).Z)(r,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("base-table",{ref:"table",attrs:{id:"transactions-history-table",fields:t.fields,"api-method":t.entries,"empty-text":t.$t("No entries found."),"items-per-page":10,"default-sort-by":"created_at","default-sort-desc":!0,"no-filter":""},scopedSlots:t._u([{key:"cell(transaction_id)",fn:function(e){return[n("router-link",{attrs:{to:{name:"accounting.transactions.show",params:{id:e.value}}}},[t._v("\n            "+t._s(e.value)+"\n        ")])]}},{key:"cell(changes)",fn:function(e){return[n("ul",{staticClass:"mb-0 list-unstyled"},t._l(e.value,(function(r,a){return n("li",{key:a},[t._v("\n                "+t._s(a)+":\n                "),"created"!==e.item.event?n("code",[t._v(t._s(null!==r.old?r.old:"null"))]):t._e(),t._v(" "),"updated"===e.item.event?n("font-awesome-icon",{attrs:{icon:"long-arrow-alt-right"}}):t._e(),t._v(" "),"deleted"!==e.item.event?n("code",[t._v(t._s(null!==r.new?r.new:"null"))]):t._e()],1)})),0)]}}])})}),[],!1,null,null,null).exports},6535:(t,e,n)=>{n.d(e,{Z:()=>u});var r=n(7757),a=n.n(r),o=n(1787),s=n(8256),i=n.n(s);function c(t,e,n,r,a,o,s){try{var i=t[o](s),c=i.value}catch(t){return void n(t)}i.done?e(c):Promise.resolve(c).then(r,a)}const l={components:{ThumbnailImage:n(6409).Z,FsLightbox:i()},props:{transaction:{required:!0},allowUpload:Boolean},data:function(){return{pictures:this.transaction.receipt_pictures,toggler:!1,source:void 0,isUploading:!1}},computed:{actualImages:function(){return this.pictures.filter((function(t){return"image"==t.type}))},icon:function(){return this.isUploading?"spinner":"upload"},iconSpin:function(){return 1==this.isUploading}},methods:{addReceiptPicture:function(t){var e,n=this;return(e=a().mark((function e(){var r;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!=t.target.files.length){e.next=3;break}return e.abrupt("return");case 3:return n.isUploading=!0,e.prev=4,e.next=7,o.Z.updateReceipt(n.transaction,t.target.files);case 7:r=e.sent,n.pictures=r,e.next=14;break;case 11:e.prev=11,e.t0=e.catch(4),alert(e.t0);case 14:n.isUploading=!1;case 15:case"end":return e.stop()}}),e,null,[[4,11]])})),function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function s(t){c(o,r,a,s,i,"next",t)}function i(t){c(o,r,a,s,i,"throw",t)}s(void 0)}))})()},openLightbox:function(t,e){t.preventDefault(),this.source=e,this.toggler=!this.toggler}}};const u=(0,n(1900).Z)(l,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[t.pictures.length>0?n("b-form-row",t._l(t.pictures,(function(e){return n("b-col",{key:e.url,staticClass:"mb-2",attrs:{cols:"auto"}},[n("a",{attrs:{href:e.url,target:"file"==e.type?"_blank":null,title:e.mime_type},on:{click:function(n){"image"==e.type&&t.openLightbox(n,e.url)}}},[e.thumbnail_url?n("ThumbnailImage",{attrs:{url:e.thumbnail_url,size:e.thumbnail_size}}):n("span",{staticClass:"display-4",attrs:{title:e.mime_type}},[n("font-awesome-icon",{attrs:{icon:"file"}})],1)],1),t._v(" "),e.thumbnail_url?t._e():[t._v("\n                "+t._s(e.mime_type)+" ("+t._s(e.file_size)+")\n            ")]],2)})),1):t._e(),t._v(" "),this.actualImages.length>0?n("FsLightbox",{key:this.actualImages.length,attrs:{toggler:t.toggler,source:t.source,sources:t.actualImages.map((function(t){return t.url}))}}):t._e(),t._v(" "),t.transaction.can_update&&t.allowUpload?[n("b-button",{attrs:{disabled:t.isUploading},on:{click:function(e){return t.$refs.fileInput.click()}}},[n("font-awesome-icon",{attrs:{icon:t.icon,spin:t.iconSpin}}),t._v("\n            "+t._s(t.$t("Add picture"))+"\n        ")],1),t._v(" "),n("input",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],ref:"fileInput",attrs:{type:"file",accept:"image/*,application/pdf",multiple:""},on:{change:t.addReceiptPicture}})]:t._e()],2)}),[],!1,null,null,null).exports},5359:(t,e,n)=>{n.d(e,{Z:()=>d});var r=n(7757),a=n.n(r),o=n(892);function s(t,e,n,r,a,o,s){try{var i=t[o](s),c=i.value}catch(t){return void n(t)}i.done?e(c):Promise.resolve(c).then(r,a)}function i(t){return function(){var e=this,n=arguments;return new Promise((function(r,a){var o=t.apply(e,n);function i(t){s(o,r,a,i,c,"next",t)}function c(t){s(o,r,a,i,c,"throw",t)}i(void 0)}))}}const c=function(t){return i(a().mark((function e(){var n;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=(0,o.BC)("api.roles.index",t),e.next=3,o.hi.get(n);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})))()};function l(t,e,n,r,a,o,s){try{var i=t[o](s),c=i.value}catch(t){return void n(t)}i.done?e(c):Promise.resolve(c).then(r,a)}const u={props:{wallet:{type:Object,required:!1},disabled:Boolean},data:function(){return{form:this.wallet?{name:this.wallet.name,roles:this.wallet.roles.map((function(t){return t.id}))}:{name:null,roles:[]},roles:[]}},created:function(){this.fetchRoles()},methods:{getValidationState:function(t){var e=t.dirty,n=t.validated,r=t.valid;return e||n?void 0===r?null:r:null},onSubmit:function(){this.$emit("submit",this.form)},onDelete:function(){confirm(this.$t("Really delete this wallet?"))&&this.$emit("delete")},fetchRoles:function(){var t,e=this;return(t=a().mark((function t(){var n;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,c();case 2:n=t.sent,e.roles=n.data.map((function(t){return{text:t.name,value:t.id}}));case 4:case"end":return t.stop()}}),t)})),function(){var e=this,n=arguments;return new Promise((function(r,a){var o=t.apply(e,n);function s(t){l(o,r,a,s,i,"next",t)}function i(t){l(o,r,a,s,i,"throw",t)}s(void 0)}))})()}}};const d=(0,n(1900).Z)(u,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("validation-observer",{ref:"observer",attrs:{slim:""},scopedSlots:t._u([{key:"default",fn:function(e){var r=e.handleSubmit;return[n("b-form",{on:{submit:function(e){return e.stopPropagation(),e.preventDefault(),r(t.onSubmit)}}},[n("b-form-row",[n("b-col",{attrs:{md:""}},[n("validation-provider",{attrs:{name:t.$t("Name"),vid:"name",rules:{required:!0}},scopedSlots:t._u([{key:"default",fn:function(e){return[n("b-form-group",{attrs:{label:t.$t("Name"),state:t.getValidationState(e),"invalid-feedback":e.errors[0]}},[n("b-form-input",{attrs:{autocomplete:"off",autofocus:!t.wallet,state:t.getValidationState(e)},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1)]}}],null,!0)})],1)],1),t._v(" "),n("b-card",{staticClass:"mb-4",attrs:{header:t.$t("User roles with access (Whitelist)"),"body-class":"pb-0"}},[n("p",[n("em",[t._v(t._s(t.$t("Specifying no role will allow access by all roles.")))])]),t._v(" "),t.roles.length>0?n("b-form-group",{attrs:{label:t.$t("Roles")}},[n("b-form-checkbox-group",{attrs:{options:t.roles,stacked:""},model:{value:t.form.roles,callback:function(e){t.$set(t.form,"roles",e)},expression:"form.roles"}})],1):[n("p",[n("em",[t._v(t._s(t.$t("No roles defined.")))])])]],2),t._v(" "),n("p",{staticClass:"d-flex justify-content-between align-items-start"},[n("span",[n("b-button",{attrs:{type:"submit",variant:"primary",disabled:t.disabled}},[n("font-awesome-icon",{attrs:{icon:"check"}}),t._v("\n                    "+t._s(t.wallet?t.$t("Update"):t.$t("Add"))+"\n                ")],1),t._v(" "),n("b-button",{attrs:{variant:"link",disabled:t.disabled},on:{click:function(e){return t.$emit("cancel")}}},[t._v("\n                    "+t._s(t.$t("Cancel"))+"\n                ")])],1),t._v(" "),t.wallet&&t.wallet.can_delete?n("b-button",{staticClass:"text-danger",attrs:{variant:"link",disabled:t.disabled},on:{click:t.onDelete}},[t._v("\n                "+t._s(t.$t("Delete"))+"\n            ")]):t._e()],1)],1)]}}])})}),[],!1,null,null,null).exports},2851:(t,e,n)=>{n.d(e,{Z:()=>a});const r={props:["value"]};const a=(0,n(1900).Z)(r,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("b-alert",{attrs:{variant:"danger",show:null!=t.value}},[n("b-row",{attrs:{"align-v":"center"}},[n("b-col",[n("font-awesome-icon",{attrs:{icon:"times-circle"}}),t._v("\n            "+t._s(t.$t("Error: {err}",{err:t.value}))+"\n        ")],1),t._v(" "),n("b-col",{attrs:{sm:"auto"}},[n("b-button",{staticClass:"float-right",attrs:{variant:"danger",size:"sm"},on:{click:function(e){return t.$emit("retry")}}},[n("font-awesome-icon",{attrs:{icon:"redo"}}),t._v("\n                "+t._s(t.$t("Retry"))+"\n            ")],1)],1)],1)],1)}),[],!1,null,null,null).exports},8158:(t,e,n)=>{n.d(e,{Z:()=>a});const r={props:{value:{required:!0,type:String},iconOnly:Boolean,labelOnly:Boolean},computed:{mailToHref:function(){return"mailto:".concat(this.value)}}};const a=(0,n(1900).Z)(r,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("span",[t.iconOnly?n("a",{staticClass:"btn btn-light btn-sm",attrs:{href:t.mailToHref}},[n("font-awesome-icon",{attrs:{icon:"envelope"}})],1):[t.labelOnly?t._e():n("font-awesome-icon",{attrs:{icon:"envelope"}}),t._v(" "),n("a",{attrs:{href:t.mailToHref}},[t._v(t._s(t.value))])]],2)}),[],!1,null,null,null).exports},3071:(t,e,n)=>{n.d(e,{Z:()=>a});const r={props:{label:{required:!0,type:String},query:{required:!0,type:String},placeId:{required:!1,type:String},iconOnly:Boolean,labelOnly:Boolean},computed:{mapsHref:function(){var t="https://www.google.com/maps/search/?api=1&query=".concat(this.query);return this.placeId&&(t+="&query_place_id=".concat(this.placeId)),encodeURI(t)}}};const a=(0,n(1900).Z)(r,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("span",[t.iconOnly?n("a",{staticClass:"btn btn-light btn-sm",attrs:{href:t.mapsHref,target:"_blank"}},[n("font-awesome-icon",{attrs:{icon:"map-marked-alt"}})],1):[t.labelOnly?t._e():n("font-awesome-icon",{attrs:{icon:"map-marked-alt"}}),t._v(" "),n("a",{attrs:{href:t.mapsHref,target:"_blank"}},[t._v(t._s(t.label))])]],2)}),[],!1,null,null,null).exports},5197:(t,e,n)=>{n.d(e,{Z:()=>a});const r={props:{value:{required:!0,type:String},iconOnly:Boolean,mobile:Boolean},computed:{telHref:function(){return"tel:".concat(this.value)},icon:function(){return this.mobile?"mobile-alt":"phone"}}};const a=(0,n(1900).Z)(r,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("span",[t.iconOnly?n("a",{staticClass:"btn btn-light btn-sm",attrs:{href:t.telHref}},[n("font-awesome-icon",{attrs:{icon:t.icon}})],1):[n("font-awesome-icon",{attrs:{icon:t.icon}}),t._v(" "),n("a",{attrs:{href:t.telHref}},[t._v(t._s(t.value))])]],2)}),[],!1,null,null,null).exports},6951:(t,e,n)=>{n.d(e,{Z:()=>u});var r=n(7757),a=n.n(r),o=n(2851),s=n(505),i=n(6281);function c(t,e,n,r,a,o,s){try{var i=t[o](s),c=i.value}catch(t){return void n(t)}i.done?e(c):Promise.resolve(c).then(r,a)}const l={components:{AlertWithRetry:o.Z,TableFilter:s.Z,TablePagination:i.Z},props:{id:{required:!0,type:String},fields:{required:!1,type:Array},apiMethod:{required:!0,type:Function},defaultSortBy:{required:!0,type:String},defaultSortDesc:{required:!1,type:Boolean,default:!1},emptyText:{required:!1,type:String},tbodyTrClass:{required:!1},itemsPerPage:{required:!1,type:Number,default:25},filterPlaceholder:{require:!1,type:String,default:function(){return this.$t("Type to search...")}},loadingLabel:{type:String,required:!1,default:function(){return this.$t("Loading...")}},noFilter:Boolean},data:function(){return{isBusy:!1,sortBy:sessionStorage.getItem(this.id+".sortBy")?sessionStorage.getItem(this.id+".sortBy"):this.defaultSortBy,sortDesc:sessionStorage.getItem(this.id+".sortDesc")?"true"==sessionStorage.getItem(this.id+".sortDesc"):this.defaultSortDesc,currentPage:sessionStorage.getItem(this.id+".currentPage")?parseInt(sessionStorage.getItem(this.id+".currentPage")):1,perPage:this.itemsPerPage,totalRows:0,errorText:null,filter:sessionStorage.getItem(this.id+".filter")?sessionStorage.getItem(this.id+".filter"):""}},watch:{filter:function(){this.currentPage=1}},methods:{itemProvider:function(t){var e,n=this;return(e=a().mark((function e(){var r,o;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.errorText=null,r={filter:t.filter,page:t.currentPage,pageSize:t.perPage,sortBy:t.sortBy,sortDirection:t.sortDesc?"desc":"asc"},e.prev=2,e.next=5,n.apiMethod(r);case 5:return o=e.sent,n.totalRows=o.meta?o.meta.total:0,n.$emit("metadata",o.meta),o.meta&&t.perPage!=o.meta.per_page&&console.error("Table ".concat(n.id,": Discrepancies detected between requested items per page (").concat(t.perPage,") and returned items per page (").concat(o.meta.per_page,").")),sessionStorage.setItem(n.id+".sortBy",t.sortBy),sessionStorage.setItem(n.id+".sortDesc",t.sortDesc),sessionStorage.setItem(n.id+".currentPage",t.currentPage),t.filter.length>0?sessionStorage.setItem(n.id+".filter",t.filter):sessionStorage.removeItem(n.id+".filter"),e.abrupt("return",o.data||[]);case 16:return e.prev=16,e.t0=e.catch(2),n.errorText=e.t0,n.totalRows=0,sessionStorage.removeItem(n.id+".sortBy"),sessionStorage.removeItem(n.id+".sortDesc"),sessionStorage.removeItem(n.id+".currentPage"),sessionStorage.removeItem(n.id+".filter"),e.abrupt("return",[]);case 25:case"end":return e.stop()}}),e,null,[[2,16]])})),function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function s(t){c(o,r,a,s,i,"next",t)}function i(t){c(o,r,a,s,i,"throw",t)}s(void 0)}))})()},refresh:function(){this.$root.$emit("bv::refresh::table",this.id)}}};const u=(0,n(1900).Z)(l,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("alert-with-retry",{attrs:{value:t.errorText},on:{retry:t.refresh}}),t._v(" "),t._t("top"),t._v(" "),n("b-form-row",[t.$slots["filter-prepend"]||t.$scopedSlots["filter-prepend"]?n("b-col",{attrs:{cols:"auto"}},[t._t("filter-prepend",null,{filter:t.filter})],2):t._e(),t._v(" "),n("b-col",[t.noFilter?t._e():n("table-filter",{attrs:{placeholder:t.filterPlaceholder,"is-busy":t.isBusy,"total-rows":t.totalRows},model:{value:t.filter,callback:function(e){t.filter=e},expression:"filter"}})],1),t._v(" "),t.$slots["filter-append"]||t.$scopedSlots["filter-append"]?n("b-col",{attrs:{cols:"auto"}},[t._t("filter-append",null,{filter:t.filter})],2):t._e()],1),t._v(" "),n("b-table",{staticClass:"bg-white shadow-sm",attrs:{id:t.id,hover:"",responsive:"",items:t.itemProvider,fields:t.fields,"primary-key":"id",busy:t.isBusy,"sort-by":t.sortBy,"sort-desc":t.sortDesc,"per-page":t.perPage,"current-page":t.currentPage,"show-empty":!0,"empty-text":t.emptyText,"empty-filtered-text":t.$t("There are no records matching your request."),"no-sort-reset":!0,filter:t.filter,"tbody-tr-class":t.tbodyTrClass},on:{"update:busy":function(e){t.isBusy=e},"update:sortBy":function(e){t.sortBy=e},"update:sort-by":function(e){t.sortBy=e},"update:sortDesc":function(e){t.sortDesc=e},"update:sort-desc":function(e){t.sortDesc=e}},scopedSlots:t._u([t._l(t.$scopedSlots,(function(e,n){return{key:n,fn:function(e){return[t._t(n,null,null,e)]}}})),{key:"empty",fn:function(e){return[n("em",[t._v(t._s(e.emptyText))])]}},{key:"emptyfiltered",fn:function(e){return[n("em",[t._v(t._s(e.emptyFilteredText))])]}}],null,!0)},[t._v(" "),n("div",{staticClass:"text-center my-2",attrs:{slot:"table-busy"},slot:"table-busy"},[n("b-spinner",{staticClass:"align-middle"}),t._v(" "),n("strong",[t._v(t._s(t.loadingLabel))])],1)]),t._v(" "),t.totalRows>0?n("table-pagination",{attrs:{"total-rows":t.totalRows,"per-page":t.perPage,disabled:t.isBusy},model:{value:t.currentPage,callback:function(e){t.currentPage=e},expression:"currentPage"}}):t._e()],2)}),[],!1,null,null,null).exports},505:(t,e,n)=>{n.d(e,{Z:()=>a});const r={props:{value:{required:!0},placeholder:{required:!1,type:String,default:function(){return this.$t("Type to search...")}},totalRows:{type:Number},isBusy:Boolean},computed:{filterText:{get:function(){return this.value},set:function(t){this.$emit("input",t)}}}};const a=(0,n(1900).Z)(r,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("b-input-group",{staticClass:"mb-3"},[n("b-form-input",{attrs:{debounce:400,trim:"",type:"search",placeholder:t.placeholder,autocomplete:"off"},on:{keyup:function(e){if(!e.type.indexOf("key")&&t._k(e.keyCode,"esc",27,e.key,["Esc","Escape"]))return null;t.filterText=""}},model:{value:t.filterText,callback:function(e){t.filterText=e},expression:"filterText"}}),t._v(" "),n("b-input-group-append",{staticClass:"d-none d-sm-block"},[t.isBusy?n("b-input-group-text",[t._v("\n            ...\n        ")]):n("b-input-group-text",[t._v("\n            "+t._s(t.$t("{num} results",{num:t.totalRows}))+"\n        ")])],1)],1)}),[],!1,null,null,null).exports},6281:(t,e,n)=>{n.d(e,{Z:()=>a});const r={props:{value:Number,totalRows:Number,perPage:Number,disabled:Boolean},computed:{currentPage:{get:function(){return this.value},set:function(t){this.$emit("input",t)}},itemsStart:function(){return(this.currentPage-1)*this.perPage+1},itemsEnd:function(){return Math.min(this.currentPage*this.perPage,this.totalRows)}}};const a=(0,n(1900).Z)(r,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("b-row",{staticClass:"mb-3",attrs:{"align-v":"center"}},[n("b-col",[t.totalRows>0?n("b-pagination",{staticClass:"mb-0",attrs:{size:"sm","total-rows":t.totalRows,"per-page":t.perPage,disabled:t.disabled},model:{value:t.currentPage,callback:function(e){t.currentPage=e},expression:"currentPage"}}):t._e()],1),t._v(" "),n("b-col",{staticClass:"text-right",attrs:{sm:"auto"}},[n("small",[t._v("\n            "+t._s(t.$t("{x} out of {y}",{x:t.itemsStart+" - "+t.itemsEnd,y:t.totalRows}))+"\n        ")])])],1)}),[],!1,null,null,null).exports},35:(t,e,n)=>{n.d(e,{Z:()=>c});const r={name:"nested-list-group",props:{items:{required:!0},root:{type:Boolean,default:!0},level:{type:Number,default:0},itemPaddingLeft:{type:Number,default:25}},methods:{handleClick:function(t){t.can_update&&this.$emit("itemClick",t.id)}}};var a=n(3379),o=n.n(a),s=n(8189),i={insert:"head",singleton:!1};o()(s.Z,i);s.Z.locals;const c=(0,n(1900).Z)(r,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("b-list-group",{class:t.root?"list-group-root":null},[t._l(t.items,(function(e){return[n("b-list-group-item",{key:e.id,style:{"padding-left":20+t.level*t.itemPaddingLeft+"px"},attrs:{button:e.can_update},on:{click:function(n){return t.handleClick(e)}}},[e.enabled?[t._v(t._s(e.name))]:n("del",[t._v(t._s(e.name))]),t._v(" "),e.description?n("small",{staticClass:"text-muted d-block"},[t._v("\n                "+t._s(e.description))]):t._e()],2),t._v(" "),e.children.length>0?n("nested-list-group",{key:e.id+"-children",attrs:{items:e.children,root:!1,level:t.level+1},on:{itemClick:function(e){return t.$emit("itemClick",e)}}}):t._e()]}))],2)}),[],!1,null,"07d928dd",null).exports},8518:(t,e,n)=>{n.d(e,{Z:()=>a});const r={props:{title:{type:String,required:!0}}};const a=(0,n(1900).Z)(r,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("b-list-group-item",[n("b-row",[n("b-col",{attrs:{sm:"5",md:"4",lg:"3",xl:"2"}},[n("strong",[t._v(t._s(t.title))])]),t._v(" "),n("b-col",{attrs:{sm:""}},[t._t("default")],2)],1)],1)}),[],!1,null,null,null).exports},2019:(t,e,n)=>{n.r(e),n.d(e,{default:()=>l});var r=n(7757),a=n.n(r),o=n(2851),s=n(6557);function i(t,e,n,r,a,o,s){try{var i=t[o](s),c=i.value}catch(t){return void n(t)}i.done?e(c):Promise.resolve(c).then(r,a)}const c={title:function(){return this.$t("Accounting")},components:{AlertWithRetry:o.Z},data:function(){return{errorText:null,fields:[{key:"name",label:this.$t("Name")},{key:"amount_formatted",label:this.$t("Amount"),class:"fit text-right",tdClass:function(t,e,n){return n.amount<0?"text-danger":null}}],buttons:[{to:{name:"accounting.transactions.summary"},icon:"calculator",text:this.$t("Summary"),show:this.can("view-accounting-summary")},{to:{name:"accounting.categories.index"},icon:"tag",text:this.$t("Categories"),show:this.can("view-accounting-categories")},{to:{name:"accounting.projects.index"},icon:"project-diagram",text:this.$t("Projects"),show:this.can("view-accounting-projects")},{to:{name:"accounting.suppliers.index"},variant:"secondary",icon:"truck",text:this.$t("Suppliers"),show:this.can("view-suppliers")||can("manage-suppliers")},{to:{name:"accounting.budgets.index"},variant:"secondary",icon:"money-bill-alt",text:this.$t("Budgets"),show:this.can("view-budgets")||can("manage-budgets")},{to:{name:"accounting.wallets.index"},variant:"secondary",icon:"wallet",text:this.$t("Wallets"),show:this.can("configure-accounting")},{to:{name:"accounting.transactions.history"},variant:"secondary",icon:"history",text:this.$t("History"),show:this.can("view-transactions")},{to:{name:"accounting.transactions.controlling"},variant:"secondary",icon:"check",text:this.$t("Controlling"),show:this.can("view-transactions")}]}},methods:{fetchData:function(){var t,e=this;return(t=a().mark((function t(){return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.errorText=null,t.prev=1,t.next=4,s.Z.names();case 4:return t.abrupt("return",t.sent);case 7:t.prev=7,t.t0=t.catch(1),e.errorText=t.t0;case 10:case"end":return t.stop()}}),t,null,[[1,7]])})),function(){var e=this,n=arguments;return new Promise((function(r,a){var o=t.apply(e,n);function s(t){i(o,r,a,s,c,"next",t)}function c(t){i(o,r,a,s,c,"throw",t)}s(void 0)}))})()},refresh:function(){this.$refs.table.refresh()}}};const l=(0,n(1900).Z)(c,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("b-container",{staticClass:"px-0"},[n("alert-with-retry",{attrs:{value:t.errorText},on:{retry:t.refresh}}),t._v(" "),n("b-card",{staticClass:"shadow-sm mb-4",attrs:{header:t.$t("Wallets"),"no-body":""}},[n("b-table",{ref:"table",staticClass:"mb-0",attrs:{items:t.fetchData,fields:t.fields,"show-empty":"","empty-text":t.$t("No wallets found."),"thead-class":"d-none",responsive:"",hover:""},scopedSlots:t._u([{key:"cell(name)",fn:function(e){return[t.can("view-transactions")?[n("router-link",{attrs:{to:{name:"accounting.transactions.index",params:{wallet:e.item.id}}}},[t._v("\n                        "+t._s(e.value))])]:[t._v("\n                    "+t._s(e.value)+"\n                ")]]}}])},[n("div",{staticClass:"text-center my-2",attrs:{slot:"table-busy"},slot:"table-busy"},[n("b-spinner",{staticClass:"align-middle"}),t._v(" "),n("strong",[t._v(t._s(t.$t("Loading...")))])],1)])],1),t._v(" "),n("b-row",t._l(t.buttons.filter((function(t){return t.show})),(function(e,r){return n("b-col",{key:r,staticClass:"mb-4",attrs:{sm:"6",md:"4",lg:"3"}},[n("b-button",{staticClass:"d-block",attrs:{variant:e.variant,to:e.to}},[n("font-awesome-icon",{attrs:{icon:e.icon}}),t._v("\n                "+t._s(e.text))],1)],1)})),1)],1)}),[],!1,null,null,null).exports},5282:(t,e,n)=>{n.r(e),n.d(e,{default:()=>l});var r=n(7757),a=n.n(r),o=n(1581),s=n(5817);function i(t,e,n,r,a,o,s){try{var i=t[o](s),c=i.value}catch(t){return void n(t)}i.done?e(c):Promise.resolve(c).then(r,a)}const c={components:{BudgetForm:n(8183).Z},data:function(){return{isBusy:!1}},methods:{handleCreate:function(t){var e,n=this;return(e=a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.isBusy=!0,e.prev=1,e.next=4,s.Z.store(t);case 4:(0,o.OV)(n.$t("Budget added.")),n.$router.push({name:"accounting.budgets.index"}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),alert(e.t0);case 11:n.isBusy=!1;case 12:case"end":return e.stop()}}),e,null,[[1,8]])})),function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function s(t){i(o,r,a,s,c,"next",t)}function c(t){i(o,r,a,s,c,"throw",t)}s(void 0)}))})()},handleCancel:function(){this.$router.push({name:"accounting.budgets.index"})}}};const l=(0,n(1900).Z)(c,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("b-container",{staticClass:"px-0"},[n("budget-form",{attrs:{disabled:t.isBusy},on:{submit:t.handleCreate,cancel:t.handleCancel}})],1)}),[],!1,null,null,null).exports},1072:(t,e,n)=>{n.r(e),n.d(e,{default:()=>u});var r=n(7757),a=n.n(r),o=n(1581),s=n(5817);function i(t,e,n,r,a,o,s){try{var i=t[o](s),c=i.value}catch(t){return void n(t)}i.done?e(c):Promise.resolve(c).then(r,a)}function c(t){return function(){var e=this,n=arguments;return new Promise((function(r,a){var o=t.apply(e,n);function s(t){i(o,r,a,s,c,"next",t)}function c(t){i(o,r,a,s,c,"throw",t)}s(void 0)}))}}const l={components:{BudgetForm:n(8183).Z},props:{id:{required:!0}},data:function(){return{budget:null,isBusy:!1}},watch:{$route:function(){this.fetchWallet()}},created:function(){var t=this;return c(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.fetchWallet();case 1:case"end":return e.stop()}}),e)})))()},methods:{fetchWallet:function(){var t=this;return c(a().mark((function e(){var n;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,s.Z.find(t.id);case 3:n=e.sent,t.budget=n.data,e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),alert(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))()},updateWallet:function(t){var e=this;return c(a().mark((function n(){return a().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return e.isBusy=!0,n.prev=1,n.next=4,s.Z.update(e.id,t);case 4:(0,o.OV)(e.$t("Budget updated.")),e.$router.push({name:"accounting.budgets.show",params:{id:e.id}}),n.next=11;break;case 8:n.prev=8,n.t0=n.catch(1),alert(n.t0);case 11:e.isBusy=!1;case 12:case"end":return n.stop()}}),n,null,[[1,8]])})))()},deleteWallet:function(){var t=this;return c(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.isBusy=!0,e.prev=1,e.next=4,s.Z.delete(t.id);case 4:(0,o.OV)(t.$t("Budget deleted.")),t.$router.push({name:"accounting.budgets.index"}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),alert(e.t0);case 11:t.isBusy=!1;case 12:case"end":return e.stop()}}),e,null,[[1,8]])})))()},handleCancel:function(){this.$router.push({name:"accounting.budgets.show",params:{id:this.id}})}}};const u=(0,n(1900).Z)(l,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.budget?n("b-container",{staticClass:"px-0"},[n("budget-form",{attrs:{budget:t.budget,disabled:t.isBusy},on:{submit:t.updateWallet,cancel:t.handleCancel,delete:t.deleteWallet}}),t._v(" "),n("hr"),t._v(" "),n("p",{staticClass:"text-right"},[n("small",[t._v("\n            "+t._s(t.$t("Last updated"))+":\n            "+t._s(t._f("dateTimeFormat")(t.budget.updated_at))+"\n        ")])])],1):n("p",[t._v("\n    "+t._s(t.$t("Loading..."))+"\n")])}),[],!1,null,null,null).exports},5294:(t,e,n)=>{n.r(e),n.d(e,{default:()=>f});var r=n(7757),a=n.n(r),o=n(5817),s=n(6951),i=n(7554),c=n.n(i);function l(t,e,n,r,a,o,s){try{var i=t[o](s),c=i.value}catch(t){return void n(t)}i.done?e(c):Promise.resolve(c).then(r,a)}function u(t){return function(){var e=this,n=arguments;return new Promise((function(r,a){var o=t.apply(e,n);function s(t){l(o,r,a,s,i,"next",t)}function i(t){l(o,r,a,s,i,"throw",t)}s(void 0)}))}}const d={components:{BaseTable:s.Z,Nl2br:c()},props:{id:{required:!0}},data:function(){return{isBusy:!1,budget:null,transactions:[],transactioFields:[{key:"receipt_no",label:this.$t("Receipt")},{key:"date",label:this.$t("Date"),formatter:this.dateFormat},{key:"amount_formatted",label:this.$t("Amount"),class:"fit text-right",tdClass:function(t,e,n){return"income"==n.type?"text-success":"text-danger"},formatter:function(t,e,n){return("spending"==n.type?"-":"")+t}},{key:"category_full_name",label:this.$t("Category")},{key:"description",label:this.$t("Description")},{key:"supplier",label:this.$t("Supplier")},{key:"created_at",label:this.$t("Registered"),formatter:this.dateTimeFormat}],donationFields:[{key:"donor",label:this.$t("Donor")},{key:"date",label:this.$t("Date"),class:"fit",formatter:this.dateFormat},{key:"exchange_amount",label:this.$t("Amount"),class:"text-right fit"},{key:"channel",label:this.$t("Channel"),class:"d-none d-sm-table-cell"},{key:"purpose",label:this.$t("Purpose")},{key:"reference",label:this.$t("Reference"),class:"d-none d-sm-table-cell"},{key:"created_at",label:this.$t("Registered"),class:"d-none d-sm-table-cell fit",formatter:this.timeFromNow}],donationBaseCurrency:null,donationTotalExchangeAmount:null}},watch:{$route:function(){this.fetch()}},created:function(){var t=this;return u(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.fetch();case 1:case"end":return e.stop()}}),e)})))()},methods:{fetch:function(){var t=this;return u(a().mark((function e(){var n;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,o.Z.find(t.id);case 3:n=e.sent,t.budget=n.data,e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),alert(e.t0),console.error(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,7]])})))()},fetchTransactions:function(t){var e=this;return u(a().mark((function n(){return a().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,o.Z.transactions(e.id,t);case 2:return n.abrupt("return",n.sent);case 3:case"end":return n.stop()}}),n)})))()},fetchDonations:function(t){var e=this;return u(a().mark((function n(){var r;return a().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,o.Z.donations(e.id,t);case 2:return r=n.sent,e.donationBaseCurrency=r.meta.base_currency,e.donationTotalExchangeAmount=r.meta.total_exchange_amount,n.abrupt("return",r);case 6:case"end":return n.stop()}}),n)})))()},exportFile:function(t){var e=this;return u(a().mark((function n(){return a().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return e.isBusy=!0,n.prev=1,n.next=4,o.Z.export(e.id,t);case 4:n.next=10;break;case 6:n.prev=6,n.t0=n.catch(1),alert(n.t0),console.error(n.t0);case 10:e.isBusy=!1;case 11:case"end":return n.stop()}}),n,null,[[1,6]])})))()}}};const f=(0,n(1900).Z)(d,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.budget?n("b-container",{staticClass:"px-0"},[n("dl",{staticClass:"row"},[n("dt",{staticClass:"col-sm-3"},[t._v(t._s(t.$t("Name")))]),t._v(" "),n("dd",{staticClass:"col-sm-9"},[t._v(t._s(t.budget.name))]),t._v(" "),t.budget.description?[n("dt",{staticClass:"col-sm-3"},[t._v(t._s(t.$t("Description")))]),t._v(" "),n("dd",{staticClass:"col-sm-9"},[n("nl2br",{attrs:{tag:"span",text:t.budget.description}})],1)]:t._e(),t._v(" "),n("dt",{staticClass:"col-sm-3"},[t._v(t._s(t.$t("Agreed amount")))]),t._v(" "),n("dd",{staticClass:"col-sm-9"},[t._v("\n            "+t._s(t.budget.agreed_amount_formatted)+"\n        ")]),t._v(" "),t.budget.initial_amount?[n("dt",{staticClass:"col-sm-3"},[t._v(t._s(t.$t("Initial amount")))]),t._v(" "),n("dd",{staticClass:"col-sm-9"},[t._v("\n                "+t._s(t.budget.initial_amount_formatted)+"\n            ")])]:t._e(),t._v(" "),n("dt",{staticClass:"col-sm-3"},[t._v(t._s(t.$t("Balance")))]),t._v(" "),n("dd",{staticClass:"col-sm-9"},[t._v(t._s(t.budget.balance_formatted))]),t._v(" "),t.budget.donor?[n("dt",{staticClass:"col-sm-3"},[t._v(t._s(t.$t("Donor")))]),t._v(" "),n("dd",{staticClass:"col-sm-9"},[t.can("view-fundraising-entities")?n("router-link",{attrs:{to:{name:"fundraising.donors.show",params:{id:t.budget.donor_id}}}},[t._v("\n                    "+t._s(t.budget.donor.full_name)+"\n                ")]):[t._v("\n                    "+t._s(t.budget.donor.full_name)+"\n                ")]],2)]:t._e(),t._v(" "),t.budget.closed_at?[n("dt",{staticClass:"col-sm-3"},[t._v(t._s(t.$t("Closing date")))]),t._v(" "),n("dd",{staticClass:"col-sm-9"},[t._v(t._s(t._f("dateFormat")(t.budget.closed_at)))])]:t._e(),t._v(" "),t.budget.is_completed?[n("dt",{staticClass:"col-sm-3"},[t._v(t._s(t.$t("Completed")))]),t._v(" "),n("dd",{staticClass:"col-sm-9"},[t._v(t._s(t.$t("Yes")))])]:t._e()],2),t._v(" "),t.can("view-transactions")?[n("h4",[t._v(t._s(t.$t("Transactions")))]),t._v(" "),n("base-table",{attrs:{id:"budget-transactions-table",fields:t.transactioFields,"api-method":t.fetchTransactions,"default-sort-by":"created_at","default-sort-desc":!0,"empty-text":t.$t("No transactions found."),"items-per-page":25,"no-filter":""},scopedSlots:t._u([{key:"cell(receipt_no)",fn:function(e){return[n("router-link",{attrs:{to:{name:"accounting.transactions.show",params:{id:e.item.id}}}},[t._v("\n                    "+t._s(e.value)+"\n                ")])]}},{key:"cell(supplier)",fn:function(e){return[e.item.supplier?n("router-link",{attrs:{to:{name:"accounting.suppliers.show",params:{id:e.item.supplier.slug}},title:e.item.supplier.category}},[t._v("\n                    "+t._s(e.item.supplier.name)+"\n                ")]):t._e()]}}],null,!1,2820000975)})]:t._e(),t._v(" "),t.can("view-fundraising-entities")?[n("h4",[t._v("\n            "+t._s(t.$t("Donations"))+"\n        ")]),t._v(" "),t.donationTotalExchangeAmount?n("p",[t._v("\n            "+t._s(t.$t("Total"))+":\n            "),n("u",[t._v(t._s(t.donationBaseCurrency)+"\n                "+t._s(t.donationTotalExchangeAmount))])]):t._e(),t._v(" "),n("base-table",{attrs:{id:"budget-donations-table",fields:t.donationFields,"api-method":t.fetchDonations,"default-sort-by":"created_at","default-sort-desc":!0,"empty-text":t.$t("No donations found."),"items-per-page":25,"no-filter":""},scopedSlots:t._u([{key:"cell(exchange_amount)",fn:function(e){return[e.item.currency!=t.donationBaseCurrency?n("small",{staticClass:"text-muted ml-1"},[t._v("\n                    "+t._s(e.item.currency)+"\n                    "+t._s(t._f("decimalNumberFormat")(e.item.amount))+"\n                ")]):t._e(),t._v("\n                "+t._s(t.donationBaseCurrency)+"\n                "+t._s(t._f("decimalNumberFormat")(e.value))+"\n            ")]}},{key:"cell(donor)",fn:function(e){return[""!=e.value&&e.item.donor_id?n("router-link",{attrs:{to:{name:"fundraising.donors.show",params:{id:e.item.donor_id}}}},[t._v("\n                    "+t._s(e.value)+"\n                ")]):[t._v("\n                    "+t._s(e.value)+"\n                ")]]}}],null,!1,718128411)})]:t._e(),t._v(" "),n("p",[t.budget.can_update?n("router-link",{staticClass:"btn btn-primary",attrs:{to:{name:"accounting.budgets.edit",params:{id:t.id}}}},[n("font-awesome-icon",{attrs:{icon:"edit"}}),t._v(" "+t._s(t.$t("Edit")))],1):t._e(),t._v(" "),n("b-dropdown",{attrs:{disabled:t.isBusy},scopedSlots:t._u([{key:"button-content",fn:function(){return[n("font-awesome-icon",{attrs:{icon:t.isBusy?"spinner":"download",spin:t.isBusy}}),t._v("\n                "+t._s(t.$t("Export"))+"\n            ")]},proxy:!0}],null,!1,56167392)},[t._v(" "),n("b-dropdown-item",{on:{click:function(e){return t.exportFile()}}},[t._v(t._s(t.$t("Spreadsheet only")))]),t._v(" "),n("b-dropdown-item",{on:{click:function(e){return t.exportFile({include_pictures:!0})}}},[t._v(t._s(t.$t("Spreadsheet and pictures")))])],1),t._v(" "),n("router-link",{staticClass:"btn btn-secondary",attrs:{to:{name:"accounting.budgets.index"}}},[n("font-awesome-icon",{attrs:{icon:"times-circle"}}),t._v("\n            "+t._s(t.$t("Overview"))+"\n        ")],1)],1)],2):n("p",[t._v("\n    "+t._s(t.$t("Loading..."))+"\n")])}),[],!1,null,null,null).exports},7476:(t,e,n)=>{n.r(e),n.d(e,{default:()=>c});var r=n(7757),a=n.n(r),o=n(5817);function s(t,e,n,r,a,o,s){try{var i=t[o](s),c=i.value}catch(t){return void n(t)}i.done?e(c):Promise.resolve(c).then(r,a)}const i={title:function(){return this.$t("Budgets")},components:{BaseTable:n(6951).Z},data:function(){return{fields:[{key:"name",label:this.$t("Name")},{key:"agreed_amount_formatted",label:this.$t("Agreed amount"),class:"fit text-right"},{key:"balance_formatted",label:this.$t("Balance"),class:"fit text-right",tdClass:function(t,e,n){return n.balance<0?"text-danger":null}},{key:"num_transactions",label:this.$t("Transactions"),class:"fit text-right"},{key:"closed_at",label:this.$t("Closing date"),class:"fit",formatter:this.dateFormat},{key:"is_completed",label:this.$t("Completed"),class:"fit text-center"}]}},methods:{fetchData:function(t){return(e=a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",o.Z.list(t));case 1:case"end":return e.stop()}}),e)})),function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(t){s(o,r,a,i,c,"next",t)}function c(t){s(o,r,a,i,c,"throw",t)}i(void 0)}))})();var e},rowClass:function(t,e){if(t&&"row"===e)return t.is_completed?"table-secondary":void 0}}};const c=(0,n(1900).Z)(i,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("b-container",{staticClass:"px-0"},[n("base-table",{ref:"table",attrs:{id:"budgets-table",fields:t.fields,"api-method":t.fetchData,"default-sort-by":"name","empty-text":t.$t("No budgets found."),"items-per-page":25,"tbody-tr-class":t.rowClass},scopedSlots:t._u([{key:"cell(name)",fn:function(e){return[n("router-link",{attrs:{to:{name:"accounting.budgets.show",params:{id:e.item.id}}}},[t._v("\n                "+t._s(e.value)+"\n            ")])]}},{key:"cell(is_completed)",fn:function(t){return[n("font-awesome-icon",{attrs:{icon:t.value?"check":"times"}})]}}])})],1)}),[],!1,null,null,null).exports},6543:(t,e,n)=>{n.r(e),n.d(e,{default:()=>l});var r=n(7757),a=n.n(r),o=n(1581),s=n(5021);function i(t,e,n,r,a,o,s){try{var i=t[o](s),c=i.value}catch(t){return void n(t)}i.done?e(c):Promise.resolve(c).then(r,a)}const c={components:{CategoryForm:n(9667).Z},data:function(){return{isBusy:!1}},methods:{handleRegister:function(t){var e,n=this;return(e=a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.isBusy=!0,e.prev=1,e.next=4,s.Z.store(t);case 4:(0,o.OV)(n.$t("Category added.")),n.$router.push({name:"accounting.categories.index"}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),alert(e.t0);case 11:n.isBusy=!1;case 12:case"end":return e.stop()}}),e,null,[[1,8]])})),function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function s(t){i(o,r,a,s,c,"next",t)}function c(t){i(o,r,a,s,c,"throw",t)}s(void 0)}))})()},handleCancel:function(){this.$router.push({name:"accounting.categories.index"})}}};const l=(0,n(1900).Z)(c,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("b-container",{staticClass:"px-0"},[n("category-form",{attrs:{disabled:t.isBusy},on:{submit:t.handleRegister,cancel:t.handleCancel}})],1)}),[],!1,null,null,null).exports},259:(t,e,n)=>{n.r(e),n.d(e,{default:()=>u});var r=n(7757),a=n.n(r),o=n(1581),s=n(5021);function i(t,e,n,r,a,o,s){try{var i=t[o](s),c=i.value}catch(t){return void n(t)}i.done?e(c):Promise.resolve(c).then(r,a)}function c(t){return function(){var e=this,n=arguments;return new Promise((function(r,a){var o=t.apply(e,n);function s(t){i(o,r,a,s,c,"next",t)}function c(t){i(o,r,a,s,c,"throw",t)}s(void 0)}))}}const l={components:{CategoryForm:n(9667).Z},props:{id:{required:!0}},data:function(){return{category:null,isBusy:!1}},watch:{$route:function(){this.fetch()}},created:function(){var t=this;return c(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.fetch();case 1:case"end":return e.stop()}}),e)})))()},methods:{fetch:function(){var t=this;return c(a().mark((function e(){var n;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,s.Z.find(t.id);case 3:n=e.sent,t.category=n.data,e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),alert(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))()},handleUpdate:function(t){var e=this;return c(a().mark((function n(){return a().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return e.isBusy=!0,n.prev=1,n.next=4,s.Z.update(e.id,t);case 4:(0,o.OV)(e.$t("Category updated.")),e.$router.push({name:"accounting.categories.show",params:{id:e.id}}),n.next=11;break;case 8:n.prev=8,n.t0=n.catch(1),alert(n.t0);case 11:e.isBusy=!1;case 12:case"end":return n.stop()}}),n,null,[[1,8]])})))()},handleDelete:function(){var t=this;return c(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.isBusy=!0,e.prev=1,e.next=4,s.Z.delete(t.id);case 4:(0,o.OV)(t.$t("Category deleted.")),t.$router.push({name:"accounting.categories.index"}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),alert(e.t0);case 11:t.isBusy=!1;case 12:case"end":return e.stop()}}),e,null,[[1,8]])})))()},handleCancel:function(){this.$router.push({name:"accounting.categories.show",params:{id:this.id}})}}};const u=(0,n(1900).Z)(l,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.category?n("b-container",{staticClass:"px-0"},[n("category-form",{attrs:{category:t.category,disabled:t.isBusy},on:{submit:t.handleUpdate,cancel:t.handleCancel,delete:t.handleDelete}}),t._v(" "),n("hr"),t._v(" "),n("p",{staticClass:"d-flex justify-content-between"},[n("small",[t._v("\n            "+t._s(t.$t("Used in {num} transactions.",{num:t.category.num_transactions}))+"\n        ")]),t._v(" "),n("small",[t._v("\n            "+t._s(t.$t("Last updated"))+":\n            "+t._s(t._f("dateTimeFormat")(t.category.updated_at))+"\n        ")])])],1):n("p",[t._v("\n    "+t._s(t.$t("Loading..."))+"\n")])}),[],!1,null,null,null).exports},5334:(t,e,n)=>{n.r(e),n.d(e,{default:()=>u});var r=n(7757),a=n.n(r),o=n(5021),s=n(35),i=n(2851);function c(t,e,n,r,a,o,s){try{var i=t[o](s),c=i.value}catch(t){return void n(t)}i.done?e(c):Promise.resolve(c).then(r,a)}const l={components:{NestedListGroup:s.Z,AlertWithRetry:i.Z},data:function(){return{tree:[],errorText:null,loaded:!1}},mounted:function(){this.fetchData()},methods:{fetchData:function(){var t,e=this;return(t=a().mark((function t(){return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.errorText=null,t.prev=1,t.next=4,o.Z.tree();case 4:e.tree=t.sent,e.loaded=!0,t.next=11;break;case 8:t.prev=8,t.t0=t.catch(1),e.errorText=t.t0;case 11:case"end":return t.stop()}}),t,null,[[1,8]])})),function(){var e=this,n=arguments;return new Promise((function(r,a){var o=t.apply(e,n);function s(t){c(o,r,a,s,i,"next",t)}function i(t){c(o,r,a,s,i,"throw",t)}s(void 0)}))})()},navigateToEdit:function(t){this.$router.push({name:"accounting.categories.show",params:{id:t}})}}};const u=(0,n(1900).Z)(l,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("b-container",{staticClass:"px-0"},[n("alert-with-retry",{attrs:{value:t.errorText},on:{retry:t.fetchData}}),t._v(" "),t.tree.length>0?n("nested-list-group",{staticClass:"mb-4",attrs:{items:t.tree},on:{itemClick:t.navigateToEdit}}):t.loaded?n("b-alert",{attrs:{variant:"info",show:""}},[t._v(t._s(t.$t("No entries registered.")))]):[t._v("\n        "+t._s(t.$t("Loading..."))+"\n    ")]],2)}),[],!1,null,null,null).exports},7080:(t,e,n)=>{n.r(e),n.d(e,{default:()=>u});var r=n(7757),a=n.n(r),o=n(5021),s=n(7554);function i(t,e,n,r,a,o,s){try{var i=t[o](s),c=i.value}catch(t){return void n(t)}i.done?e(c):Promise.resolve(c).then(r,a)}function c(t){return function(){var e=this,n=arguments;return new Promise((function(r,a){var o=t.apply(e,n);function s(t){i(o,r,a,s,c,"next",t)}function c(t){i(o,r,a,s,c,"throw",t)}s(void 0)}))}}const l={components:{Nl2br:n.n(s)()},props:{id:{required:!0}},data:function(){return{category:null}},watch:{$route:function(){this.fetch()}},created:function(){var t=this;return c(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.fetch();case 1:case"end":return e.stop()}}),e)})))()},methods:{fetch:function(){var t=this;return c(a().mark((function e(){var n;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,o.Z.find(t.id);case 3:n=e.sent,t.category=n.data,e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),alert(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))()}}};const u=(0,n(1900).Z)(l,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.category?n("b-container",{staticClass:"px-0"},[n("h5",[t._v(t._s(t.category.name))]),t._v(" "),t.category.description?n("nl2br",{attrs:{tag:"p",text:t.category.description}}):t._e(),t._v(" "),n("h6",[t._v(t._s(t.$t("Transactions")))]),t._v(" "),t.category.num_transactions?n("p",[t._v("Registered "),n("strong",[t._v(t._s(t.category.num_transactions))]),t._v(" transactions in category.")]):n("p",[t._v(t._s(t.$t("No transactions found.")))]),t._v(" "),n("p",[t.category.can_update?n("router-link",{staticClass:"btn btn-primary",attrs:{to:{name:"accounting.categories.edit",params:{id:t.id}}}},[n("font-awesome-icon",{attrs:{icon:"edit"}}),t._v(" "+t._s(t.$t("Edit")))],1):t._e(),t._v(" "),n("router-link",{staticClass:"btn btn-secondary",attrs:{to:{name:"accounting.categories.index"}}},[n("font-awesome-icon",{attrs:{icon:"times-circle"}}),t._v("\n            "+t._s(t.$t("Overview"))+"\n        ")],1)],1)],1):n("p",[t._v("\n    "+t._s(t.$t("Loading..."))+"\n")])}),[],!1,null,null,null).exports},786:(t,e,n)=>{n.r(e),n.d(e,{default:()=>l});var r=n(7757),a=n.n(r),o=n(1581),s=n(5778);function i(t,e,n,r,a,o,s){try{var i=t[o](s),c=i.value}catch(t){return void n(t)}i.done?e(c):Promise.resolve(c).then(r,a)}const c={components:{ProjectForm:n(9208).Z},data:function(){return{isBusy:!1}},methods:{handleRegister:function(t){var e,n=this;return(e=a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.isBusy=!0,e.prev=1,e.next=4,s.Z.store(t);case 4:(0,o.OV)(n.$t("Project added.")),n.$router.push({name:"accounting.projects.index"}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),alert(e.t0);case 11:n.isBusy=!1;case 12:case"end":return e.stop()}}),e,null,[[1,8]])})),function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function s(t){i(o,r,a,s,c,"next",t)}function c(t){i(o,r,a,s,c,"throw",t)}s(void 0)}))})()},handleCancel:function(){this.$router.push({name:"accounting.projects.index"})}}};const l=(0,n(1900).Z)(c,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("b-container",{staticClass:"px-0"},[n("project-form",{attrs:{disabled:t.isBusy},on:{submit:t.handleRegister,cancel:t.handleCancel}})],1)}),[],!1,null,null,null).exports},2393:(t,e,n)=>{n.r(e),n.d(e,{default:()=>u});var r=n(7757),a=n.n(r),o=n(1581),s=n(5778);function i(t,e,n,r,a,o,s){try{var i=t[o](s),c=i.value}catch(t){return void n(t)}i.done?e(c):Promise.resolve(c).then(r,a)}function c(t){return function(){var e=this,n=arguments;return new Promise((function(r,a){var o=t.apply(e,n);function s(t){i(o,r,a,s,c,"next",t)}function c(t){i(o,r,a,s,c,"throw",t)}s(void 0)}))}}const l={components:{ProjectForm:n(9208).Z},props:{id:{required:!0}},data:function(){return{project:null,isBusy:!1}},watch:{$route:function(){this.fetch()}},created:function(){var t=this;return c(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.fetch();case 1:case"end":return e.stop()}}),e)})))()},methods:{fetch:function(){var t=this;return c(a().mark((function e(){var n;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,s.Z.find(t.id);case 3:n=e.sent,t.project=n.data,e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),alert(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))()},handleUpdate:function(t){var e=this;return c(a().mark((function n(){return a().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return e.isBusy=!0,n.prev=1,n.next=4,s.Z.update(e.id,t);case 4:(0,o.OV)(e.$t("Project updated.")),e.$router.push({name:"accounting.projects.index"}),n.next=11;break;case 8:n.prev=8,n.t0=n.catch(1),alert(n.t0);case 11:e.isBusy=!1;case 12:case"end":return n.stop()}}),n,null,[[1,8]])})))()},handleDelete:function(){var t=this;return c(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.isBusy=!0,e.prev=1,e.next=4,s.Z.delete(t.id);case 4:(0,o.OV)(t.$t("Project deleted.")),t.$router.push({name:"accounting.projects.index"}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),alert(e.t0);case 11:t.isBusy=!1;case 12:case"end":return e.stop()}}),e,null,[[1,8]])})))()},handleCancel:function(){this.$router.push({name:"accounting.projects.index"})}}};const u=(0,n(1900).Z)(l,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.project?n("b-container",{staticClass:"px-0"},[n("project-form",{attrs:{project:t.project,disabled:t.isBusy},on:{submit:t.handleUpdate,cancel:t.handleCancel,delete:t.handleDelete}}),t._v(" "),n("hr"),t._v(" "),n("p",{staticClass:"d-flex justify-content-between"},[n("small",[t._v("\n            "+t._s(t.$t("Used in {num} transactions.",{num:t.project.num_transactions}))+"\n        ")]),t._v(" "),n("small",[t._v("\n            "+t._s(t.$t("Last updated"))+":\n            "+t._s(t._f("dateTimeFormat")(t.project.updated_at))+"\n        ")])])],1):n("p",[t._v("\n    "+t._s(t.$t("Loading..."))+"\n")])}),[],!1,null,null,null).exports},6426:(t,e,n)=>{n.r(e),n.d(e,{default:()=>u});var r=n(7757),a=n.n(r),o=n(5778),s=n(35),i=n(2851);function c(t,e,n,r,a,o,s){try{var i=t[o](s),c=i.value}catch(t){return void n(t)}i.done?e(c):Promise.resolve(c).then(r,a)}const l={components:{NestedListGroup:s.Z,AlertWithRetry:i.Z},data:function(){return{tree:[],errorText:null,loaded:!1}},mounted:function(){this.fetchData()},methods:{fetchData:function(){var t,e=this;return(t=a().mark((function t(){return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.errorText=null,t.prev=1,t.next=4,o.Z.tree();case 4:e.tree=t.sent,e.loaded=!0,t.next=11;break;case 8:t.prev=8,t.t0=t.catch(1),e.errorText=t.t0;case 11:case"end":return t.stop()}}),t,null,[[1,8]])})),function(){var e=this,n=arguments;return new Promise((function(r,a){var o=t.apply(e,n);function s(t){c(o,r,a,s,i,"next",t)}function i(t){c(o,r,a,s,i,"throw",t)}s(void 0)}))})()},navigateToEdit:function(t){this.$router.push({name:"accounting.projects.edit",params:{id:t}})}}};const u=(0,n(1900).Z)(l,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("b-container",{staticClass:"px-0"},[n("alert-with-retry",{attrs:{value:t.errorText},on:{retry:t.fetchData}}),t._v(" "),t.tree.length>0?n("nested-list-group",{staticClass:"mb-4",attrs:{items:t.tree},on:{itemClick:t.navigateToEdit}}):t.loaded?n("b-alert",{attrs:{variant:"info",show:""}},[t._v(t._s(t.$t("No entries registered.")))]):[t._v("\n        "+t._s(t.$t("Loading..."))+"\n    ")]],2)}),[],!1,null,null,null).exports},5921:(t,e,n)=>{n.r(e),n.d(e,{default:()=>A});var r=n(7757),a=n.n(r),o=n(381),s=n.n(o),i=n(892);function c(t,e,n,r,a,o,s){try{var i=t[o](s),c=i.value}catch(t){return void n(t)}i.done?e(c):Promise.resolve(c).then(r,a)}const l=function(t){return(e=a().mark((function e(){var n;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=(0,i.BC)("api.accounting.transactions.summary",t),e.next=3,i.hi.get(n);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})),function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function s(t){c(o,r,a,s,i,"next",t)}function i(t){c(o,r,a,s,i,"throw",t)}s(void 0)}))})();var e};var u=n(6557),d=n(1787),f=n(5778),p=n(2851);function m(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return v(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return v(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,a=function(){};return{s:a,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,s=!0,i=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return s=t.done,t},e:function(t){i=!0,o=t},f:function(){try{s||null==n.return||n.return()}finally{if(i)throw o}}}}function v(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}const h={props:{items:{type:Array,required:!0},title:{type:String,required:!0},noNameLabel:{},paramName:{},wallet:{},filterDateStart:{},filterDateEnd:{},flattenChildren:Boolean},data:function(){var t=this;return{fields:[{key:"name",label:this.title},this.flattenChildren?null:{key:"amount_formatted",label:this.$t("Amount"),class:"text-right",tdClass:function(e,n,r){return t.colorClass(r.amount)}},this.flattenChildren?{key:"total_amount_formatted",label:this.$t("Total Amount"),class:"text-right",formatter:function(t,e,n){return 0!=n.amount&&n.amount_formatted!=t?t+" ("+n.amount_formatted+")":t},tdClass:function(e,n,r){return t.colorClass(r.total_amount)}}:null]}},computed:{flattenedItems:function(){var t,e=[],n=m(this.items);try{for(n.s();!(t=n.n()).done;){var r=t.value;this.fillTree(e,r)}}catch(t){n.e(t)}finally{n.f()}return e}},methods:{colorClass:function(t){return t>0?"text-success":t<0?"text-danger":null},fillTree:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;t.push({id:e.id,name:e.name,donations:e.donations,prefix:n>0?"&nbsp;".repeat(5*n):"",amount:e.amount,amount_formatted:e.amount_formatted,total_amount:e.total_amount,total_amount_formatted:e.total_amount_formatted});var r,a=m(e.children);try{for(a.s();!(r=a.n()).done;){var o=r.value;this.fillTree(t,o,n+1)}}catch(t){a.e(t)}finally{a.f()}}}};var b=n(1900);const _=(0,b.Z)(h,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("b-table",{staticClass:"shadow-sm mb-4 bg-white",attrs:{hover:"",items:t.flattenChildren?t.flattenedItems:t.items,fields:t.fields,"show-empty":!0,"empty-text":t.$t("No data available in the selected time range.")},scopedSlots:t._u([{key:"cell(name)",fn:function(e){var r;return[e.item.prefix?n("span",{domProps:{innerHTML:t._s(e.item.prefix)}}):t._e(),t._v(" "),e.value?[t.wallet&&t.can("view-transactions")?n("router-link",{attrs:{to:{name:"accounting.transactions.index",params:{wallet:t.wallet},query:(r={},r["filter["+t.paramName+"]"]=e.item.id?e.item.id:e.value,r["filter[date_start]"]=t.filterDateStart,r["filter[date_end]"]=t.filterDateEnd,r)}}},[t._v("\n                "+t._s(e.value)+"\n            ")]):[t._v(t._s(e.value))]]:n("em",[t._v(t._s(t.noNameLabel))])]}}])})}),[],!1,null,null,null).exports;function g(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function y(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?g(Object(n),!0).forEach((function(e){w(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):g(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function w(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function x(t,e,n,r,a,o,s){try{var i=t[o](s),c=i.value}catch(t){return void n(t)}i.done?e(c):Promise.resolve(c).then(r,a)}function k(t){return function(){var e=this,n=arguments;return new Promise((function(r,a){var o=t.apply(e,n);function s(t){x(o,r,a,s,i,"next",t)}function i(t){x(o,r,a,s,i,"throw",t)}s(void 0)}))}}function $(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=S(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,a=function(){};return{s:a,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,s=!0,i=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return s=t.done,t},e:function(t){i=!0,o=t},f:function(){try{s||null==n.return||n.return()}finally{if(i)throw o}}}}function C(t){return function(t){if(Array.isArray(t))return O(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||S(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function S(t,e){if(t){if("string"==typeof t)return O(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?O(t,e):void 0}}function O(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}const j={components:{AlertWithRetry:p.Z,SummaryList:_},data:function(){var t,e,n,r,a=this;return{year:null!==(t=this.$route.query.year)&&void 0!==t?t:null,month:this.$route.query.month?this.$route.query.month-1:null,years:[s()().year()],wallets:[],totals:{},categories:[],projects:[],secondCategories:[],locations:[],allWallets:[],wallet:null!==(e=this.$route.query.wallet)&&void 0!==e?e:null,allProjects:[],project:null!==(n=this.$route.query.project)&&void 0!==n?n:null,useLocations:!1,allLocations:[],location:null!==(r=this.$route.query.location)&&void 0!==r?r:null,isLoaded:!1,isBusy:!1,errorText:null,walletFields:[{key:"name",label:this.$t("Wallet")},{key:"income_formatted",label:this.$t("Income"),class:"text-right"},{key:"spending_formatted",label:this.$t("Spending"),class:"text-right"},{key:"difference_formatted",label:this.$t("Difference"),class:"text-right",tdClass:function(t,e,n){return a.colorClass(n.difference)}},{key:"fees_formatted",label:this.$t("Fees"),class:"text-right"},{key:"amount_formatted",label:this.$t("Balance"),class:"text-right",tdClass:function(t,e,n){return a.colorClass(n.amount)}}]}},computed:{heading:function(){var t="";null!=this.year&&null!=this.month?t+=s()("".concat(this.year,"-").concat(this.month+1),"YYYY-M").startOf("month").format("MMMM YYYY"):null!=this.year?t+=this.year:t+=this.$t("All time");return t},monthOptions:function(){var t=[{value:null,text:"- ".concat(this.$t("Month")," -")}];return t.push.apply(t,C(s().months().map((function(t,e){return{value:e,text:t}})))),t},yearOptions:function(){var t=[{value:null,text:"- ".concat(this.$t("Year")," -")}];return t.push.apply(t,C(this.years.map((function(t){return{value:t,text:t}})))),t},walletOptions:function(){var t=[{value:null,text:"- ".concat(this.$t("All wallets")," -")}];return t.push.apply(t,C(this.allWallets.map((function(t){return{value:t.id,text:t.name}})))),t},projectOptions:function(){var t,e=[{value:null,text:"- ".concat(this.$t("All projects")," -")}],n=$(this.allProjects);try{for(n.s();!(t=n.n()).done;){var r=t.value;this.fillTree(e,r)}}catch(t){n.e(t)}finally{n.f()}return e},locationOptions:function(){var t=[{value:null,text:"- ".concat(this.$t("All locations")," -")}];return t.push.apply(t,C(this.allLocations.map((function(t){return{value:t,text:t}})))),t},filterDateStart:function(){return null!=this.year&&null!=this.month?s()("".concat(this.year,"-").concat(this.month+1),"YYYY-M").startOf("month").format(s().HTML5_FMT.DATE):null!=this.year?s()("".concat(this.year),"YYYY").startOf("year").format(s().HTML5_FMT.DATE):null},filterDateEnd:function(){return null!=this.year&&null!=this.month?s()("".concat(this.year,"-").concat(this.month+1),"YYYY-M").endOf("month").format(s().HTML5_FMT.DATE):null!=this.year?s()("".concat(this.year),"YYYY").endOf("year").format(s().HTML5_FMT.DATE):null}},watch:{month:function(t){this.fetchData()},year:function(t){this.fetchData()},wallet:function(t){this.fetchData()},project:function(t){this.fetchData()},location:function(t){this.fetchData()}},created:function(){var t=this;return k(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u.Z.list();case 2:return t.allWallets=e.sent.data,e.next=5,f.Z.tree();case 5:return t.allProjects=e.sent,e.next=8,d.Z.locations();case 8:return t.allLocations=e.sent,e.next=11,t.fetchData();case 11:t.isLoaded=!0;case 12:case"end":return e.stop()}}),e)})))()},methods:{fillTree:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r="";n>0&&(r+="&nbsp;".repeat(5*n)),r+=e.name,t.push({html:r,value:e.id});var a,o=$(e.children);try{for(o.s();!(a=o.n()).done;){var s=a.value;this.fillTree(t,s,n+1)}}catch(t){o.e(t)}finally{o.f()}},setToCurrentMonth:function(){var t=s()();this.year=t.year(),this.month=t.month()},colorClass:function(t){return t>0?"text-success":t<0?"text-danger":null},fetchData:function(){var t=this;return k(a().mark((function e(){var n;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.$router.push({query:y(y({},t.$route.query),{},{month:null!==t.month?t.month+1:void 0,year:t.year||void 0,wallet:t.wallet||void 0,project:t.project||void 0,location:t.location||void 0})},(function(){})),t.errorText=null,t.isBusy=!0,e.prev=3,e.next=6,l({year:t.year,month:null!==t.month?t.month+1:void 0,wallet:t.wallet,project:t.project,location:t.location});case 6:n=e.sent,t.years=n.years,t.wallets=n.wallets,t.totals=n.totals,t.projects=n.projects,t.categories=n.categories,t.secondCategories=n.second_categories,t.locations=n.locations,t.useLocations=n.use_locations,t.isBusy=!1,e.next=21;break;case 18:e.prev=18,e.t0=e.catch(3),t.errorText=e.t0;case 21:case"end":return e.stop()}}),e,null,[[3,18]])})))()}}};var B=n(3379),P=n.n(B),D=n(1762),T={insert:"head",singleton:!1};P()(D.Z,T);D.Z.locals;const A=(0,b.Z)(j,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("alert-with-retry",{attrs:{value:t.errorText},on:{retry:t.fetchData}}),t._v(" "),n("div",{staticClass:"row mb-2"},[n("div",{staticClass:"col-sm"},[n("div",{staticClass:"form-row"},[n("div",{staticClass:"col-auto mb-2"},[n("b-input-group",{attrs:{prepend:t.$t("Wallet")}},[n("b-select",{attrs:{options:t.walletOptions,disabled:t.isBusy},model:{value:t.wallet,callback:function(e){t.wallet=e},expression:"wallet"}})],1)],1),t._v(" "),t.allProjects.length>0?n("div",{staticClass:"col-auto mb-2"},[n("b-select",{attrs:{options:t.projectOptions,disabled:t.isBusy},model:{value:t.project,callback:function(e){t.project=e},expression:"project"}})],1):t._e(),t._v(" "),t.useLocations&&t.allLocations.length?n("div",{staticClass:"col-auto mb-2"},[n("b-select",{attrs:{options:t.locationOptions,disabled:t.isBusy},model:{value:t.location,callback:function(e){t.location=e},expression:"location"}})],1):t._e()])]),t._v(" "),n("div",{staticClass:"col-sm-8 col-md-9 col-lg-10 col-xl-auto"},[n("div",{staticClass:"form-row"},[n("div",{staticClass:"col-auto mb-2"},[n("b-button",{attrs:{variant:"secondary"},on:{click:function(e){return t.setToCurrentMonth()}}},[n("font-awesome-icon",{attrs:{icon:"calendar-alt"}})],1)],1),t._v(" "),n("div",{staticClass:"col-auto mb-2"},[n("b-select",{attrs:{options:t.monthOptions,disabled:t.isBusy},model:{value:t.month,callback:function(e){t.month=e},expression:"month"}})],1),t._v(" "),n("div",{staticClass:"col-auto mb-2"},[n("b-select",{attrs:{options:t.yearOptions,disabled:t.isBusy},model:{value:t.year,callback:function(e){t.year=e},expression:"year"}})],1)])])]),t._v(" "),!t.isBusy&&t.isLoaded?n("b-table",{staticClass:"shadow-sm mb-4 bg-white",attrs:{hover:"",responsive:"",items:t.wallets,fields:t.walletFields,caption:t.heading,"caption-top":""},scopedSlots:t._u([{key:"cell(name)",fn:function(e){return[t.can("view-transactions")?n("router-link",{attrs:{to:{name:"accounting.transactions.index",params:{wallet:e.item.id},query:{"filter[date_start]":t.filterDateStart,"filter[date_end]":t.filterDateEnd}}}},[t._v("\n                "+t._s(e.value)+"\n            ")]):[t._v("\n                "+t._s(e.value)+"\n            ")]]}},{key:"custom-foot",fn:function(){return[n("b-tr",[n("b-td",[n("strong",[t._v(t._s(t.$t("Sum across all wallets")))])]),t._v(" "),n("b-td",{staticClass:"text-right"},[n("strong",[t._v(t._s(t.totals.income_formatted))])]),t._v(" "),n("b-td",{staticClass:"text-right"},[n("strong",[t._v(t._s(t.totals.spending_formatted))])]),t._v(" "),n("b-td",{staticClass:"text-right",class:t.colorClass(t.totals.difference)},[n("strong",[t._v(t._s(t.totals.difference_formatted))])]),t._v(" "),n("b-td",{staticClass:"text-right"},[n("strong",[t._v(t._s(t.totals.fees_formatted))])]),t._v(" "),n("b-td",{staticClass:"text-right",class:t.colorClass(t.totals.amount)},[n("strong",[t._v(t._s(t.totals.amount_formatted))])])],1)]},proxy:!0}],null,!1,2983428016)}):t._e(),t._v(" "),!t.isBusy&&t.isLoaded?[n("b-row",[n("b-col",{attrs:{md:""}},[n("SummaryList",{attrs:{items:t.categories,title:t.$t("Categories"),paramName:"category_id",wallet:t.wallet,filterDateStart:t.filterDateStart,filterDateEnd:t.filterDateEnd,"flatten-children":""}})],1),t._v(" "),n("b-col",{attrs:{md:""}},[n("SummaryList",{attrs:{items:t.projects,title:t.$t("Projects"),paramName:"project_id",noNameLabel:t.$t("No project"),wallet:t.wallet,filterDateStart:t.filterDateStart,filterDateEnd:t.filterDateEnd,"flatten-children":""}})],1)],1),t._v(" "),n("b-row",[t.secondCategories?n("b-col",{attrs:{md:""}},[n("SummaryList",{attrs:{items:t.secondCategories,title:t.$t("Secondary Categories"),paramName:"secondary_category",noNameLabel:t.$t("No Secondary Category"),wallet:t.wallet,filterDateStart:t.filterDateStart,filterDateEnd:t.filterDateEnd}})],1):t._e(),t._v(" "),t.locations?n("b-col",{attrs:{md:""}},[n("SummaryList",{attrs:{items:t.locations,title:t.$t("Locations"),paramName:"location",noNameLabel:t.$t("No location"),wallet:t.wallet,filterDateStart:t.filterDateStart,filterDateEnd:t.filterDateEnd}})],1):t._e()],1)]:t._e()],2)}),[],!1,null,null,null).exports},5619:(t,e,n)=>{n.r(e),n.d(e,{default:()=>l});var r=n(7757),a=n.n(r),o=n(1581),s=n(8471);function i(t,e,n,r,a,o,s){try{var i=t[o](s),c=i.value}catch(t){return void n(t)}i.done?e(c):Promise.resolve(c).then(r,a)}const c={components:{SupplierForm:n(3154).Z},data:function(){return{isBusy:!1}},methods:{registerSupplier:function(t){var e,n=this;return(e=a().mark((function e(){var r;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.isBusy=!0,e.prev=1,e.next=4,s.Z.store(t);case 4:r=e.sent,(0,o.OV)(n.$t("Supplier registered.")),n.$router.push({name:"accounting.suppliers.show",params:{id:r.data.slug}}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),alert(e.t0);case 12:n.isBusy=!1;case 13:case"end":return e.stop()}}),e,null,[[1,9]])})),function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function s(t){i(o,r,a,s,c,"next",t)}function c(t){i(o,r,a,s,c,"throw",t)}s(void 0)}))})()},handleCancel:function(){this.$router.push({name:"accounting.suppliers.index"})}}};const l=(0,n(1900).Z)(c,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("b-container",{staticClass:"px-0",attrs:{fluid:""}},[n("supplier-form",{attrs:{disabled:t.isBusy},on:{submit:t.registerSupplier,cancel:t.handleCancel}})],1)}),[],!1,null,null,null).exports},7821:(t,e,n)=>{n.r(e),n.d(e,{default:()=>u});var r=n(7757),a=n.n(r),o=n(1581),s=n(8471);function i(t,e,n,r,a,o,s){try{var i=t[o](s),c=i.value}catch(t){return void n(t)}i.done?e(c):Promise.resolve(c).then(r,a)}function c(t){return function(){var e=this,n=arguments;return new Promise((function(r,a){var o=t.apply(e,n);function s(t){i(o,r,a,s,c,"next",t)}function c(t){i(o,r,a,s,c,"throw",t)}s(void 0)}))}}const l={components:{SupplierForm:n(3154).Z},props:{id:{required:!0}},data:function(){return{supplier:null,isBusy:!1}},watch:{$route:function(){this.fetchSupplier()}},created:function(){var t=this;return c(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.fetchSupplier();case 1:case"end":return e.stop()}}),e)})))()},methods:{fetchSupplier:function(){var t=this;return c(a().mark((function e(){var n;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,s.Z.find(t.id);case 3:n=e.sent,t.supplier=n.data,e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),alert(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))()},updateSupplier:function(t){var e=this;return c(a().mark((function n(){var r;return a().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return e.isBusy=!0,n.prev=1,n.next=4,s.Z.update(e.id,t);case 4:r=n.sent,(0,o.OV)(e.$t("Supplier updated.")),e.$router.push({name:"accounting.suppliers.show",parms:{id:r.data.slug}}),n.next=12;break;case 9:n.prev=9,n.t0=n.catch(1),alert(n.t0);case 12:e.isBusy=!1;case 13:case"end":return n.stop()}}),n,null,[[1,9]])})))()},deleteSupplier:function(){var t=this;return c(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.isBusy=!0,e.prev=1,e.next=4,s.Z.delete(t.id);case 4:(0,o.OV)(t.$t("Supplier deleted.")),t.$router.push({name:"accounting.suppliers.index"}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),alert(e.t0);case 11:t.isBusy=!1;case 12:case"end":return e.stop()}}),e,null,[[1,8]])})))()},handleCancel:function(){this.$router.push({name:"accounting.suppliers.show",parms:{id:this.supplier.slug}})}}};const u=(0,n(1900).Z)(l,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.supplier?n("b-container",{staticClass:"px-0",attrs:{fluid:""}},[n("supplier-form",{attrs:{supplier:t.supplier,disabled:t.isBusy},on:{submit:t.updateSupplier,cancel:t.handleCancel,delete:t.deleteSupplier}}),t._v(" "),n("hr"),t._v(" "),n("p",{staticClass:"text-right"},[n("small",[t._v("\n            "+t._s(t.$t("Last updated"))+":\n            "+t._s(t._f("dateTimeFormat")(t.supplier.updated_at))+"\n        ")])])],1):n("p",[t._v("\n    "+t._s(t.$t("Loading..."))+"\n")])}),[],!1,null,null,null).exports},8806:(t,e,n)=>{n.r(e),n.d(e,{default:()=>u});var r=n(7757),a=n.n(r),o=n(8496),s=n(8471);function i(t,e,n,r,a,o,s){try{var i=t[o](s),c=i.value}catch(t){return void n(t)}i.done?e(c):Promise.resolve(c).then(r,a)}function c(t){return function(){var e=this,n=arguments;return new Promise((function(r,a){var o=t.apply(e,n);function s(t){i(o,r,a,s,c,"next",t)}function c(t){i(o,r,a,s,c,"throw",t)}s(void 0)}))}}const l={components:{TabNav:o.Z},props:{id:{required:!0}},data:function(){return{transactionsCount:null,tabNavItems:[{to:{name:"accounting.suppliers.show"},icon:"info",text:this.$t("Details")},{to:{name:"accounting.suppliers.show.transactions"},icon:"list",text:this.$t("Transactions"),key:"transactions"}]}},watch:{$route:function(){this.fetchData()}},created:function(){var t=this;return c(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.fetchData();case 1:case"end":return e.stop()}}),e)})))()},methods:{fetchData:function(){var t=this;return c(a().mark((function e(){var n;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,s.Z.find(t.id);case 3:n=e.sent,t.transactionsCount=n.data.transactions_count,e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),t.error=e.t0;case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))()}}};const u=(0,n(1900).Z)(l,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("tab-nav",{attrs:{items:t.tabNavItems},scopedSlots:t._u([{key:"after(transactions)",fn:function(){return[t.transactionsCount>0?n("b-badge",{staticClass:"ml-1"},[t._v("\n                "+t._s(t.transactionsCount)+"\n            ")]):t._e()]},proxy:!0}])}),t._v(" "),n("router-view")],1)}),[],!1,null,null,null).exports},2536:(t,e,n)=>{n.r(e),n.d(e,{default:()=>d});var r=n(7757),a=n.n(r),o=n(8471),s=n(6951),i=n(5197),c=n(8158);function l(t,e,n,r,a,o,s){try{var i=t[o](s),c=i.value}catch(t){return void n(t)}i.done?e(c):Promise.resolve(c).then(r,a)}const u={components:{BaseTable:s.Z,EmailLink:c.Z,PhoneLink:i.Z},data:function(){return{fields:[{key:"name",label:this.$t("Name"),sortable:!0,tdClass:"align-middle"},{key:"category",label:this.$t("Category"),sortable:!0,tdClass:"align-middle"},{key:"transactions_count",label:this.$t("Transactions"),tdClass:"align-middle",class:"fit text-right d-none d-md-table-cell"},{key:"contact",label:this.$t("Contact"),class:"fit",tdClass:"align-middle"}]}},methods:{fetchData:function(t){return(e=a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",o.Z.list(t));case 1:case"end":return e.stop()}}),e)})),function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function s(t){l(o,r,a,s,i,"next",t)}function i(t){l(o,r,a,s,i,"throw",t)}s(void 0)}))})();var e}}};const d=(0,n(1900).Z)(u,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("base-table",{ref:"table",attrs:{id:"suppliers-table",fields:t.fields,"api-method":t.fetchData,"default-sort-by":"name","empty-text":t.$t("No data registered."),"items-per-page":25,"filter-placeholder":t.$t("Type to search ({fields})...",{fields:[t.$t("Name"),t.$t("Category"),t.$t("Phone"),t.$t("Tax number"),t.$t("IBAN"),t.$t("Remarks")].join(", ")})},scopedSlots:t._u([{key:"cell(name)",fn:function(e){return[n("router-link",{attrs:{to:{name:"accounting.suppliers.show",params:{id:e.item.slug}}}},[t._v("\n            "+t._s(e.value)+"\n        ")])]}},{key:"cell(contact)",fn:function(e){return[e.item.phone?n("phone-link",{attrs:{value:e.item.phone,"icon-only":""}}):t._e(),t._v(" "),e.item.mobile?n("phone-link",{attrs:{value:e.item.mobile,"icon-only":"",mobile:""}}):t._e(),t._v(" "),e.item.email?n("email-link",{attrs:{value:e.item.email,"icon-only":""}}):t._e()]}}])})}),[],!1,null,null,null).exports},9207:(t,e,n)=>{n.r(e),n.d(e,{default:()=>p});var r=n(7757),a=n.n(r),o=n(1581),s=n(1787),i=n(6557),c=n(8851),l=n(629);function u(t,e,n,r,a,o,s){try{var i=t[o](s),c=i.value}catch(t){return void n(t)}i.done?e(c):Promise.resolve(c).then(r,a)}function d(t){return function(){var e=this,n=arguments;return new Promise((function(r,a){var o=t.apply(e,n);function s(t){u(o,r,a,s,i,"next",t)}function i(t){u(o,r,a,s,i,"throw",t)}s(void 0)}))}}const f={components:{TransactionForm:c.Z},props:{wallet:{required:!0}},data:function(){return{isBusy:!1,walletData:null}},computed:(0,l.rn)(["settings"]),created:function(){var t=this;return d(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.Z.find(t.wallet);case 2:t.walletData=e.sent.data;case 3:case"end":return e.stop()}}),e)})))()},methods:{handleCreate:function(t){var e=this;return d(a().mark((function n(){var r;return a().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return e.isBusy=!0,n.prev=1,n.next=4,s.Z.store(e.wallet,t);case 4:r=n.sent,(0,o.OV)(e.$t("Transaction registered.")),e.$router.push({name:"accounting.transactions.show",params:{id:r.id}}),n.next=12;break;case 9:n.prev=9,n.t0=n.catch(1),alert(n.t0);case 12:e.isBusy=!1;case 13:case"end":return n.stop()}}),n,null,[[1,9]])})))()},handleCancel:function(){this.$router.push({name:"accounting.transactions.index",params:{wallet:this.wallet}})}}};const p=(0,n(1900).Z)(f,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.walletData?n("b-container",{staticClass:"px-0"},[n("TransactionForm",{attrs:{defaultReceiptNumber:t.walletData.next_free_receipt,disabled:t.isBusy,"use-secondary-categories":t.settings["accounting.transactions.use_secondary_categories"],"use-locations":t.settings["accounting.transactions.use_locations"],"use-cost-centers":t.settings["accounting.transactions.use_cost_centers"]},on:{submit:t.handleCreate,cancel:t.handleCancel}})],1):n("p",[t._v("\n    "+t._s(t.$t("Loading..."))+"\n")])}),[],!1,null,null,null).exports},9595:(t,e,n)=>{n.r(e),n.d(e,{default:()=>f});var r=n(7757),a=n.n(r),o=n(1581),s=n(1787),i=n(8851),c=n(629);function l(t,e,n,r,a,o,s){try{var i=t[o](s),c=i.value}catch(t){return void n(t)}i.done?e(c):Promise.resolve(c).then(r,a)}function u(t){return function(){var e=this,n=arguments;return new Promise((function(r,a){var o=t.apply(e,n);function s(t){l(o,r,a,s,i,"next",t)}function i(t){l(o,r,a,s,i,"throw",t)}s(void 0)}))}}const d={components:{TransactionForm:i.Z},props:{id:{required:!0}},data:function(){return{transaction:null,isBusy:!1}},computed:(0,c.rn)(["settings"]),watch:{$route:function(){this.fetch()}},created:function(){var t=this;return u(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.fetch();case 1:case"end":return e.stop()}}),e)})))()},methods:{fetch:function(){var t=this;return u(a().mark((function e(){var n;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,s.Z.find(t.id);case 3:n=e.sent,t.transaction=n.data,e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),alert(e.t0),console.error(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,7]])})))()},handleUpdate:function(t){var e=this;return u(a().mark((function n(){return a().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return e.isBusy=!0,n.prev=1,n.next=4,s.Z.update(e.id,t);case 4:(0,o.OV)(e.$t("Transaction updated.")),e.$router.push({name:"accounting.transactions.show",params:{id:e.id}}),n.next=11;break;case 8:n.prev=8,n.t0=n.catch(1),alert(n.t0);case 11:e.isBusy=!1;case 12:case"end":return n.stop()}}),n,null,[[1,8]])})))()},handleDelete:function(){var t=this;return u(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.isBusy=!0,e.prev=1,e.next=4,s.Z.delete(t.id);case 4:(0,o.OV)(t.$t("Transaction deleted.")),t.$router.push({name:"accounting.transactions.index",params:{wallet:t.transaction.wallet_id}}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),alert(e.t0);case 11:t.isBusy=!1;case 12:case"end":return e.stop()}}),e,null,[[1,8]])})))()},handleCancel:function(){this.$router.push({name:"accounting.transactions.show",params:{id:this.id}})}}};const f=(0,n(1900).Z)(d,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.transaction?n("b-container",{staticClass:"px-0"},[n("TransactionForm",{attrs:{transaction:t.transaction,disabled:t.isBusy,"use-secondary-categories":t.settings["accounting.transactions.use_secondary_categories"],"use-locations":t.settings["accounting.transactions.use_locations"],"use-cost-centers":t.settings["accounting.transactions.use_cost_centers"]},on:{submit:t.handleUpdate,delete:t.handleDelete,cancel:t.handleCancel}})],1):n("p",[t._v("\n    "+t._s(t.$t("Loading..."))+"\n")])}),[],!1,null,null,null).exports},8495:(t,e,n)=>{n.r(e),n.d(e,{default:()=>_});var r=n(7757),a=n.n(r),o=n(1787),s=n(8518),i=n(6535);function c(t,e,n,r,a,o,s){try{var i=t[o](s),c=i.value}catch(t){return void n(t)}i.done?e(c):Promise.resolve(c).then(r,a)}function l(t){return function(){var e=this,n=arguments;return new Promise((function(r,a){var o=t.apply(e,n);function s(t){c(o,r,a,s,i,"next",t)}function i(t){c(o,r,a,s,i,"throw",t)}s(void 0)}))}}const u={components:{TwoColListGroupItem:s.Z,TransactionPictures:i.Z},props:{transaction:{required:!0},disabled:Boolean},data:function(){return{isBusy:!1}},methods:{markControlled:function(){var t=this;return l(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.isBusy=!0,e.prev=1,e.next=4,o.Z.markControlled(t.transaction);case 4:t.$emit("update"),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),alert(e.t0);case 10:t.isBusy=!1;case 11:case"end":return e.stop()}}),e,null,[[1,7]])})))()},undoControlled:function(){var t=this;return l(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.isBusy=!0,e.prev=1,e.next=4,o.Z.undoControlled(t.transaction);case 4:t.$emit("update"),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),alert(e.t0);case 10:t.isBusy=!1;case 11:case"end":return e.stop()}}),e,null,[[1,7]])})))()},undoBooking:function(){var t=this;return l(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(confirm(t.$t("Really undo booking?"))){e.next=2;break}return e.abrupt("return");case 2:return t.isBusy=!0,e.prev=3,e.next=6,o.Z.undoBooking(t.transaction);case 6:t.$emit("update"),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(3),alert(e.t0);case 12:t.isBusy=!1;case 13:case"end":return e.stop()}}),e,null,[[3,9]])})))()}}};var d=n(1900);const f=(0,d.Z)(u,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("b-list-group",{staticClass:"shawow-sm mb-4",attrs:{flush:""}},[n("two-col-list-group-item",{attrs:{title:t.$t("Wallet")}},[n("router-link",{attrs:{to:{name:"accounting.transactions.index",params:{wallet:t.transaction.wallet_id}}}},[t._v("\n            "+t._s(t.transaction.wallet_name)+"\n        ")])],1),t._v(" "),n("two-col-list-group-item",{attrs:{title:t.$t("Receipt")}},[t._v("\n        "+t._s(t.transaction.receipt_no)+"\n    ")]),t._v(" "),n("two-col-list-group-item",{attrs:{title:t.$t("Date")}},[t._v("\n        "+t._s(t._f("dateFormat")(t.transaction.date))+"\n    ")]),t._v(" "),t.transaction.budget_id?n("two-col-list-group-item",{attrs:{title:t.$t("Budget")}},[t.can("view-budgets")?n("router-link",{attrs:{to:{name:"accounting.budgets.show",params:{id:t.transaction.budget_id}}}},[t._v(t._s(t.transaction.budget_name))]):[t._v("\n            "+t._s(t.transaction.budget_name)+"\n        ")]],2):t._e(),t._v(" "),n("two-col-list-group-item",{attrs:{title:t.$t("Amount")}},[n("span",{class:{"text-success":"income"==t.transaction.type,"text-danger":"spending"==t.transaction.type}},[t._v(t._s(t.transaction.amount_formatted))]),t._v(" "),"income"==t.transaction.type?n("small",[t._v("("+t._s(t.$t("Income"))+")")]):t._e(),t._v(" "),"spending"==t.transaction.type?n("small",[t._v("("+t._s(t.$t("Spending"))+")")]):t._e()]),t._v(" "),t.transaction.fees?n("two-col-list-group-item",{attrs:{title:t.$t("Transaction fees")}},[t._v("\n        "+t._s(t.transaction.fees_formatted)+"\n    ")]):t._e(),t._v(" "),n("two-col-list-group-item",{attrs:{title:t.$t("Category")}},[t._v("\n        "+t._s(t.transaction.category_full_name)+"\n    ")]),t._v(" "),t.transaction.secondary_category?n("two-col-list-group-item",{attrs:{title:t.$t("Secondary Category")}},[t._v("\n        "+t._s(t.transaction.secondary_category)+"\n    ")]):t._e(),t._v(" "),t.transaction.project_id?n("two-col-list-group-item",{attrs:{title:t.$t("Project")}},[t._v("\n        "+t._s(t.transaction.project_full_name)+"\n    ")]):t._e(),t._v(" "),t.transaction.location?n("two-col-list-group-item",{attrs:{title:t.$t("Location")}},[t._v("\n        "+t._s(t.transaction.location)+"\n    ")]):t._e(),t._v(" "),t.transaction.cost_center?n("two-col-list-group-item",{attrs:{title:t.$t("Cost Center")}},[t._v("\n        "+t._s(t.transaction.cost_center)+"\n    ")]):t._e(),t._v(" "),n("two-col-list-group-item",{attrs:{title:t.$t("Description")}},[t._v("\n        "+t._s(t.transaction.description)+"\n    ")]),t._v(" "),t.transaction.supplier?n("two-col-list-group-item",{attrs:{title:t.$t("Supplier")}},[t.transaction.supplier.can_view?n("router-link",{attrs:{to:{name:"accounting.suppliers.show",params:{id:t.transaction.supplier.slug}}}},[t._v("\n            "+t._s(t.transaction.supplier.name)+"\n        ")]):[t._v("\n            "+t._s(t.transaction.supplier.name)+"\n        ")],t._v(" "),t.transaction.supplier.category?[n("br"),n("small",[t._v(t._s(t.transaction.supplier.category))])]:t._e()],2):t._e(),t._v(" "),t.transaction.attendee?n("two-col-list-group-item",{attrs:{title:t.$t("Attendee")}},[t._v("\n        "+t._s(t.transaction.attendee)+"\n    ")]):t._e(),t._v(" "),t.transaction.remarks?n("two-col-list-group-item",{attrs:{title:t.$t("Remarks")}},[t._v("\n        "+t._s(t.transaction.remarks)+"\n    ")]):t._e(),t._v(" "),n("two-col-list-group-item",{attrs:{title:t.$t("Registered")}},[t._v("\n        "+t._s(t._f("dateTimeFormat")(t.transaction.created_at))+"\n    ")]),t._v(" "),n("two-col-list-group-item",{attrs:{title:t.$t("Last updated")}},[t._v("\n        "+t._s(t._f("dateTimeFormat")(t.transaction.updated_at))+"\n    ")]),t._v(" "),n("two-col-list-group-item",{attrs:{title:t.$t("Controlled")}},[t.transaction.controlled_at?[t._v("\n            "+t._s(t._f("dateTimeFormat")(t.transaction.controlled_at))+"\n            "),t.transaction.controlled_by?[n("small",[t._v("("+t._s(t.transaction.controller_name)+")")]),t._v(" "),t.transaction.can_undo_controlling?n("b-button",{attrs:{variant:"secondary",size:"sm",disabled:t.isBusy||t.disabled},on:{click:function(e){return t.undoControlled()}}},[t._v("\n                    "+t._s(t.$t("Undo"))+"\n                ")]):t._e()]:t._e()]:t.transaction.can_control?n("b-button",{attrs:{variant:"primary",size:"sm",disabled:t.isBusy||t.disabled},on:{click:function(e){return t.markControlled()}}},[t._v("\n            "+t._s(t.$t("Mark as controlled"))+"\n        ")]):[t._v("\n            "+t._s(t.$t("No"))+"\n        ")]],2),t._v(" "),t.transaction.booked?n("two-col-list-group-item",{attrs:{title:t.$t("Booked")}},[t.transaction.can_book_externally&&t.transaction.external_id?[t._v("\n            Webling:\n            "),t.transaction.external_url?[n("a",{attrs:{href:t.transaction.external_url,target:"_blank"}},[t._v(t._s(t.transaction.external_id))])]:[t._v("\n                "+t._s(t.transaction.external_id)+"\n            ")]]:[t._v("\n            "+t._s(t.$t("Yes"))+"\n        ")],t._v(" "),t.transaction.can_undo_booking?n("p",{staticClass:"mb-0 mt-2"},[n("button",{staticClass:"btn btn-sm btn-outline-danger",attrs:{type:"submit",disabled:t.isBusy||t.disabled},on:{click:function(e){return t.undoBooking()}}},[n("font-awesome-icon",{attrs:{icon:"undo"}}),t._v("\n                "+t._s(t.$t("Undo booking"))+"\n            ")],1)]):t._e()],2):t._e(),t._v(" "),this.transaction.receipt_pictures.length>0||t.transaction.can_update?n("b-list-group-item",[n("TransactionPictures",{attrs:{transaction:t.transaction,allowUpload:""}})],1):t._e()],1)}),[],!1,null,null,null).exports;var p=n(6917),m=n(8496);function v(t,e,n,r,a,o,s){try{var i=t[o](s),c=i.value}catch(t){return void n(t)}i.done?e(c):Promise.resolve(c).then(r,a)}function h(t){return function(){var e=this,n=arguments;return new Promise((function(r,a){var o=t.apply(e,n);function s(t){v(o,r,a,s,i,"next",t)}function i(t){v(o,r,a,s,i,"throw",t)}s(void 0)}))}}const b={components:{TransactionDetails:f,TransactionHistory:p.Z,TabNav:m.Z},props:{id:{required:!0}},data:function(){return{transaction:null,isBusy:!1}},watch:{$route:function(){this.fetch()}},created:function(){var t=this;return h(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.fetch();case 1:case"end":return e.stop()}}),e)})))()},methods:{fetch:function(){var t=this;return h(a().mark((function e(){var n;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.isBusy=!0,e.prev=1,e.next=4,o.Z.find(t.id);case 4:n=e.sent,t.transaction=n.data,e.next=12;break;case 8:e.prev=8,e.t0=e.catch(1),alert(e.t0),console.error(e.t0);case 12:t.isBusy=!1;case 13:case"end":return e.stop()}}),e,null,[[1,8]])})))()},fetchHistory:function(){var t=this;return h(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.Z.transactionHistory(t.id);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))()}}};const _=(0,d.Z)(b,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.transaction?n("b-container",{staticClass:"px-0"},[n("b-tabs",{attrs:{justified:""}},[n("b-tab",{attrs:{title:t.$t("Details"),active:""}},[n("TransactionDetails",{attrs:{transaction:t.transaction,disabled:t.isBusy},on:{update:t.fetch}})],1),t._v(" "),n("b-tab",{attrs:{title:t.$t("History"),lazy:""}},[n("TransactionHistory",{attrs:{entries:t.fetchHistory}})],1)],1),t._v(" "),n("p",[t.transaction.can_update?n("router-link",{staticClass:"btn btn-primary",attrs:{to:{name:"accounting.transactions.edit",params:{id:t.id}}}},[n("font-awesome-icon",{attrs:{icon:"edit"}}),t._v(" "+t._s(t.$t("Edit")))],1):t._e(),t._v(" "),n("router-link",{staticClass:"btn btn-secondary",attrs:{to:{name:"accounting.transactions.index",params:{wallet:t.transaction.wallet_id}}}},[n("font-awesome-icon",{attrs:{icon:"times-circle"}}),t._v("\n            "+t._s(t.$t("Overview"))+"\n        ")],1)],1)],1):n("p",[t._v("\n    "+t._s(t.$t("Loading..."))+"\n")])}),[],!1,null,null,null).exports},9136:(t,e,n)=>{n.r(e),n.d(e,{default:()=>g});var r=n(7757),a=n.n(r),o=n(6557),s=n(1787),i=n(6951);function c(t,e,n,r,a,o,s){try{var i=t[o](s),c=i.value}catch(t){return void n(t)}i.done?e(c):Promise.resolve(c).then(r,a)}function l(t){return function(){var e=this,n=arguments;return new Promise((function(r,a){var o=t.apply(e,n);function s(t){c(o,r,a,s,i,"next",t)}function i(t){c(o,r,a,s,i,"throw",t)}s(void 0)}))}}const u={components:{TransactionPictures:n(6535).Z},props:{transaction:{required:!0}},data:function(){return{isBusy:!1,controlled:!1}},methods:{markControlled:function(){var t=this;return l(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.isBusy=!0,e.prev=1,e.next=4,s.Z.markControlled(t.transaction);case 4:t.controlled=!0,e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),alert(e.t0);case 10:t.isBusy=!1;case 11:case"end":return e.stop()}}),e,null,[[1,7]])})))()},undoControlled:function(){var t=this;return l(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.isBusy=!0,e.prev=1,e.next=4,s.Z.undoControlled(t.transaction);case 4:t.controlled=!1,e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),alert(e.t0);case 10:t.isBusy=!1;case 11:case"end":return e.stop()}}),e,null,[[1,7]])})))()}}};var d=n(1900);const f=(0,d.Z)(u,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("dl",{staticClass:"row mb-0"},[n("dt",{staticClass:"col-sm-3"},[t._v(t._s(t.$t("Receipt")))]),t._v(" "),n("dd",{staticClass:"col-sm-9"},[t._v(t._s(t.transaction.receipt_no))]),t._v(" "),n("dt",{staticClass:"col-sm-3"},[t._v(t._s(t.$t("Date")))]),t._v(" "),n("dd",{staticClass:"col-sm-9"},[t._v(t._s(t._f("dateFormat")(t.transaction.date)))]),t._v(" "),n("dt",{staticClass:"col-sm-3"},[t._v(t._s(t.$t("Amount")))]),t._v(" "),n("dd",{staticClass:"col-sm-9"},[n("span",{class:{"text-success":"income"==t.transaction.type,"text-danger":"spending"==t.transaction.type}},[t._v(t._s(t.transaction.amount_formatted))]),t._v(" "),"income"==t.transaction.type?n("small",[t._v("("+t._s(t.$t("Income"))+")")]):t._e(),t._v(" "),"spending"==t.transaction.type?n("small",[t._v("("+t._s(t.$t("Spending"))+")")]):t._e()]),t._v(" "),t.transaction.budget_id?[n("dt",{staticClass:"col-sm-3"},[t._v(t._s(t.$t("Budget")))]),t._v(" "),n("dd",{staticClass:"col-sm-9"},[t._v(t._s(t.transaction.budget_name))])]:t._e(),t._v(" "),t.transaction.fees?[n("dt",{staticClass:"col-sm-3"},[t._v(t._s(t.$t("Transaction fees")))]),t._v(" "),n("dd",{staticClass:"col-sm-9"},[t._v(t._s(t.transaction.fees_formatted))])]:t._e(),t._v(" "),n("dt",{staticClass:"col-sm-3"},[t._v(t._s(t.$t("Category")))]),t._v(" "),n("dd",{staticClass:"col-sm-9"},[t._v(t._s(t.transaction.category_full_name))]),t._v(" "),t.transaction.secondary_category?[n("dt",{staticClass:"col-sm-3"},[t._v(t._s(t.$t("Secondary Category")))]),t._v(" "),n("dd",{staticClass:"col-sm-9"},[t._v(t._s(t.transaction.secondary_category))])]:t._e(),t._v(" "),t.transaction.project_id?[n("dt",{staticClass:"col-sm-3"},[t._v(t._s(t.$t("Project")))]),t._v(" "),n("dd",{staticClass:"col-sm-9"},[t._v(t._s(t.transaction.project_full_name))])]:t._e(),t._v(" "),t.transaction.location?[n("dt",{staticClass:"col-sm-3"},[t._v(t._s(t.$t("Location")))]),t._v(" "),n("dd",{staticClass:"col-sm-9"},[t._v(t._s(t.transaction.location))])]:t._e(),t._v(" "),t.transaction.cost_center?[n("dt",{staticClass:"col-sm-3"},[t._v(t._s(t.$t("Cost Center")))]),t._v(" "),n("dd",{staticClass:"col-sm-9"},[t._v(t._s(t.transaction.cost_center))])]:t._e(),t._v(" "),n("dt",{staticClass:"col-sm-3"},[t._v(t._s(t.$t("Description")))]),t._v(" "),n("dd",{staticClass:"col-sm-9"},[t._v(t._s(t.transaction.description))]),t._v(" "),t.transaction.supplier?[n("dt",{staticClass:"col-sm-3"},[t._v(t._s(t.$t("Supplier")))]),t._v(" "),n("dd",{staticClass:"col-sm-9"},[t._v("\n                "+t._s(t.transaction.supplier.name)+"\n                "),t.transaction.supplier.category?[n("br"),n("small",[t._v(t._s(t.transaction.supplier.category))])]:t._e()],2)]:t._e(),t._v(" "),t.transaction.attendee?[n("dt",{staticClass:"col-sm-3"},[t._v(t._s(t.$t("Attendee")))]),t._v(" "),n("dd",{staticClass:"col-sm-9"},[t._v(t._s(t.transaction.attendee))])]:t._e(),t._v(" "),t.transaction.remarks?[n("dt",{staticClass:"col-sm-3"},[t._v(t._s(t.$t("Remarks")))]),t._v(" "),n("dd",{staticClass:"col-sm-9"},[t._v(t._s(t.transaction.remarks))])]:t._e(),t._v(" "),n("dt",{staticClass:"col-sm-3"},[t._v(t._s(t.$t("Registered")))]),t._v(" "),n("dd",{staticClass:"col-sm-9"},[t._v("\n            "+t._s(t._f("dateTimeFormat")(t.transaction.created_at))+"\n        ")]),t._v(" "),n("dt",{staticClass:"col-sm-3"},[t._v(t._s(t.$t("Last updated")))]),t._v(" "),n("dd",{staticClass:"col-sm-9"},[t._v("\n            "+t._s(t._f("dateTimeFormat")(t.transaction.updated_at))+"\n        ")])],2),t._v(" "),n("TransactionPictures",{attrs:{transaction:t.transaction}}),t._v(" "),n("b-button",{attrs:{to:{name:"accounting.transactions.show",params:{id:t.transaction.id}}}},[n("font-awesome-icon",{attrs:{icon:"search"}}),t._v("\n        "+t._s(t.$t("Details"))+"\n    ")],1),t._v(" "),t.controlled?[t.transaction.can_undo_controlling?n("b-button",{attrs:{variant:"warning",disabled:t.isBusy},on:{click:function(e){return t.undoControlled()}}},[n("font-awesome-icon",{attrs:{icon:"undo"}}),t._v("\n            "+t._s(t.$t("Undo"))+"\n        ")],1):t._e()]:t.transaction.can_control?n("b-button",{attrs:{variant:"primary",disabled:t.isBusy},on:{click:function(e){return t.markControlled()}}},[n("font-awesome-icon",{attrs:{icon:"check"}}),t._v("\n        "+t._s(t.$t("Mark as controlled"))+"\n    ")],1):t._e()],2)}),[],!1,null,null,null).exports;function p(t,e,n,r,a,o,s){try{var i=t[o](s),c=i.value}catch(t){return void n(t)}i.done?e(c):Promise.resolve(c).then(r,a)}function m(t){return function(){var e=this,n=arguments;return new Promise((function(r,a){var o=t.apply(e,n);function s(t){p(o,r,a,s,i,"next",t)}function i(t){p(o,r,a,s,i,"throw",t)}s(void 0)}))}}function v(t){return function(t){if(Array.isArray(t))return h(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return h(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return h(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function h(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var b="accounting.transactions.controlling";const _={title:function(){return this.$t("Controlling")},components:{BaseTable:i.Z,TransactionControllingDetails:f},data:function(){return{isBusy:!1,wallets:[],wallet:sessionStorage.getItem(b+".wallet")?sessionStorage.getItem(b+".wallet"):null,dateFrom:sessionStorage.getItem(b+".dateFrom")?sessionStorage.getItem(b+".dateFrom"):null,dateTo:sessionStorage.getItem(b+".dateTo")?sessionStorage.getItem(b+".dateTo"):null,fields:[{key:"wallet_name",label:this.$t("Wallet"),class:"fit"},{key:"details",label:this.$t("Details")}]}},computed:{walletOptions:function(){return[{value:null,text:this.$t("All wallets")}].concat(v(this.wallets.map((function(t){return{value:t.id,text:t.name}}))))}},watch:{wallet:function(){this.refresh()},dateFrom:function(){this.refresh()},dateTo:function(){this.refresh()}},created:function(){var t=this;return m(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.isBusy=!0,e.prev=1,e.next=4,o.Z.list();case 4:t.wallets=e.sent.data,e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),alert(e.t0);case 10:t.isBusy=!1;case 11:case"end":return e.stop()}}),e,null,[[1,7]])})))()},methods:{refresh:function(){this.$refs.table.refresh()},fetchData:function(t){var e=this;return m(a().mark((function n(){return a().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return e.wallet?(t.wallet=e.wallet,sessionStorage.setItem(b+".wallet",e.wallet)):sessionStorage.removeItem(b+".wallet"),e.dateFrom?(t.from=e.dateFrom,sessionStorage.setItem(b+".dateFrom",e.dateFrom)):sessionStorage.removeItem(b+".dateFrom"),e.dateTo?(t.to=e.dateTo,sessionStorage.setItem(b+".dateTo",e.dateTo)):sessionStorage.removeItem(b+".dateTo"),n.next=5,s.Z.listControllable(t);case 5:return n.abrupt("return",n.sent);case 6:case"end":return n.stop()}}),n)})))()}}};const g=(0,d.Z)(_,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("b-form-row",{staticClass:"mb-3"},[n("b-col",{attrs:{cols:"auto"}},[n("b-input-group",{attrs:{prepend:t.$t("Wallet")}},[n("b-select",{attrs:{options:t.walletOptions,disabled:t.isBusy},model:{value:t.wallet,callback:function(e){t.wallet=e},expression:"wallet"}})],1)],1),t._v(" "),n("b-col",{attrs:{cols:"auto"}},[n("b-input-group",{attrs:{prepend:t.$t("From")}},[n("b-form-datepicker",{attrs:{"reset-button":"","today-button":"",max:t.dateTo},model:{value:t.dateFrom,callback:function(e){t.dateFrom=e},expression:"dateFrom"}})],1)],1),t._v(" "),n("b-col",{attrs:{cols:"auto"}},[n("b-input-group",{attrs:{prepend:t.$t("To")}},[n("b-form-datepicker",{attrs:{"reset-button":"","today-button":"",min:t.dateFrom},model:{value:t.dateTo,callback:function(e){t.dateTo=e},expression:"dateTo"}})],1)],1),t._v(" "),n("b-col",{attrs:{cols:"auto"}},[n("b-button",{attrs:{"aria-label":t.$t("Refresh")},on:{click:t.refresh}},[n("font-awesome-icon",{attrs:{icon:"sync-alt"}})],1)],1)],1),t._v(" "),n("base-table",{ref:"table",attrs:{id:"transactions-controllable-table","api-method":t.fetchData,fields:t.fields,"empty-text":t.$t("No transactions found."),"items-per-page":10,"default-sort-by":"date","no-filter":""},scopedSlots:t._u([{key:"cell(details)",fn:function(t){return[n("TransactionControllingDetails",{attrs:{transaction:t.item}})]}}])})],1)}),[],!1,null,null,null).exports},3786:(t,e,n)=>{n.r(e),n.d(e,{default:()=>c});var r=n(7757),a=n.n(r),o=n(1787);function s(t,e,n,r,a,o,s){try{var i=t[o](s),c=i.value}catch(t){return void n(t)}i.done?e(c):Promise.resolve(c).then(r,a)}const i={title:function(){return this.$t("History")},components:{TransactionHistory:n(6917).Z},data:function(){return{date:null}},watch:{date:function(){this.$refs.history.refresh()}},methods:{fetchHistory:function(t){var e,n=this;return(e=a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.date&&(t.date=n.date),e.next=3,o.Z.history(t);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})),function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(t){s(o,r,a,i,c,"next",t)}function c(t){s(o,r,a,i,c,"throw",t)}i(void 0)}))})()}}};const c=(0,n(1900).Z)(i,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("b-row",{staticClass:"mb-3"},[n("b-col",{attrs:{cols:"auto"}},[n("b-input-group",{attrs:{prepend:t.$t("Date")}},[n("b-form-datepicker",{attrs:{"reset-button":"","today-button":""},model:{value:t.date,callback:function(e){t.date=e},expression:"date"}})],1)],1)],1),t._v(" "),n("TransactionHistory",{ref:"history",attrs:{entries:t.fetchHistory,showId:""}})],1)}),[],!1,null,null,null).exports},4748:(t,e,n)=>{n.r(e),n.d(e,{default:()=>E});var r=n(7757),a=n.n(r),o=n(129),s=n.n(o),i=n(6557),c=n(1787),l=n(6951),u=n(8256);function d(t,e,n,r,a,o,s){try{var i=t[o](s),c=i.value}catch(t){return void n(t)}i.done?e(c):Promise.resolve(c).then(r,a)}const f={components:{FsLightbox:n.n(u)()},props:{transaction:{required:!0},value:{required:!0,type:Array}},data:function(){return{pictures:this.value,toggler:!1,isBusy:!1}},computed:{actualImages:function(){return this.pictures.filter((function(t){return"image"==t.type}))},icon:function(){if(this.isBusy)return"spinner";if(0==this.pictures.length)return"upload";var t=this.actualImages.length;return t>1?"images":1==t?"image":"file"},iconSpin:function(){return 1==this.isBusy},variant:function(){return this.isBusy?"info":this.pictures.length>0?"success":"warning"}},methods:{handleClick:function(){this.actualImages.length>0?this.toggler=!this.toggler:this.pictures.length>0?window.open(this.pictures[0].url,"_blank"):this.$refs.fileInput.click()},handleUpload:function(t){var e,n=this;return(e=a().mark((function e(){var r;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!=t.target.files.length){e.next=3;break}return e.abrupt("return");case 3:return n.isBusy=!0,e.prev=4,e.next=7,c.Z.updateReceipt(n.transaction,t.target.files);case 7:r=e.sent,n.pictures=r,e.next=14;break;case 11:e.prev=11,e.t0=e.catch(4),alert(e.t0);case 14:n.isBusy=!1;case 15:case"end":return e.stop()}}),e,null,[[4,11]])})),function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function s(t){d(o,r,a,s,i,"next",t)}function i(t){d(o,r,a,s,i,"throw",t)}s(void 0)}))})()}}};var p=n(1900);const m=(0,p.Z)(f,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("span",[n("b-button",{attrs:{variant:t.variant,disabled:t.isBusy},on:{click:function(e){return t.handleClick()}}},[n("font-awesome-icon",{attrs:{icon:t.icon,spin:t.iconSpin}})],1),t._v(" "),this.actualImages.length>0?n("FsLightbox",{attrs:{toggler:t.toggler,sources:t.actualImages.map((function(t){return t.url}))}}):t._e(),t._v(" "),0==this.pictures.length?n("input",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],ref:"fileInput",attrs:{type:"file",accept:"image/*,application/pdf",multiple:""},on:{change:t.handleUpload}}):t._e()],1)}),[],!1,null,null,null).exports;var v=n(5021),h=n(5778);function b(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==n)return;var r,a,o=[],s=!0,i=!1;try{for(n=n.call(t);!(s=(r=n.next()).done)&&(o.push(r.value),!e||o.length!==e);s=!0);}catch(t){i=!0,a=t}finally{try{s||null==n.return||n.return()}finally{if(i)throw a}}return o}(t,e)||w(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _(t,e,n,r,a,o,s){try{var i=t[o](s),c=i.value}catch(t){return void n(t)}i.done?e(c):Promise.resolve(c).then(r,a)}function g(t){return function(t){if(Array.isArray(t))return x(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||w(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function y(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=w(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,a=function(){};return{s:a,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,s=!0,i=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return s=t.done,t},e:function(t){i=!0,o=t},f:function(){try{s||null==n.return||n.return()}finally{if(i)throw o}}}}function w(t,e){if(t){if("string"==typeof t)return x(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?x(t,e):void 0}}function x(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}const k={props:{value:{required:!0,type:Object},useSecondaryCategories:Boolean,useLocations:Boolean,useCostCenters:Boolean},data:function(){return{modalShow:!1,categories:[],secondaryCategories:[],projects:[],locations:[],costCenters:[],attendees:[],filter:this.createEmptyFilter(),typeOptions:[{value:"income",text:this.$t("Income")},{value:"spending",text:this.$t("Spending")},{value:null,text:this.$t("Any")}],controlledOptions:[{value:"yes",text:this.$t("Yes")},{value:"no",text:this.$t("No")},{value:null,text:this.$t("Any")}]}},computed:{categoryOptions:function(){var t,e=[{value:null,text:"- ".concat(this.$t("Category")," -")}],n=y(this.categories);try{for(n.s();!(t=n.n()).done;){var r=t.value;this.fillTree(e,r)}}catch(t){n.e(t)}finally{n.f()}return e},secondaryCategoryOptions:function(){var t=[{value:null,text:"- ".concat(this.$t("Secondary Category")," -")}];return t.push.apply(t,g(this.secondaryCategories.map((function(t){return{value:t,text:t}})))),t},projectOptions:function(){var t,e=[{value:null,text:"- ".concat(this.$t("Project")," -")}],n=y(this.projects);try{for(n.s();!(t=n.n()).done;){var r=t.value;this.fillTree(e,r)}}catch(t){n.e(t)}finally{n.f()}return e},locationOptions:function(){var t=[{value:null,text:"- ".concat(this.$t("Location")," -")}];return t.push.apply(t,g(this.locations.map((function(t){return{value:t,text:t}})))),t},costCenterOptions:function(){var t=[{value:null,text:"- ".concat(this.$t("Cost Center")," -")}];return t.push.apply(t,g(this.costCenters.map((function(t){return{value:t,text:t}})))),t},buttonVariant:function(){return Object.keys(this.cleanObject(this.value)).length>0?"warning":"secondary"}},created:function(){var t,e=this;return(t=a().mark((function t(){var n;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,v.Z.tree();case 2:return e.categories=t.sent,t.next=5,h.Z.tree();case 5:return e.projects=t.sent,t.next=8,c.Z.taxonomies();case 8:n=t.sent,e.useSecondaryCategories&&(e.secondaryCategories=n.secondary_categories),e.useLocations&&(e.locations=n.locations),e.useCostCenters&&(e.costCenters=n.cost_centers),e.attendees=n.attendees;case 13:case"end":return t.stop()}}),t)})),function(){var e=this,n=arguments;return new Promise((function(r,a){var o=t.apply(e,n);function s(t){_(o,r,a,s,i,"next",t)}function i(t){_(o,r,a,s,i,"throw",t)}s(void 0)}))})()},methods:{cleanObject:function(t){return Object.fromEntries(Object.entries(t).filter((function(t){var e=b(t,2),n=(e[0],e[1]);return!(null==n||!1===n||""==n)})))},createEmptyFilter:function(){return{type:null,controlled:null,receipt_no:null,amount:null,date_start:null,date_end:null,category_id:null,secondary_category:null,project_id:null,location:null,cost_center:null,attendee:null,description:null,remarks:null,supplier:null,today:null,no_receipt:null}},fillTree:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r="";n>0&&(r+="&nbsp;".repeat(5*n)),r+=e.name,t.push({html:r,value:e.id});var a,o=y(e.children);try{for(o.s();!(a=o.n()).done;){var s=a.value;this.fillTree(t,s,n+1)}}catch(t){o.e(t)}finally{o.f()}},initFilter:function(){for(var t=Object.getOwnPropertyNames(this.filter),e=0;e<t.length;e++){var n,r=t[e];this.filter[r]=null!==(n=this.value[r])&&void 0!==n?n:null}},applyFilter:function(){this.$emit("input",this.cleanObject(this.filter))},resetFilter:function(){this.filter=this.createEmptyFilter(),this.applyFilter(),this.modalShow=!1}}};const $=(0,p.Z)(k,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("b-button",{attrs:{variant:t.buttonVariant},on:{click:function(e){t.modalShow=!t.modalShow}}},[n("font-awesome-icon",{attrs:{icon:"search"}}),t._v("\n        "+t._s(t.$t("Advanced filter"))+"\n    ")],1),t._v(" "),n("b-modal",{attrs:{title:t.$t("Advanced filter"),"footer-class":"d-flex justify-content-between"},on:{show:t.initFilter,ok:t.applyFilter},scopedSlots:t._u([{key:"modal-footer",fn:function(e){var r=e.ok,a=e.cancel;return[n("b-button",{attrs:{variant:"outline-secondary"},on:{click:function(e){return t.resetFilter()}}},[t._v("\n                "+t._s(t.$t("Reset filter"))+"\n            ")]),t._v(" "),n("span",[n("b-button",{attrs:{variant:"secondary"},on:{click:function(t){return a()}}},[t._v("\n                    "+t._s(t.$t("Cancel"))+"\n                ")]),t._v(" "),n("b-button",{attrs:{variant:"primary"},on:{click:function(t){return r()}}},[t._v("\n                    "+t._s(t.$t("Apply filter"))+"\n                ")])],1)]}}]),model:{value:t.modalShow,callback:function(e){t.modalShow=e},expression:"modalShow"}},[n("b-form-row",[n("b-col",{staticClass:"mb-3",attrs:{sm:""}},[n("b-form-group",{attrs:{label:t.$t("Type")}},[n("b-form-radio-group",{attrs:{options:t.typeOptions,stacked:""},model:{value:t.filter.type,callback:function(e){t.$set(t.filter,"type",e)},expression:"filter.type"}})],1)],1),t._v(" "),n("b-col",{staticClass:"mb-3",attrs:{sm:""}},[n("b-form-group",{attrs:{label:t.$t("Controlled")}},[n("b-form-radio-group",{attrs:{options:t.controlledOptions,stacked:""},model:{value:t.filter.controlled,callback:function(e){t.$set(t.filter,"controlled",e)},expression:"filter.controlled"}})],1)],1)],1),t._v(" "),n("b-form-row",[n("b-col",{staticClass:"mb-3",attrs:{sm:""}},[n("b-form-group",{attrs:{label:t.$t("Receipt")}},[n("b-form-input",{attrs:{type:"number",min:"1"},model:{value:t.filter.receipt_no,callback:function(e){t.$set(t.filter,"receipt_no",e)},expression:"filter.receipt_no"}})],1)],1),t._v(" "),n("b-col",{staticClass:"mb-3",attrs:{sm:""}},[n("b-form-group",{attrs:{label:t.$t("Amount")}},[n("b-form-input",{attrs:{type:"number",step:".01"},model:{value:t.filter.amount,callback:function(e){t.$set(t.filter,"amount",e)},expression:"filter.amount"}})],1)],1)],1),t._v(" "),n("b-form-row",[n("b-col",{attrs:{sm:""}},[n("b-form-group",{attrs:{label:t.$t("From")}},[n("b-form-input",{attrs:{type:"date",max:t.filter.date_end},model:{value:t.filter.date_start,callback:function(e){t.$set(t.filter,"date_start",e)},expression:"filter.date_start"}})],1)],1),t._v(" "),n("b-col",{attrs:{sm:""}},[n("b-form-group",{attrs:{label:t.$t("To")}},[n("b-form-input",{attrs:{type:"date",min:t.filter.date_start},model:{value:t.filter.date_end,callback:function(e){t.$set(t.filter,"date_end",e)},expression:"filter.date_end"}})],1)],1)],1),t._v(" "),n("b-form-row",[n("b-col",{attrs:{sm:""}},[n("b-form-group",{attrs:{label:t.$t("Category")}},[n("b-select",{attrs:{options:t.categoryOptions},model:{value:t.filter.category_id,callback:function(e){t.$set(t.filter,"category_id",e)},expression:"filter.category_id"}})],1)],1),t._v(" "),t.useSecondaryCategories?n("b-col",{attrs:{sm:""}},[n("b-form-group",{attrs:{label:t.$t("Secondary Category")}},[n("b-select",{attrs:{options:t.secondaryCategoryOptions},model:{value:t.filter.secondary_category,callback:function(e){t.$set(t.filter,"secondary_category",e)},expression:"filter.secondary_category"}})],1)],1):t._e(),t._v(" "),n("b-col",{attrs:{sm:""}},[n("b-form-group",{attrs:{label:t.$t("Project")}},[n("b-select",{attrs:{options:t.projectOptions},model:{value:t.filter.project_id,callback:function(e){t.$set(t.filter,"project_id",e)},expression:"filter.project_id"}})],1)],1)],1),t._v(" "),n("b-form-row",[t.useLocations?n("b-col",{attrs:{sm:""}},[n("b-form-group",{attrs:{label:t.$t("Location")}},[n("b-select",{attrs:{options:t.locationOptions},model:{value:t.filter.location,callback:function(e){t.$set(t.filter,"location",e)},expression:"filter.location"}})],1)],1):t._e(),t._v(" "),t.useCostCenters?n("b-col",{attrs:{sm:""}},[n("b-form-group",{attrs:{label:t.$t("Cost Center")}},[n("b-select",{attrs:{options:t.costCenterOptions},model:{value:t.filter.cost_center,callback:function(e){t.$set(t.filter,"cost_center",e)},expression:"filter.cost_center"}})],1)],1):t._e()],1),t._v(" "),n("b-form-row",[n("b-col",{attrs:{sm:""}},[n("b-form-group",{attrs:{label:t.$t("Attendee")}},[n("b-form-input",{attrs:{trim:"",list:"attendee-list"},model:{value:t.filter.attendee,callback:function(e){t.$set(t.filter,"attendee",e)},expression:"filter.attendee"}})],1),t._v(" "),n("b-form-datalist",{attrs:{id:"attendee-list",options:t.attendees}})],1),t._v(" "),n("b-col",{attrs:{sm:""}},[n("b-form-group",{attrs:{label:t.$t("Supplier")}},[n("b-form-input",{attrs:{trim:""},model:{value:t.filter.supplier,callback:function(e){t.$set(t.filter,"supplier",e)},expression:"filter.supplier"}})],1)],1)],1),t._v(" "),n("b-form-row",[n("b-col",{attrs:{sm:""}},[n("b-form-group",{attrs:{label:t.$t("Description")}},[n("b-form-input",{attrs:{trim:""},model:{value:t.filter.description,callback:function(e){t.$set(t.filter,"description",e)},expression:"filter.description"}})],1)],1),t._v(" "),n("b-col",{attrs:{sm:""}},[n("b-form-group",{attrs:{label:t.$t("Remarks")}},[n("b-form-input",{attrs:{trim:""},model:{value:t.filter.remarks,callback:function(e){t.$set(t.filter,"remarks",e)},expression:"filter.remarks"}})],1)],1)],1),t._v(" "),n("b-form-row",[n("b-col",{attrs:{sm:""}},[n("b-form-checkbox",{model:{value:t.filter.today,callback:function(e){t.$set(t.filter,"today",e)},expression:"filter.today"}},[t._v("\n                    "+t._s(t.$t("Registered today"))+"\n                ")]),t._v(" "),n("b-form-checkbox",{model:{value:t.filter.no_receipt,callback:function(e){t.$set(t.filter,"no_receipt",e)},expression:"filter.no_receipt"}},[t._v("\n                    "+t._s(t.$t("No receipt"))+"\n                ")])],1)],1)],1)],1)}),[],!1,null,null,null).exports;function C(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==n)return;var r,a,o=[],s=!0,i=!1;try{for(n=n.call(t);!(s=(r=n.next()).done)&&(o.push(r.value),!e||o.length!==e);s=!0);}catch(t){i=!0,a=t}finally{try{s||null==n.return||n.return()}finally{if(i)throw a}}return o}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return S(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return S(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function S(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function O(t,e,n,r,a,o,s){try{var i=t[o](s),c=i.value}catch(t){return void n(t)}i.done?e(c):Promise.resolve(c).then(r,a)}const j={props:{wallet:{required:!0},filter:{required:!1,type:String},advancedFilter:{required:!1,type:Object}},data:function(){return{modalShow:!1,isBusy:!1,format:"xlsx",formats:{xlsx:this.$t("Excel (.xlsx)"),csv:this.$t("Comma-separated values (.csv)"),tsv:this.$t("Tab-separated values (.tsv)"),pdf:this.$t("PDF (.pdf)")},grouping:"none",groupings:{none:this.$t("None"),monthly:this.$t("Monthly")},selection:"all",selections:{all:this.$t("All records"),filtered:this.$t("Selected records according to current filter")}}},computed:{hasFilter:function(){return this.filter&&this.filter.length>0||this.advancedFilter&&Object.keys(this.advancedFilter).length>0},formatOptions:function(){return Object.entries(this.formats).map((function(t){return{value:t[0],text:t[1]}}))},groupingOptions:function(){return Object.entries(this.groupings).map((function(t){return{value:t[0],text:t[1]}}))},selectionOptions:function(){return Object.entries(this.selections).map((function(t){return{value:t[0],text:t[1]}}))}},methods:{handleOk:function(t){t.preventDefault(),this.handleSubmit()},handleSubmit:function(){var t,e=this;return(t=a().mark((function t(){var n;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n={wallet:e.wallet,format:e.format,grouping:e.grouping},"filtered"==e.selection&&(e.filter&&e.filter.length>0&&(n.filter=e.filter),e.advancedFilter&&Object.keys(e.advancedFilter).length>0&&Object.entries(e.advancedFilter).forEach((function(t){var e=C(t,2),r=e[0],a=e[1];"date_start"==r?n.date_start=a:"date_end"==r?n.date_end=a:n["advanced_filter[".concat(r,"]")]=a}))),e.isBusy=!0,t.prev=3,t.next=6,c.Z.export(n);case 6:e.modalShow=!1,t.next=12;break;case 9:t.prev=9,t.t0=t.catch(3),alert(t.t0);case 12:e.isBusy=!1;case 13:case"end":return t.stop()}}),t,null,[[3,9]])})),function(){var e=this,n=arguments;return new Promise((function(r,a){var o=t.apply(e,n);function s(t){O(o,r,a,s,i,"next",t)}function i(t){O(o,r,a,s,i,"throw",t)}s(void 0)}))})()}}};const B=(0,p.Z)(j,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("b-button",{attrs:{variant:"secondary"},on:{click:function(e){t.modalShow=!t.modalShow}}},[n("font-awesome-icon",{attrs:{icon:"download"}}),t._v("\n        "+t._s(t.$t("Export"))+"\n    ")],1),t._v(" "),n("form",{ref:"form",on:{submit:function(e){return e.stopPropagation(),e.preventDefault(),t.handleSubmit.apply(null,arguments)}}},[n("b-modal",{attrs:{title:t.$t("Export")},on:{ok:t.handleOk},scopedSlots:t._u([{key:"modal-footer",fn:function(e){var r=e.ok,a=e.cancel;return[t.isBusy?[n("b-spinner",{staticClass:"align-middle mr-2"}),t._v("\n                    "+t._s(t.$t("Generating file..."))+"\n                ")]:[n("b-button",{attrs:{variant:"secondary"},on:{click:function(t){return a()}}},[t._v("\n                        "+t._s(t.$t("Cancel"))+"\n                    ")]),t._v(" "),n("b-button",{attrs:{variant:"primary"},on:{click:function(t){return r()}}},[t._v("\n                        "+t._s(t.$t("Export"))+"\n                    ")])]]}}]),model:{value:t.modalShow,callback:function(e){t.modalShow=e},expression:"modalShow"}},[n("b-form-group",{staticClass:"mb-3",attrs:{label:t.$t("File format")}},[n("b-form-radio-group",{attrs:{options:t.formatOptions,required:"",stacked:""},model:{value:t.format,callback:function(e){t.format=e},expression:"format"}})],1),t._v(" "),n("b-form-group",{staticClass:"mb-3",attrs:{label:t.$t("Grouping")}},[n("b-form-radio-group",{attrs:{options:t.groupingOptions,required:"",stacked:""},model:{value:t.grouping,callback:function(e){t.grouping=e},expression:"grouping"}})],1),t._v(" "),t.hasFilter?n("b-form-group",{staticClass:"mb-3",attrs:{label:t.$t("Selection")}},[n("b-form-radio-group",{attrs:{options:t.selectionOptions,required:"",stacked:""},model:{value:t.selection,callback:function(e){t.selection=e},expression:"selection"}})],1):t._e()],1)],1)],1)}),[],!1,null,null,null).exports;function P(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==n)return;var r,a,o=[],s=!0,i=!1;try{for(n=n.call(t);!(s=(r=n.next()).done)&&(o.push(r.value),!e||o.length!==e);s=!0);}catch(t){i=!0,a=t}finally{try{s||null==n.return||n.return()}finally{if(i)throw a}}return o}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return D(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return D(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function D(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function T(t,e,n,r,a,o,s){try{var i=t[o](s),c=i.value}catch(t){return void n(t)}i.done?e(c):Promise.resolve(c).then(r,a)}const A={components:{BaseTable:l.Z,ReceiptPictureUpload:m,TransactionsFilter:$,TransactionExportDialog:B},props:{wallet:{required:!0},useSecondaryCategories:Boolean,useLocations:Boolean,useCostCenters:Boolean,showIntermediateBalances:Boolean},data:function(){var t={},e=s().parse(this.$route.query);if(e.filter&&Object.keys(e.filter).length>0)t=e.filter,sessionStorage.removeItem("accounting.transactions.advancedFilter");else{var n=sessionStorage.getItem("accounting.transactions.advancedFilter");n&&(t=JSON.parse(n))}return{isBusy:!1,wallets:[],advancedFilter:t,fields:[{key:"receipt_pictures",label:""},{key:"receipt_no",label:this.$t("Receipt"),sortable:!0},{key:"date",label:this.$t("Date"),sortable:!0,sortDirection:"desc",formatter:this.dateFormat},{key:"amount_formatted",label:this.$t("Amount"),class:"fit text-right",tdClass:function(t,e,n){return"income"==n.type?"text-success":"text-danger"},formatter:function(t,e,n){return("spending"==n.type?"-":"")+t}},this.showIntermediateBalances?{key:"intermediate_balance",label:this.$t("Intermediate balance"),class:"fit text-right",tdClass:function(t,e,n){return t>0?"text-success":"text-danger"}}:null,{key:"category_full_name",label:this.$t("Category")},this.useSecondaryCategories?{key:"secondary_category",label:this.$t("Secondary Category")}:null,{key:"budget_name",label:this.$t("Budget")},{key:"project_full_name",label:this.$t("Project")},this.useLocations?{key:"location",label:this.$t("Location")}:null,this.useCostCenters?{key:"cost_center",label:this.$t("Cost Center")}:null,{key:"description",label:this.$t("Description")},{key:"supplier",label:this.$t("Supplier")},{key:"attendee",label:this.$t("Attendee")},{key:"created_at",label:this.$t("Registered"),formatter:this.dateTimeFormat,sortable:!0,sortDirection:"desc"}]}},computed:{currentWallet:{get:function(){return this.wallet},set:function(t){this.$router.push({name:"accounting.transactions.index",params:{wallet:t}})}},walletAmount:function(){var t=this;return 0==this.wallets.length?null:this.wallets.filter((function(e){return e.id==t.wallet}))[0].amount_formatted},walletOptions:function(){return this.wallets.map((function(t){return{value:t.id,text:t.name}}))}},watch:{wallet:function(){this.$refs.table.refresh()},advancedFilter:function(t){sessionStorage.setItem("accounting.transactions.advancedFilter",JSON.stringify(t)),this.$refs.table.refresh()}},created:function(){var t,e=this;return(t=a().mark((function t(){return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,i.Z.list();case 2:e.wallets=t.sent.data;case 3:case"end":return t.stop()}}),t)})),function(){var e=this,n=arguments;return new Promise((function(r,a){var o=t.apply(e,n);function s(t){T(o,r,a,s,i,"next",t)}function i(t){T(o,r,a,s,i,"throw",t)}s(void 0)}))})()},methods:{fetchData:function(t){return Object.keys(this.advancedFilter).length>0&&Object.entries(this.advancedFilter).forEach((function(e){var n=P(e,2),r=n[0],a=n[1];t["advanced_filter[".concat(r,"]")]=a})),c.Z.list(this.wallet,t)}}};const Z={components:{TransactionsTable:(0,p.Z)(A,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("base-table",{ref:"table",attrs:{id:"transactions-table",fields:t.fields,"api-method":t.fetchData,"default-sort-by":"created_at","default-sort-desc":!0,"empty-text":t.$t("No transactions found."),"items-per-page":25},scopedSlots:t._u([{key:"filter-prepend",fn:function(){return[n("b-input-group",{attrs:{prepend:t.$t("Wallet"),append:t.walletAmount}},[n("b-select",{attrs:{options:t.walletOptions,disabled:t.isBusy},model:{value:t.currentWallet,callback:function(e){t.currentWallet=e},expression:"currentWallet"}})],1)]},proxy:!0},{key:"filter-append",fn:function(e){return[n("b-form-row",[n("b-col",[n("TransactionsFilter",{attrs:{"use-secondary-categories":t.useSecondaryCategories,"use-locations":t.useLocations,"use-cost-centers":t.useCostCenters},model:{value:t.advancedFilter,callback:function(e){t.advancedFilter=e},expression:"advancedFilter"}})],1),t._v(" "),t.can("view-transactions")?n("b-col",{attrs:{cols:"auto"}},[n("TransactionExportDialog",{attrs:{wallet:t.wallet,filter:e.filter,advancedFilter:t.advancedFilter}})],1):t._e()],1)]}},{key:"cell(receipt_pictures)",fn:function(t){return[n("ReceiptPictureUpload",{attrs:{transaction:t.item.id,value:t.value}})]}},{key:"cell(receipt_no)",fn:function(e){return[n("router-link",{attrs:{to:{name:"accounting.transactions.show",params:{id:e.item.id}}}},[t._v("\n                "+t._s(e.value)+"\n            ")])]}},{key:"cell(description)",fn:function(e){return[t._v("\n            "+t._s(e.value)+"\n            "),e.item.remarks?n("small",{staticClass:"d-block text-muted"},[t._v(t._s(e.item.remarks))]):t._e()]}},{key:"cell(budget_name)",fn:function(e){return[t.can("view-budgets")?n("router-link",{attrs:{to:{name:"accounting.budgets.show",params:{id:e.item.budget_id}}}},[t._v(t._s(e.value))]):[t._v("\n                "+t._s(e.value)+"\n            ")]]}},{key:"cell(supplier)",fn:function(e){return[e.item.supplier?n("router-link",{attrs:{to:{name:"accounting.suppliers.show",params:{id:e.item.supplier.slug}},title:e.item.supplier.category}},[t._v("\n                "+t._s(e.item.supplier.name)+"\n            ")]):t._e()]}}])})],1)}),[],!1,null,null,null).exports},props:{wallet:{required:!0}},computed:(0,n(629).rn)(["settings"])};const E=(0,p.Z)(Z,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("TransactionsTable",{attrs:{wallet:t.wallet,"use-secondary-categories":t.settings["accounting.transactions.use_secondary_categories"],"use-locations":t.settings["accounting.transactions.use_locations"],"use-cost-centers":t.settings["accounting.transactions.use_cost_centers"],"show-intermediate-balances":t.settings["accounting.transactions.show_intermediate_balances"]}})],1)}),[],!1,null,null,null).exports},1110:(t,e,n)=>{n.r(e),n.d(e,{default:()=>l});var r=n(7757),a=n.n(r),o=n(1581),s=n(6557);function i(t,e,n,r,a,o,s){try{var i=t[o](s),c=i.value}catch(t){return void n(t)}i.done?e(c):Promise.resolve(c).then(r,a)}const c={components:{WalletForm:n(5359).Z},data:function(){return{isBusy:!1}},methods:{registerWallet:function(t){var e,n=this;return(e=a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.isBusy=!0,e.prev=1,e.next=4,s.Z.store(t);case 4:e.sent,(0,o.OV)(n.$t("Wallet added.")),n.$router.push({name:"accounting.wallets.index"}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),alert(e.t0);case 12:n.isBusy=!1;case 13:case"end":return e.stop()}}),e,null,[[1,9]])})),function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function s(t){i(o,r,a,s,c,"next",t)}function c(t){i(o,r,a,s,c,"throw",t)}s(void 0)}))})()},handleCancel:function(){this.$router.push({name:"accounting.wallets.index"})}}};const l=(0,n(1900).Z)(c,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("b-container",{staticClass:"px-0"},[n("wallet-form",{attrs:{disabled:t.isBusy},on:{submit:t.registerWallet,cancel:t.handleCancel}})],1)}),[],!1,null,null,null).exports},4464:(t,e,n)=>{n.r(e),n.d(e,{default:()=>u});var r=n(7757),a=n.n(r),o=n(1581),s=n(6557);function i(t,e,n,r,a,o,s){try{var i=t[o](s),c=i.value}catch(t){return void n(t)}i.done?e(c):Promise.resolve(c).then(r,a)}function c(t){return function(){var e=this,n=arguments;return new Promise((function(r,a){var o=t.apply(e,n);function s(t){i(o,r,a,s,c,"next",t)}function c(t){i(o,r,a,s,c,"throw",t)}s(void 0)}))}}const l={components:{WalletForm:n(5359).Z},props:{id:{required:!0}},data:function(){return{wallet:null,isBusy:!1}},watch:{$route:function(){this.fetchWallet()}},created:function(){var t=this;return c(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.fetchWallet();case 1:case"end":return e.stop()}}),e)})))()},methods:{fetchWallet:function(){var t=this;return c(a().mark((function e(){var n;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,s.Z.find(t.id);case 3:n=e.sent,t.wallet=n.data,e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),alert(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))()},updateWallet:function(t){var e=this;return c(a().mark((function n(){return a().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return e.isBusy=!0,n.prev=1,n.next=4,s.Z.update(e.id,t);case 4:(0,o.OV)(e.$t("Wallet updated.")),e.$router.push({name:"accounting.wallets.index"}),n.next=11;break;case 8:n.prev=8,n.t0=n.catch(1),alert(n.t0);case 11:e.isBusy=!1;case 12:case"end":return n.stop()}}),n,null,[[1,8]])})))()},deleteWallet:function(){var t=this;return c(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.isBusy=!0,e.prev=1,e.next=4,s.Z.delete(t.id);case 4:(0,o.OV)(t.$t("Wallet deleted.")),t.$router.push({name:"accounting.wallets.index"}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),alert(e.t0);case 11:t.isBusy=!1;case 12:case"end":return e.stop()}}),e,null,[[1,8]])})))()},handleCancel:function(){this.$router.push({name:"accounting.wallets.index"})}}};const u=(0,n(1900).Z)(l,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.wallet?n("b-container",{staticClass:"px-0"},[n("wallet-form",{attrs:{wallet:t.wallet,disabled:t.isBusy},on:{submit:t.updateWallet,cancel:t.handleCancel,delete:t.deleteWallet}}),t._v(" "),n("hr"),t._v(" "),n("p",{staticClass:"text-right"},[n("small",[t._v("\n            "+t._s(t.$t("Created"))+":\n            "+t._s(t._f("dateTimeFormat")(t.wallet.created_at))+" ")]),n("br"),t._v(" "),n("small",[t._v("\n            "+t._s(t.$t("Last updated"))+":\n            "+t._s(t._f("dateTimeFormat")(t.wallet.updated_at))+"\n        ")])])],1):n("p",[t._v("\n    "+t._s(t.$t("Loading..."))+"\n")])}),[],!1,null,null,null).exports},9582:(t,e,n)=>{n.r(e),n.d(e,{default:()=>c});var r=n(7757),a=n.n(r),o=n(6557);function s(t,e,n,r,a,o,s){try{var i=t[o](s),c=i.value}catch(t){return void n(t)}i.done?e(c):Promise.resolve(c).then(r,a)}const i={components:{BaseTable:n(6951).Z},data:function(){return{fields:[{key:"name",label:this.$t("Name")},{key:"num_transactions",label:this.$t("Transactions"),class:"fit text-right"},{key:"amount_formatted",label:this.$t("Amount"),class:"fit text-right",tdClass:function(t,e,n){return n.amount<0?"text-danger":null}},{key:"is_restricted",label:this.$t("Restricted"),class:"fit text-center"},{key:"latest_activity",label:this.$t("Latest activity"),class:"fit text-right",formatter:this.dateTimeFormat}]}},methods:{fetchData:function(t){return(e=a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",o.Z.list(t));case 1:case"end":return e.stop()}}),e)})),function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(t){s(o,r,a,i,c,"next",t)}function c(t){s(o,r,a,i,c,"throw",t)}i(void 0)}))})();var e}}};const c=(0,n(1900).Z)(i,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("b-container",{staticClass:"px-0"},[n("base-table",{ref:"table",attrs:{id:"wallets-table",fields:t.fields,"api-method":t.fetchData,"default-sort-by":"name","empty-text":t.$t("No wallets found."),"items-per-page":25,"no-filter":""},scopedSlots:t._u([{key:"cell(name)",fn:function(e){return[e.item.can_update?n("router-link",{attrs:{to:{name:"accounting.wallets.edit",params:{id:e.item.id}}}},[t._v("\n                "+t._s(e.value)+"\n            ")]):[t._v("\n                "+t._s(e.value)+"\n            ")]]}},{key:"cell(num_transactions)",fn:function(e){return[n("router-link",{attrs:{to:{name:"accounting.transactions.index",params:{wallet:e.item.id}}}},[t._v("\n                "+t._s(e.value)+"\n            ")])]}},{key:"cell(is_restricted)",fn:function(t){return[n("font-awesome-icon",{attrs:{icon:t.value?"check":"times"}})]}}])})],1)}),[],!1,null,null,null).exports}}]);
//# sourceMappingURL=accounting.js.map?id=f4556d8d399d2b66afa8